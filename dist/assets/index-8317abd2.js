(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Je(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pN={exports:{}},eg={},mN={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf=Symbol.for("react.element"),X4=Symbol.for("react.portal"),J4=Symbol.for("react.fragment"),Z4=Symbol.for("react.strict_mode"),eV=Symbol.for("react.profiler"),tV=Symbol.for("react.provider"),nV=Symbol.for("react.context"),rV=Symbol.for("react.forward_ref"),iV=Symbol.for("react.suspense"),oV=Symbol.for("react.memo"),sV=Symbol.for("react.lazy"),aT=Symbol.iterator;function aV(t){return t===null||typeof t!="object"?null:(t=aT&&t[aT]||t["@@iterator"],typeof t=="function"?t:null)}var gN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yN=Object.assign,vN={};function Gl(t,e,n){this.props=t,this.context=e,this.refs=vN,this.updater=n||gN}Gl.prototype.isReactComponent={};Gl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _N(){}_N.prototype=Gl.prototype;function Ob(t,e,n){this.props=t,this.context=e,this.refs=vN,this.updater=n||gN}var kb=Ob.prototype=new _N;kb.constructor=Ob;yN(kb,Gl.prototype);kb.isPureReactComponent=!0;var lT=Array.isArray,wN=Object.prototype.hasOwnProperty,Nb={current:null},bN={key:!0,ref:!0,__self:!0,__source:!0};function xN(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)wN.call(e,r)&&!bN.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Kf,type:t,key:o,ref:s,props:i,_owner:Nb.current}}function lV(t,e){return{$$typeof:Kf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rb(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kf}function uV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var uT=/\/+/g;function ov(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uV(""+t.key):e.toString(36)}function Pd(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Kf:case X4:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+ov(s,0):r,lT(i)?(n="",t!=null&&(n=t.replace(uT,"$&/")+"/"),Pd(i,e,n,"",function(u){return u})):i!=null&&(Rb(i)&&(i=lV(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(uT,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",lT(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+ov(o,a);s+=Pd(o,e,n,l,i)}else if(l=aV(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+ov(o,a++),s+=Pd(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function zh(t,e,n){if(t==null)return t;var r=[],i=0;return Pd(t,r,"","",function(o){return e.call(n,o,i++)}),r}function cV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},Cd={transition:null},fV={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:Cd,ReactCurrentOwner:Nb};function EN(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:zh,forEach:function(t,e,n){zh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zh(t,function(){e++}),e},toArray:function(t){return zh(t,function(e){return e})||[]},only:function(t){if(!Rb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Gl;ke.Fragment=J4;ke.Profiler=eV;ke.PureComponent=Ob;ke.StrictMode=Z4;ke.Suspense=iV;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fV;ke.act=EN;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yN({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Nb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wN.call(e,l)&&!bN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Kf,type:t.type,key:i,ref:o,props:r,_owner:s}};ke.createContext=function(t){return t={$$typeof:nV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tV,_context:t},t.Consumer=t};ke.createElement=xN;ke.createFactory=function(t){var e=xN.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:rV,render:t}};ke.isValidElement=Rb;ke.lazy=function(t){return{$$typeof:sV,_payload:{_status:-1,_result:t},_init:cV}};ke.memo=function(t,e){return{$$typeof:oV,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Cd.transition;Cd.transition={};try{t()}finally{Cd.transition=e}};ke.unstable_act=EN;ke.useCallback=function(t,e){return An.current.useCallback(t,e)};ke.useContext=function(t){return An.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return An.current.useDeferredValue(t)};ke.useEffect=function(t,e){return An.current.useEffect(t,e)};ke.useId=function(){return An.current.useId()};ke.useImperativeHandle=function(t,e,n){return An.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return An.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return An.current.useReducer(t,e,n)};ke.useRef=function(t){return An.current.useRef(t)};ke.useState=function(t){return An.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return An.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return An.current.useTransition()};ke.version="18.3.1";mN.exports=ke;var j=mN.exports;const D=Je(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hV=j,dV=Symbol.for("react.element"),pV=Symbol.for("react.fragment"),mV=Object.prototype.hasOwnProperty,gV=hV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yV={key:!0,ref:!0,__self:!0,__source:!0};function SN(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)mV.call(e,r)&&!yV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dV,type:t,key:o,ref:s,props:i,_owner:gV.current}}eg.Fragment=pV;eg.jsx=SN;eg.jsxs=SN;pN.exports=eg;var x=pN.exports,I0={},TN={exports:{}},Zn={},AN={exports:{}},IN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,W){var Q=F.length;F.push(W);e:for(;0<Q;){var re=Q-1>>>1,U=F[re];if(0<i(U,W))F[re]=W,F[Q]=U,Q=re;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var W=F[0],Q=F.pop();if(Q!==W){F[0]=Q;e:for(var re=0,U=F.length,X=U>>>1;re<X;){var ue=2*(re+1)-1,de=F[ue],me=ue+1,xe=F[me];if(0>i(de,Q))me<U&&0>i(xe,de)?(F[re]=xe,F[me]=Q,re=me):(F[re]=de,F[ue]=Q,re=ue);else if(me<U&&0>i(xe,Q))F[re]=xe,F[me]=Q,re=me;else break e}}return W}function i(F,W){var Q=F.sortIndex-W.sortIndex;return Q!==0?Q:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],f=1,c=null,d=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=F)r(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function C(F){if(g=!1,E(F),!m)if(n(l)!==null)m=!0,q(T);else{var W=n(u);W!==null&&K(C,W.startTime-F)}}function T(F,W){m=!1,g&&(g=!1,_(S),S=-1),p=!0;var Q=d;try{for(E(W),c=n(l);c!==null&&(!(c.expirationTime>W)||F&&!k());){var re=c.callback;if(typeof re=="function"){c.callback=null,d=c.priorityLevel;var U=re(c.expirationTime<=W);W=t.unstable_now(),typeof U=="function"?c.callback=U:c===n(l)&&r(l),E(W)}else r(l);c=n(l)}if(c!==null)var X=!0;else{var ue=n(u);ue!==null&&K(C,ue.startTime-W),X=!1}return X}finally{c=null,d=Q,p=!1}}var I=!1,b=null,S=-1,P=5,O=-1;function k(){return!(t.unstable_now()-O<P)}function M(){if(b!==null){var F=t.unstable_now();O=F;var W=!0;try{W=b(!0,F)}finally{W?N():(I=!1,b=null)}}else I=!1}var N;if(typeof w=="function")N=function(){w(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,z=V.port2;V.port1.onmessage=M,N=function(){z.postMessage(null)}}else N=function(){v(M,0)};function q(F){b=F,I||(I=!0,N())}function K(F,W){S=v(function(){F(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,q(T))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var Q=d;d=W;try{return F()}finally{d=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Q=d;d=F;try{return W()}finally{d=Q}},t.unstable_scheduleCallback=function(F,W,Q){var re=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,F){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,F={id:f++,callback:W,priorityLevel:F,startTime:Q,expirationTime:U,sortIndex:-1},Q>re?(F.sortIndex=Q,e(u,F),n(l)===null&&F===n(u)&&(g?(_(S),S=-1):g=!0,K(C,Q-re))):(F.sortIndex=U,e(l,F),m||p||(m=!0,q(T))),F},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(F){var W=d;return function(){var Q=d;d=W;try{return F.apply(this,arguments)}finally{d=Q}}}})(IN);AN.exports=IN;var vV=AN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _V=j,Xn=vV;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PN=new Set,kc={};function qs(t,e){tl(t,e),tl(t+"Capture",e)}function tl(t,e){for(kc[t]=e,t=0;t<e.length;t++)PN.add(e[t])}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P0=Object.prototype.hasOwnProperty,wV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cT={},fT={};function bV(t){return P0.call(fT,t)?!0:P0.call(cT,t)?!1:wV.test(t)?fT[t]=!0:(cT[t]=!0,!1)}function xV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EV(t,e,n,r){if(e===null||typeof e>"u"||xV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mb=/[\-:]([a-z])/g;function Db(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mb,Db);nn[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mb,Db);nn[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mb,Db);nn[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function jb(t,e,n,r){var i=nn.hasOwnProperty(e)?nn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EV(e,n,i,r)&&(n=null),r||i===null?bV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gi=_V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wh=Symbol.for("react.element"),_a=Symbol.for("react.portal"),wa=Symbol.for("react.fragment"),Lb=Symbol.for("react.strict_mode"),C0=Symbol.for("react.profiler"),CN=Symbol.for("react.provider"),ON=Symbol.for("react.context"),$b=Symbol.for("react.forward_ref"),O0=Symbol.for("react.suspense"),k0=Symbol.for("react.suspense_list"),Fb=Symbol.for("react.memo"),no=Symbol.for("react.lazy"),kN=Symbol.for("react.offscreen"),hT=Symbol.iterator;function Cu(t){return t===null||typeof t!="object"?null:(t=hT&&t[hT]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,sv;function Zu(t){if(sv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sv=e&&e[1]||""}return`
`+sv+t}var av=!1;function lv(t,e){if(!t||av)return"";av=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{av=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zu(t):""}function SV(t){switch(t.tag){case 5:return Zu(t.type);case 16:return Zu("Lazy");case 13:return Zu("Suspense");case 19:return Zu("SuspenseList");case 0:case 2:case 15:return t=lv(t.type,!1),t;case 11:return t=lv(t.type.render,!1),t;case 1:return t=lv(t.type,!0),t;default:return""}}function N0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wa:return"Fragment";case _a:return"Portal";case C0:return"Profiler";case Lb:return"StrictMode";case O0:return"Suspense";case k0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ON:return(t.displayName||"Context")+".Consumer";case CN:return(t._context.displayName||"Context")+".Provider";case $b:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fb:return e=t.displayName||null,e!==null?e:N0(t.type)||"Memo";case no:e=t._payload,t=t._init;try{return N0(t(e))}catch{}}return null}function TV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N0(e);case 8:return e===Lb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ko(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AV(t){var e=NN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gh(t){t._valueTracker||(t._valueTracker=AV(t))}function RN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=NN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function R0(t,e){var n=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ko(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MN(t,e){e=e.checked,e!=null&&jb(t,"checked",e,!1)}function M0(t,e){MN(t,e);var n=ko(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?D0(t,e.type,n):e.hasOwnProperty("defaultValue")&&D0(t,e.type,ko(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function D0(t,e,n){(e!=="number"||Yd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ec=Array.isArray;function La(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ko(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function j0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(ec(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ko(n)}}function DN(t,e){var n=ko(e.value),r=ko(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hh,LN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hh=Hh||document.createElement("div"),Hh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IV=["Webkit","ms","Moz","O"];Object.keys(lc).forEach(function(t){IV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lc[e]=lc[t]})});function $N(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lc.hasOwnProperty(t)&&lc[t]?(""+e).trim():e+"px"}function FN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$N(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PV=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $0(t,e){if(e){if(PV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function F0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V0=null;function Vb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var U0=null,$a=null,Fa=null;function yT(t){if(t=Xf(t)){if(typeof U0!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=og(e),U0(t.stateNode,t.type,e))}}function VN(t){$a?Fa?Fa.push(t):Fa=[t]:$a=t}function UN(){if($a){var t=$a,e=Fa;if(Fa=$a=null,yT(t),e)for(t=0;t<e.length;t++)yT(e[t])}}function BN(t,e){return t(e)}function zN(){}var uv=!1;function WN(t,e,n){if(uv)return t(e,n);uv=!0;try{return BN(t,e,n)}finally{uv=!1,($a!==null||Fa!==null)&&(zN(),UN())}}function Rc(t,e){var n=t.stateNode;if(n===null)return null;var r=og(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var B0=!1;if(Ni)try{var Ou={};Object.defineProperty(Ou,"passive",{get:function(){B0=!0}}),window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{B0=!1}function CV(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var uc=!1,Qd=null,Xd=!1,z0=null,OV={onError:function(t){uc=!0,Qd=t}};function kV(t,e,n,r,i,o,s,a,l){uc=!1,Qd=null,CV.apply(OV,arguments)}function NV(t,e,n,r,i,o,s,a,l){if(kV.apply(this,arguments),uc){if(uc){var u=Qd;uc=!1,Qd=null}else throw Error(ee(198));Xd||(Xd=!0,z0=u)}}function Ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vT(t){if(Ks(t)!==t)throw Error(ee(188))}function RV(t){var e=t.alternate;if(!e){if(e=Ks(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vT(i),t;if(o===r)return vT(i),e;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function HN(t){return t=RV(t),t!==null?qN(t):null}function qN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qN(t);if(e!==null)return e;t=t.sibling}return null}var KN=Xn.unstable_scheduleCallback,_T=Xn.unstable_cancelCallback,MV=Xn.unstable_shouldYield,DV=Xn.unstable_requestPaint,bt=Xn.unstable_now,jV=Xn.unstable_getCurrentPriorityLevel,Ub=Xn.unstable_ImmediatePriority,YN=Xn.unstable_UserBlockingPriority,Jd=Xn.unstable_NormalPriority,LV=Xn.unstable_LowPriority,QN=Xn.unstable_IdlePriority,tg=null,Hr=null;function $V(t){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(tg,t,void 0,(t.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:UV,FV=Math.log,VV=Math.LN2;function UV(t){return t>>>=0,t===0?32:31-(FV(t)/VV|0)|0}var qh=64,Kh=4194304;function tc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=tc(a):(o&=s,o!==0&&(r=tc(o)))}else s=n&~i,s!==0?r=tc(s):o!==0&&(r=tc(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rr(e),i=1<<n,r|=t[n],e&=~i;return r}function BV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Rr(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=BV(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function W0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XN(){var t=qh;return qh<<=1,!(qh&4194240)&&(qh=64),t}function cv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rr(e),t[e]=n}function WV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Bb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var We=0;function JN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZN,zb,eR,tR,nR,G0=!1,Yh=[],go=null,yo=null,vo=null,Mc=new Map,Dc=new Map,oo=[],GV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wT(t,e){switch(t){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":yo=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":Mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(e.pointerId)}}function ku(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Xf(e),e!==null&&zb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function HV(t,e,n,r,i){switch(e){case"focusin":return go=ku(go,t,e,n,r,i),!0;case"dragenter":return yo=ku(yo,t,e,n,r,i),!0;case"mouseover":return vo=ku(vo,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Mc.set(o,ku(Mc.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dc.set(o,ku(Dc.get(o)||null,t,e,n,r,i)),!0}return!1}function rR(t){var e=us(t.target);if(e!==null){var n=Ks(e);if(n!==null){if(e=n.tag,e===13){if(e=GN(n),e!==null){t.blockedOn=e,nR(t.priority,function(){eR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Od(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=H0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);V0=r,n.target.dispatchEvent(r),V0=null}else return e=Xf(n),e!==null&&zb(e),t.blockedOn=n,!1;e.shift()}return!0}function bT(t,e,n){Od(t)&&n.delete(e)}function qV(){G0=!1,go!==null&&Od(go)&&(go=null),yo!==null&&Od(yo)&&(yo=null),vo!==null&&Od(vo)&&(vo=null),Mc.forEach(bT),Dc.forEach(bT)}function Nu(t,e){t.blockedOn===e&&(t.blockedOn=null,G0||(G0=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,qV)))}function jc(t){function e(i){return Nu(i,t)}if(0<Yh.length){Nu(Yh[0],t);for(var n=1;n<Yh.length;n++){var r=Yh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(go!==null&&Nu(go,t),yo!==null&&Nu(yo,t),vo!==null&&Nu(vo,t),Mc.forEach(e),Dc.forEach(e),n=0;n<oo.length;n++)r=oo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<oo.length&&(n=oo[0],n.blockedOn===null);)rR(n),n.blockedOn===null&&oo.shift()}var Va=Gi.ReactCurrentBatchConfig,ep=!0;function KV(t,e,n,r){var i=We,o=Va.transition;Va.transition=null;try{We=1,Wb(t,e,n,r)}finally{We=i,Va.transition=o}}function YV(t,e,n,r){var i=We,o=Va.transition;Va.transition=null;try{We=4,Wb(t,e,n,r)}finally{We=i,Va.transition=o}}function Wb(t,e,n,r){if(ep){var i=H0(t,e,n,r);if(i===null)wv(t,e,r,tp,n),wT(t,r);else if(HV(i,t,e,n,r))r.stopPropagation();else if(wT(t,r),e&4&&-1<GV.indexOf(t)){for(;i!==null;){var o=Xf(i);if(o!==null&&ZN(o),o=H0(t,e,n,r),o===null&&wv(t,e,r,tp,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else wv(t,e,r,null,n)}}var tp=null;function H0(t,e,n,r){if(tp=null,t=Vb(r),t=us(t),t!==null)if(e=Ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tp=t,null}function iR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jV()){case Ub:return 1;case YN:return 4;case Jd:case LV:return 16;case QN:return 536870912;default:return 16}default:return 16}}var fo=null,Gb=null,kd=null;function oR(){if(kd)return kd;var t,e=Gb,n=e.length,r,i="value"in fo?fo.value:fo.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return kd=i.slice(t,1<r?1-r:void 0)}function Nd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qh(){return!0}function xT(){return!1}function er(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Qh:xT,this.isPropagationStopped=xT,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qh)},persist:function(){},isPersistent:Qh}),e}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hb=er(Hl),Qf=pt({},Hl,{view:0,detail:0}),QV=er(Qf),fv,hv,Ru,ng=pt({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ru&&(Ru&&t.type==="mousemove"?(fv=t.screenX-Ru.screenX,hv=t.screenY-Ru.screenY):hv=fv=0,Ru=t),fv)},movementY:function(t){return"movementY"in t?t.movementY:hv}}),ET=er(ng),XV=pt({},ng,{dataTransfer:0}),JV=er(XV),ZV=pt({},Qf,{relatedTarget:0}),dv=er(ZV),e3=pt({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),t3=er(e3),n3=pt({},Hl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),r3=er(n3),i3=pt({},Hl,{data:0}),ST=er(i3),o3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=a3[t])?!!e[t]:!1}function qb(){return l3}var u3=pt({},Qf,{key:function(t){if(t.key){var e=o3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qb,charCode:function(t){return t.type==="keypress"?Nd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),c3=er(u3),f3=pt({},ng,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TT=er(f3),h3=pt({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qb}),d3=er(h3),p3=pt({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),m3=er(p3),g3=pt({},ng,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y3=er(g3),v3=[9,13,27,32],Kb=Ni&&"CompositionEvent"in window,cc=null;Ni&&"documentMode"in document&&(cc=document.documentMode);var _3=Ni&&"TextEvent"in window&&!cc,sR=Ni&&(!Kb||cc&&8<cc&&11>=cc),AT=String.fromCharCode(32),IT=!1;function aR(t,e){switch(t){case"keyup":return v3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ba=!1;function w3(t,e){switch(t){case"compositionend":return lR(e);case"keypress":return e.which!==32?null:(IT=!0,AT);case"textInput":return t=e.data,t===AT&&IT?null:t;default:return null}}function b3(t,e){if(ba)return t==="compositionend"||!Kb&&aR(t,e)?(t=oR(),kd=Gb=fo=null,ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sR&&e.locale!=="ko"?null:e.data;default:return null}}var x3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!x3[t.type]:e==="textarea"}function uR(t,e,n,r){VN(r),e=np(e,"onChange"),0<e.length&&(n=new Hb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fc=null,Lc=null;function E3(t){wR(t,0)}function rg(t){var e=Sa(t);if(RN(e))return t}function S3(t,e){if(t==="change")return e}var cR=!1;if(Ni){var pv;if(Ni){var mv="oninput"in document;if(!mv){var CT=document.createElement("div");CT.setAttribute("oninput","return;"),mv=typeof CT.oninput=="function"}pv=mv}else pv=!1;cR=pv&&(!document.documentMode||9<document.documentMode)}function OT(){fc&&(fc.detachEvent("onpropertychange",fR),Lc=fc=null)}function fR(t){if(t.propertyName==="value"&&rg(Lc)){var e=[];uR(e,Lc,t,Vb(t)),WN(E3,e)}}function T3(t,e,n){t==="focusin"?(OT(),fc=e,Lc=n,fc.attachEvent("onpropertychange",fR)):t==="focusout"&&OT()}function A3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rg(Lc)}function I3(t,e){if(t==="click")return rg(e)}function P3(t,e){if(t==="input"||t==="change")return rg(e)}function C3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $r=typeof Object.is=="function"?Object.is:C3;function $c(t,e){if($r(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!P0.call(e,i)||!$r(t[i],e[i]))return!1}return!0}function kT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function NT(t,e){var n=kT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kT(n)}}function hR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dR(){for(var t=window,e=Yd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yd(t.document)}return e}function Yb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function O3(t){var e=dR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hR(n.ownerDocument.documentElement,n)){if(r!==null&&Yb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=NT(n,o);var s=NT(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k3=Ni&&"documentMode"in document&&11>=document.documentMode,xa=null,q0=null,hc=null,K0=!1;function RT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;K0||xa==null||xa!==Yd(r)||(r=xa,"selectionStart"in r&&Yb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hc&&$c(hc,r)||(hc=r,r=np(q0,"onSelect"),0<r.length&&(e=new Hb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xa)))}function Xh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ea={animationend:Xh("Animation","AnimationEnd"),animationiteration:Xh("Animation","AnimationIteration"),animationstart:Xh("Animation","AnimationStart"),transitionend:Xh("Transition","TransitionEnd")},gv={},pR={};Ni&&(pR=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function ig(t){if(gv[t])return gv[t];if(!Ea[t])return t;var e=Ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pR)return gv[t]=e[n];return t}var mR=ig("animationend"),gR=ig("animationiteration"),yR=ig("animationstart"),vR=ig("transitionend"),_R=new Map,MT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(t,e){_R.set(t,e),qs(e,[t])}for(var yv=0;yv<MT.length;yv++){var vv=MT[yv],N3=vv.toLowerCase(),R3=vv[0].toUpperCase()+vv.slice(1);Vo(N3,"on"+R3)}Vo(mR,"onAnimationEnd");Vo(gR,"onAnimationIteration");Vo(yR,"onAnimationStart");Vo("dblclick","onDoubleClick");Vo("focusin","onFocus");Vo("focusout","onBlur");Vo(vR,"onTransitionEnd");tl("onMouseEnter",["mouseout","mouseover"]);tl("onMouseLeave",["mouseout","mouseover"]);tl("onPointerEnter",["pointerout","pointerover"]);tl("onPointerLeave",["pointerout","pointerover"]);qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M3=new Set("cancel close invalid load scroll toggle".split(" ").concat(nc));function DT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,NV(r,e,void 0,t),t.currentTarget=null}function wR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;DT(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;DT(i,a,u),o=l}}}if(Xd)throw t=z0,Xd=!1,z0=null,t}function nt(t,e){var n=e[Z0];n===void 0&&(n=e[Z0]=new Set);var r=t+"__bubble";n.has(r)||(bR(e,t,2,!1),n.add(r))}function _v(t,e,n){var r=0;e&&(r|=4),bR(n,t,r,e)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function Fc(t){if(!t[Jh]){t[Jh]=!0,PN.forEach(function(n){n!=="selectionchange"&&(M3.has(n)||_v(n,!1,t),_v(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jh]||(e[Jh]=!0,_v("selectionchange",!1,e))}}function bR(t,e,n,r){switch(iR(e)){case 1:var i=KV;break;case 4:i=YV;break;default:i=Wb}n=i.bind(null,e,n,t),i=void 0,!B0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wv(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=us(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}WN(function(){var u=o,f=Vb(n),c=[];e:{var d=_R.get(t);if(d!==void 0){var p=Hb,m=t;switch(t){case"keypress":if(Nd(n)===0)break e;case"keydown":case"keyup":p=c3;break;case"focusin":m="focus",p=dv;break;case"focusout":m="blur",p=dv;break;case"beforeblur":case"afterblur":p=dv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ET;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=JV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=d3;break;case mR:case gR:case yR:p=t3;break;case vR:p=m3;break;case"scroll":p=QV;break;case"wheel":p=y3;break;case"copy":case"cut":case"paste":p=r3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=TT}var g=(e&4)!==0,v=!g&&t==="scroll",_=g?d!==null?d+"Capture":null:d;g=[];for(var w=u,E;w!==null;){E=w;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,_!==null&&(C=Rc(w,_),C!=null&&g.push(Vc(w,C,E)))),v)break;w=w.return}0<g.length&&(d=new p(d,m,null,n,f),c.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==V0&&(m=n.relatedTarget||n.fromElement)&&(us(m)||m[Ri]))break e;if((p||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?us(m):null,m!==null&&(v=Ks(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=ET,C="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=TT,C="onPointerLeave",_="onPointerEnter",w="pointer"),v=p==null?d:Sa(p),E=m==null?d:Sa(m),d=new g(C,w+"leave",p,n,f),d.target=v,d.relatedTarget=E,C=null,us(f)===u&&(g=new g(_,w+"enter",m,n,f),g.target=E,g.relatedTarget=v,C=g),v=C,p&&m)t:{for(g=p,_=m,w=0,E=g;E;E=ca(E))w++;for(E=0,C=_;C;C=ca(C))E++;for(;0<w-E;)g=ca(g),w--;for(;0<E-w;)_=ca(_),E--;for(;w--;){if(g===_||_!==null&&g===_.alternate)break t;g=ca(g),_=ca(_)}g=null}else g=null;p!==null&&jT(c,d,p,g,!1),m!==null&&v!==null&&jT(c,v,m,g,!0)}}e:{if(d=u?Sa(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var T=S3;else if(PT(d))if(cR)T=P3;else{T=A3;var I=T3}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=I3);if(T&&(T=T(t,u))){uR(c,T,n,f);break e}I&&I(t,d,u),t==="focusout"&&(I=d._wrapperState)&&I.controlled&&d.type==="number"&&D0(d,"number",d.value)}switch(I=u?Sa(u):window,t){case"focusin":(PT(I)||I.contentEditable==="true")&&(xa=I,q0=u,hc=null);break;case"focusout":hc=q0=xa=null;break;case"mousedown":K0=!0;break;case"contextmenu":case"mouseup":case"dragend":K0=!1,RT(c,n,f);break;case"selectionchange":if(k3)break;case"keydown":case"keyup":RT(c,n,f)}var b;if(Kb)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ba?aR(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(sR&&n.locale!=="ko"&&(ba||S!=="onCompositionStart"?S==="onCompositionEnd"&&ba&&(b=oR()):(fo=f,Gb="value"in fo?fo.value:fo.textContent,ba=!0)),I=np(u,S),0<I.length&&(S=new ST(S,t,null,n,f),c.push({event:S,listeners:I}),b?S.data=b:(b=lR(n),b!==null&&(S.data=b)))),(b=_3?w3(t,n):b3(t,n))&&(u=np(u,"onBeforeInput"),0<u.length&&(f=new ST("onBeforeInput","beforeinput",null,n,f),c.push({event:f,listeners:u}),f.data=b))}wR(c,e)})}function Vc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function np(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Rc(t,n),o!=null&&r.unshift(Vc(t,o,i)),o=Rc(t,e),o!=null&&r.push(Vc(t,o,i))),t=t.return}return r}function ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jT(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Rc(n,o),l!=null&&s.unshift(Vc(n,l,a))):i||(l=Rc(n,o),l!=null&&s.push(Vc(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var D3=/\r\n?/g,j3=/\u0000|\uFFFD/g;function LT(t){return(typeof t=="string"?t:""+t).replace(D3,`
`).replace(j3,"")}function Zh(t,e,n){if(e=LT(e),LT(t)!==e&&n)throw Error(ee(425))}function rp(){}var Y0=null,Q0=null;function X0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var J0=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,$T=typeof Promise=="function"?Promise:void 0,$3=typeof queueMicrotask=="function"?queueMicrotask:typeof $T<"u"?function(t){return $T.resolve(null).then(t).catch(F3)}:J0;function F3(t){setTimeout(function(){throw t})}function bv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jc(e)}function _o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function FT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ql=Math.random().toString(36).slice(2),Wr="__reactFiber$"+ql,Uc="__reactProps$"+ql,Ri="__reactContainer$"+ql,Z0="__reactEvents$"+ql,V3="__reactListeners$"+ql,U3="__reactHandles$"+ql;function us(t){var e=t[Wr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ri]||n[Wr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=FT(t);t!==null;){if(n=t[Wr])return n;t=FT(t)}return e}t=n,n=t.parentNode}return null}function Xf(t){return t=t[Wr]||t[Ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function og(t){return t[Uc]||null}var e_=[],Ta=-1;function Uo(t){return{current:t}}function st(t){0>Ta||(t.current=e_[Ta],e_[Ta]=null,Ta--)}function et(t,e){Ta++,e_[Ta]=t.current,t.current=e}var No={},yn=Uo(No),jn=Uo(!1),Ps=No;function nl(t,e){var n=t.type.contextTypes;if(!n)return No;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ln(t){return t=t.childContextTypes,t!=null}function ip(){st(jn),st(yn)}function VT(t,e,n){if(yn.current!==No)throw Error(ee(168));et(yn,e),et(jn,n)}function xR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,TV(t)||"Unknown",i));return pt({},n,r)}function op(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||No,Ps=yn.current,et(yn,t),et(jn,jn.current),!0}function UT(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=xR(t,e,Ps),r.__reactInternalMemoizedMergedChildContext=t,st(jn),st(yn),et(yn,t)):st(jn),et(jn,n)}var hi=null,sg=!1,xv=!1;function ER(t){hi===null?hi=[t]:hi.push(t)}function B3(t){sg=!0,ER(t)}function Bo(){if(!xv&&hi!==null){xv=!0;var t=0,e=We;try{var n=hi;for(We=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hi=null,sg=!1}catch(i){throw hi!==null&&(hi=hi.slice(t+1)),KN(Ub,Bo),i}finally{We=e,xv=!1}}return null}var Aa=[],Ia=0,sp=null,ap=0,ir=[],or=0,Cs=null,mi=1,gi="";function ts(t,e){Aa[Ia++]=ap,Aa[Ia++]=sp,sp=t,ap=e}function SR(t,e,n){ir[or++]=mi,ir[or++]=gi,ir[or++]=Cs,Cs=t;var r=mi;t=gi;var i=32-Rr(r)-1;r&=~(1<<i),n+=1;var o=32-Rr(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,mi=1<<32-Rr(e)+i|n<<i|r,gi=o+t}else mi=1<<o|n<<i|r,gi=t}function Qb(t){t.return!==null&&(ts(t,1),SR(t,1,0))}function Xb(t){for(;t===sp;)sp=Aa[--Ia],Aa[Ia]=null,ap=Aa[--Ia],Aa[Ia]=null;for(;t===Cs;)Cs=ir[--or],ir[or]=null,gi=ir[--or],ir[or]=null,mi=ir[--or],ir[or]=null}var Qn=null,Kn=null,lt=!1,Ir=null;function TR(t,e){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function BT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Kn=_o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cs!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qn=t,Kn=null,!0):!1;default:return!1}}function t_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function n_(t){if(lt){var e=Kn;if(e){var n=e;if(!BT(t,e)){if(t_(t))throw Error(ee(418));e=_o(n.nextSibling);var r=Qn;e&&BT(t,e)?TR(r,n):(t.flags=t.flags&-4097|2,lt=!1,Qn=t)}}else{if(t_(t))throw Error(ee(418));t.flags=t.flags&-4097|2,lt=!1,Qn=t}}}function zT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function ed(t){if(t!==Qn)return!1;if(!lt)return zT(t),lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!X0(t.type,t.memoizedProps)),e&&(e=Kn)){if(t_(t))throw AR(),Error(ee(418));for(;e;)TR(t,e),e=_o(e.nextSibling)}if(zT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kn=_o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kn=null}}else Kn=Qn?_o(t.stateNode.nextSibling):null;return!0}function AR(){for(var t=Kn;t;)t=_o(t.nextSibling)}function rl(){Kn=Qn=null,lt=!1}function Jb(t){Ir===null?Ir=[t]:Ir.push(t)}var z3=Gi.ReactCurrentBatchConfig;function Mu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function td(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WT(t){var e=t._init;return e(t._payload)}function IR(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=Eo(_,w),_.index=0,_.sibling=null,_}function o(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,E,C){return w===null||w.tag!==6?(w=Cv(E,_.mode,C),w.return=_,w):(w=i(w,E),w.return=_,w)}function l(_,w,E,C){var T=E.type;return T===wa?f(_,w,E.props.children,C,E.key):w!==null&&(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===no&&WT(T)===w.type)?(C=i(w,E.props),C.ref=Mu(_,w,E),C.return=_,C):(C=Fd(E.type,E.key,E.props,null,_.mode,C),C.ref=Mu(_,w,E),C.return=_,C)}function u(_,w,E,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Ov(E,_.mode,C),w.return=_,w):(w=i(w,E.children||[]),w.return=_,w)}function f(_,w,E,C,T){return w===null||w.tag!==7?(w=bs(E,_.mode,C,T),w.return=_,w):(w=i(w,E),w.return=_,w)}function c(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Cv(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wh:return E=Fd(w.type,w.key,w.props,null,_.mode,E),E.ref=Mu(_,null,w),E.return=_,E;case _a:return w=Ov(w,_.mode,E),w.return=_,w;case no:var C=w._init;return c(_,C(w._payload),E)}if(ec(w)||Cu(w))return w=bs(w,_.mode,E,null),w.return=_,w;td(_,w)}return null}function d(_,w,E,C){var T=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:a(_,w,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wh:return E.key===T?l(_,w,E,C):null;case _a:return E.key===T?u(_,w,E,C):null;case no:return T=E._init,d(_,w,T(E._payload),C)}if(ec(E)||Cu(E))return T!==null?null:f(_,w,E,C,null);td(_,E)}return null}function p(_,w,E,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(E)||null,a(w,_,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wh:return _=_.get(C.key===null?E:C.key)||null,l(w,_,C,T);case _a:return _=_.get(C.key===null?E:C.key)||null,u(w,_,C,T);case no:var I=C._init;return p(_,w,E,I(C._payload),T)}if(ec(C)||Cu(C))return _=_.get(E)||null,f(w,_,C,T,null);td(w,C)}return null}function m(_,w,E,C){for(var T=null,I=null,b=w,S=w=0,P=null;b!==null&&S<E.length;S++){b.index>S?(P=b,b=null):P=b.sibling;var O=d(_,b,E[S],C);if(O===null){b===null&&(b=P);break}t&&b&&O.alternate===null&&e(_,b),w=o(O,w,S),I===null?T=O:I.sibling=O,I=O,b=P}if(S===E.length)return n(_,b),lt&&ts(_,S),T;if(b===null){for(;S<E.length;S++)b=c(_,E[S],C),b!==null&&(w=o(b,w,S),I===null?T=b:I.sibling=b,I=b);return lt&&ts(_,S),T}for(b=r(_,b);S<E.length;S++)P=p(b,_,S,E[S],C),P!==null&&(t&&P.alternate!==null&&b.delete(P.key===null?S:P.key),w=o(P,w,S),I===null?T=P:I.sibling=P,I=P);return t&&b.forEach(function(k){return e(_,k)}),lt&&ts(_,S),T}function g(_,w,E,C){var T=Cu(E);if(typeof T!="function")throw Error(ee(150));if(E=T.call(E),E==null)throw Error(ee(151));for(var I=T=null,b=w,S=w=0,P=null,O=E.next();b!==null&&!O.done;S++,O=E.next()){b.index>S?(P=b,b=null):P=b.sibling;var k=d(_,b,O.value,C);if(k===null){b===null&&(b=P);break}t&&b&&k.alternate===null&&e(_,b),w=o(k,w,S),I===null?T=k:I.sibling=k,I=k,b=P}if(O.done)return n(_,b),lt&&ts(_,S),T;if(b===null){for(;!O.done;S++,O=E.next())O=c(_,O.value,C),O!==null&&(w=o(O,w,S),I===null?T=O:I.sibling=O,I=O);return lt&&ts(_,S),T}for(b=r(_,b);!O.done;S++,O=E.next())O=p(b,_,S,O.value,C),O!==null&&(t&&O.alternate!==null&&b.delete(O.key===null?S:O.key),w=o(O,w,S),I===null?T=O:I.sibling=O,I=O);return t&&b.forEach(function(M){return e(_,M)}),lt&&ts(_,S),T}function v(_,w,E,C){if(typeof E=="object"&&E!==null&&E.type===wa&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Wh:e:{for(var T=E.key,I=w;I!==null;){if(I.key===T){if(T=E.type,T===wa){if(I.tag===7){n(_,I.sibling),w=i(I,E.props.children),w.return=_,_=w;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===no&&WT(T)===I.type){n(_,I.sibling),w=i(I,E.props),w.ref=Mu(_,I,E),w.return=_,_=w;break e}n(_,I);break}else e(_,I);I=I.sibling}E.type===wa?(w=bs(E.props.children,_.mode,C,E.key),w.return=_,_=w):(C=Fd(E.type,E.key,E.props,null,_.mode,C),C.ref=Mu(_,w,E),C.return=_,_=C)}return s(_);case _a:e:{for(I=E.key;w!==null;){if(w.key===I)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(_,w.sibling),w=i(w,E.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=Ov(E,_.mode,C),w.return=_,_=w}return s(_);case no:return I=E._init,v(_,w,I(E._payload),C)}if(ec(E))return m(_,w,E,C);if(Cu(E))return g(_,w,E,C);td(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(_,w.sibling),w=i(w,E),w.return=_,_=w):(n(_,w),w=Cv(E,_.mode,C),w.return=_,_=w),s(_)):n(_,w)}return v}var il=IR(!0),PR=IR(!1),lp=Uo(null),up=null,Pa=null,Zb=null;function ex(){Zb=Pa=up=null}function tx(t){var e=lp.current;st(lp),t._currentValue=e}function r_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ua(t,e){up=t,Zb=Pa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function dr(t){var e=t._currentValue;if(Zb!==t)if(t={context:t,memoizedValue:e,next:null},Pa===null){if(up===null)throw Error(ee(308));Pa=t,up.dependencies={lanes:0,firstContext:t}}else Pa=Pa.next=t;return e}var cs=null;function nx(t){cs===null?cs=[t]:cs.push(t)}function CR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,nx(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mi(t,r)}function Mi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ro=!1;function rx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ti(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mi(t,n)}return i=r.interleaved,i===null?(e.next=e,nx(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mi(t,n)}function Rd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bb(t,n)}}function GT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cp(t,e,n,r){var i=t.updateQueue;ro=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(o!==null){var c=i.baseState;s=0,f=u=l=null,a=o;do{var d=a.lane,p=a.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(d=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){c=m.call(p,c,d);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,d=typeof m=="function"?m.call(p,c,d):m,d==null)break e;c=pt({},c,d);break e;case 2:ro=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=p,l=c):f=f.next=p,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(f===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ks|=s,t.lanes=s,t.memoizedState=c}}function HT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var Jf={},qr=Uo(Jf),Bc=Uo(Jf),zc=Uo(Jf);function fs(t){if(t===Jf)throw Error(ee(174));return t}function ix(t,e){switch(et(zc,e),et(Bc,t),et(qr,Jf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=L0(e,t)}st(qr),et(qr,e)}function ol(){st(qr),st(Bc),st(zc)}function kR(t){fs(zc.current);var e=fs(qr.current),n=L0(e,t.type);e!==n&&(et(Bc,t),et(qr,n))}function ox(t){Bc.current===t&&(st(qr),st(Bc))}var ft=Uo(0);function fp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ev=[];function sx(){for(var t=0;t<Ev.length;t++)Ev[t]._workInProgressVersionPrimary=null;Ev.length=0}var Md=Gi.ReactCurrentDispatcher,Sv=Gi.ReactCurrentBatchConfig,Os=0,dt=null,Nt=null,Ut=null,hp=!1,dc=!1,Wc=0,W3=0;function ln(){throw Error(ee(321))}function ax(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$r(t[n],e[n]))return!1;return!0}function lx(t,e,n,r,i,o){if(Os=o,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Md.current=t===null||t.memoizedState===null?K3:Y3,t=n(r,i),dc){o=0;do{if(dc=!1,Wc=0,25<=o)throw Error(ee(301));o+=1,Ut=Nt=null,e.updateQueue=null,Md.current=Q3,t=n(r,i)}while(dc)}if(Md.current=dp,e=Nt!==null&&Nt.next!==null,Os=0,Ut=Nt=dt=null,hp=!1,e)throw Error(ee(300));return t}function ux(){var t=Wc!==0;return Wc=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?dt.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function pr(){if(Nt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Ut===null?dt.memoizedState:Ut.next;if(e!==null)Ut=e,Nt=t;else{if(t===null)throw Error(ee(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ut===null?dt.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function Gc(t,e){return typeof e=="function"?e(t):e}function Tv(t){var e=pr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Nt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var f=u.lane;if((Os&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,s=r):l=l.next=c,dt.lanes|=f,ks|=f}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,$r(r,e.memoizedState)||(Nn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,dt.lanes|=o,ks|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Av(t){var e=pr(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);$r(o,e.memoizedState)||(Nn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function NR(){}function RR(t,e){var n=dt,r=pr(),i=e(),o=!$r(r.memoizedState,i);if(o&&(r.memoizedState=i,Nn=!0),r=r.queue,cx(jR.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,Hc(9,DR.bind(null,n,r,i,e),void 0,null),Wt===null)throw Error(ee(349));Os&30||MR(n,e,i)}return i}function MR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function DR(t,e,n,r){e.value=n,e.getSnapshot=r,LR(e)&&$R(t)}function jR(t,e,n){return n(function(){LR(e)&&$R(t)})}function LR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$r(t,n)}catch{return!0}}function $R(t){var e=Mi(t,1);e!==null&&Mr(e,t,1,-1)}function qT(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:t},e.queue=t,t=t.dispatch=q3.bind(null,dt,t),[e.memoizedState,t]}function Hc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function FR(){return pr().memoizedState}function Dd(t,e,n,r){var i=Br();dt.flags|=t,i.memoizedState=Hc(1|e,n,void 0,r===void 0?null:r)}function ag(t,e,n,r){var i=pr();r=r===void 0?null:r;var o=void 0;if(Nt!==null){var s=Nt.memoizedState;if(o=s.destroy,r!==null&&ax(r,s.deps)){i.memoizedState=Hc(e,n,o,r);return}}dt.flags|=t,i.memoizedState=Hc(1|e,n,o,r)}function KT(t,e){return Dd(8390656,8,t,e)}function cx(t,e){return ag(2048,8,t,e)}function VR(t,e){return ag(4,2,t,e)}function UR(t,e){return ag(4,4,t,e)}function BR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zR(t,e,n){return n=n!=null?n.concat([t]):null,ag(4,4,BR.bind(null,e,t),n)}function fx(){}function WR(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ax(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function GR(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ax(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function HR(t,e,n){return Os&21?($r(n,e)||(n=XN(),dt.lanes|=n,ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function G3(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var r=Sv.transition;Sv.transition={};try{t(!1),e()}finally{We=n,Sv.transition=r}}function qR(){return pr().memoizedState}function H3(t,e,n){var r=xo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KR(t))YR(e,n);else if(n=CR(t,e,n,r),n!==null){var i=Tn();Mr(n,t,r,i),QR(n,e,r)}}function q3(t,e,n){var r=xo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KR(t))YR(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,$r(a,s)){var l=e.interleaved;l===null?(i.next=i,nx(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=CR(t,e,i,r),n!==null&&(i=Tn(),Mr(n,t,r,i),QR(n,e,r))}}function KR(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function YR(t,e){dc=hp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bb(t,n)}}var dp={readContext:dr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},K3={readContext:dr,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:dr,useEffect:KT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dd(4194308,4,BR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dd(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H3.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=Br();return t={current:t},e.memoizedState=t},useState:qT,useDebugValue:fx,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=qT(!1),e=t[0];return t=G3.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,i=Br();if(lt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Wt===null)throw Error(ee(349));Os&30||MR(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,KT(jR.bind(null,r,o,t),[t]),r.flags|=2048,Hc(9,DR.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Br(),e=Wt.identifierPrefix;if(lt){var n=gi,r=mi;n=(r&~(1<<32-Rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=W3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y3={readContext:dr,useCallback:WR,useContext:dr,useEffect:cx,useImperativeHandle:zR,useInsertionEffect:VR,useLayoutEffect:UR,useMemo:GR,useReducer:Tv,useRef:FR,useState:function(){return Tv(Gc)},useDebugValue:fx,useDeferredValue:function(t){var e=pr();return HR(e,Nt.memoizedState,t)},useTransition:function(){var t=Tv(Gc)[0],e=pr().memoizedState;return[t,e]},useMutableSource:NR,useSyncExternalStore:RR,useId:qR,unstable_isNewReconciler:!1},Q3={readContext:dr,useCallback:WR,useContext:dr,useEffect:cx,useImperativeHandle:zR,useInsertionEffect:VR,useLayoutEffect:UR,useMemo:GR,useReducer:Av,useRef:FR,useState:function(){return Av(Gc)},useDebugValue:fx,useDeferredValue:function(t){var e=pr();return Nt===null?e.memoizedState=t:HR(e,Nt.memoizedState,t)},useTransition:function(){var t=Av(Gc)[0],e=pr().memoizedState;return[t,e]},useMutableSource:NR,useSyncExternalStore:RR,useId:qR,unstable_isNewReconciler:!1};function Er(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function i_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lg={isMounted:function(t){return(t=t._reactInternals)?Ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tn(),i=xo(t),o=Ti(r,i);o.payload=e,n!=null&&(o.callback=n),e=wo(t,o,i),e!==null&&(Mr(e,t,i,r),Rd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tn(),i=xo(t),o=Ti(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=wo(t,o,i),e!==null&&(Mr(e,t,i,r),Rd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tn(),r=xo(t),i=Ti(n,r);i.tag=2,e!=null&&(i.callback=e),e=wo(t,i,r),e!==null&&(Mr(e,t,r,n),Rd(e,t,r))}};function YT(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!$c(n,r)||!$c(i,o):!0}function XR(t,e,n){var r=!1,i=No,o=e.contextType;return typeof o=="object"&&o!==null?o=dr(o):(i=Ln(e)?Ps:yn.current,r=e.contextTypes,o=(r=r!=null)?nl(t,i):No),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function QT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lg.enqueueReplaceState(e,e.state,null)}function o_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},rx(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=dr(o):(o=Ln(e)?Ps:yn.current,i.context=nl(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(i_(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lg.enqueueReplaceState(i,i.state,null),cp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function sl(t,e){try{var n="",r=e;do n+=SV(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Iv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function s_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var X3=typeof WeakMap=="function"?WeakMap:Map;function JR(t,e,n){n=Ti(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mp||(mp=!0,g_=r),s_(t,e)},n}function ZR(t,e,n){n=Ti(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){s_(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){s_(t,e),typeof r!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function XT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new X3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=fU.bind(null,t,e,n),e.then(t,t))}function JT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ZT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ti(-1,1),e.tag=2,wo(n,e,1))),n.lanes|=1),t)}var J3=Gi.ReactCurrentOwner,Nn=!1;function xn(t,e,n,r){e.child=t===null?PR(e,null,n,r):il(e,t.child,n,r)}function eA(t,e,n,r,i){n=n.render;var o=e.ref;return Ua(e,i),r=lx(t,e,n,r,o,i),n=ux(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(lt&&n&&Qb(e),e.flags|=1,xn(t,e,r,i),e.child)}function tA(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!_x(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,e2(t,e,o,r,i)):(t=Fd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:$c,n(s,r)&&t.ref===e.ref)return Di(t,e,i)}return e.flags|=1,t=Eo(o,r),t.ref=e.ref,t.return=e,e.child=t}function e2(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if($c(o,r)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,Di(t,e,i)}return a_(t,e,n,r,i)}function t2(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Oa,Gn),Gn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(Oa,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,et(Oa,Gn),Gn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,et(Oa,Gn),Gn|=r;return xn(t,e,i,n),e.child}function n2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function a_(t,e,n,r,i){var o=Ln(n)?Ps:yn.current;return o=nl(e,o),Ua(e,i),n=lx(t,e,n,r,o,i),r=ux(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(lt&&r&&Qb(e),e.flags|=1,xn(t,e,n,i),e.child)}function nA(t,e,n,r,i){if(Ln(n)){var o=!0;op(e)}else o=!1;if(Ua(e,i),e.stateNode===null)jd(t,e),XR(e,n,r),o_(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=dr(u):(u=Ln(n)?Ps:yn.current,u=nl(e,u));var f=n.getDerivedStateFromProps,c=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&QT(e,s,r,u),ro=!1;var d=e.memoizedState;s.state=d,cp(e,r,s,i),l=e.memoizedState,a!==r||d!==l||jn.current||ro?(typeof f=="function"&&(i_(e,n,f,r),l=e.memoizedState),(a=ro||YT(e,n,a,r,d,l,u))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,OR(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Er(e.type,a),s.props=u,c=e.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=dr(l):(l=Ln(n)?Ps:yn.current,l=nl(e,l));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==c||d!==l)&&QT(e,s,r,l),ro=!1,d=e.memoizedState,s.state=d,cp(e,r,s,i);var m=e.memoizedState;a!==c||d!==m||jn.current||ro?(typeof p=="function"&&(i_(e,n,p,r),m=e.memoizedState),(u=ro||YT(e,n,u,r,d,m,l)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return l_(t,e,n,r,o,i)}function l_(t,e,n,r,i,o){n2(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&UT(e,n,!1),Di(t,e,o);r=e.stateNode,J3.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=il(e,t.child,null,o),e.child=il(e,null,a,o)):xn(t,e,a,o),e.memoizedState=r.state,i&&UT(e,n,!0),e.child}function r2(t){var e=t.stateNode;e.pendingContext?VT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&VT(t,e.context,!1),ix(t,e.containerInfo)}function rA(t,e,n,r,i){return rl(),Jb(i),e.flags|=256,xn(t,e,n,r),e.child}var u_={dehydrated:null,treeContext:null,retryLane:0};function c_(t){return{baseLanes:t,cachePool:null,transitions:null}}function i2(t,e,n){var r=e.pendingProps,i=ft.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),et(ft,i&1),t===null)return n_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=fg(s,r,0,null),t=bs(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=c_(n),e.memoizedState=u_,t):hx(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Z3(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Eo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Eo(a,o):(o=bs(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?c_(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=u_,r}return o=t.child,t=o.sibling,r=Eo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hx(t,e){return e=fg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nd(t,e,n,r){return r!==null&&Jb(r),il(e,t.child,null,n),t=hx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z3(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Iv(Error(ee(422))),nd(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=fg({mode:"visible",children:r.children},i,0,null),o=bs(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&il(e,t.child,null,s),e.child.memoizedState=c_(s),e.memoizedState=u_,o);if(!(e.mode&1))return nd(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ee(419)),r=Iv(o,r,void 0),nd(t,e,s,r)}if(a=(s&t.childLanes)!==0,Nn||a){if(r=Wt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Mi(t,i),Mr(r,t,i,-1))}return vx(),r=Iv(Error(ee(421))),nd(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hU.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Kn=_o(i.nextSibling),Qn=e,lt=!0,Ir=null,t!==null&&(ir[or++]=mi,ir[or++]=gi,ir[or++]=Cs,mi=t.id,gi=t.overflow,Cs=e),e=hx(e,r.children),e.flags|=4096,e)}function iA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),r_(t.return,e,n)}function Pv(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function o2(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xn(t,e,r.children,n),r=ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iA(t,n,e);else if(t.tag===19)iA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(et(ft,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pv(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pv(e,!0,n,null,o);break;case"together":Pv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Eo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Eo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eU(t,e,n){switch(e.tag){case 3:r2(e),rl();break;case 5:kR(e);break;case 1:Ln(e.type)&&op(e);break;case 4:ix(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;et(lp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(et(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?i2(t,e,n):(et(ft,ft.current&1),t=Di(t,e,n),t!==null?t.sibling:null);et(ft,ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),et(ft,ft.current),r)break;return null;case 22:case 23:return e.lanes=0,t2(t,e,n)}return Di(t,e,n)}var s2,f_,a2,l2;s2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f_=function(){};a2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fs(qr.current);var o=null;switch(n){case"input":i=R0(t,i),r=R0(t,r),o=[];break;case"select":i=pt({},i,{value:void 0}),r=pt({},r,{value:void 0}),o=[];break;case"textarea":i=j0(t,i),r=j0(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rp)}$0(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(kc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(kc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&nt("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};l2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Du(t,e){if(!lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tU(t,e,n){var r=e.pendingProps;switch(Xb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Ln(e.type)&&ip(),un(e),null;case 3:return r=e.stateNode,ol(),st(jn),st(yn),sx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ed(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ir!==null&&(__(Ir),Ir=null))),f_(t,e),un(e),null;case 5:ox(e);var i=fs(zc.current);if(n=e.type,t!==null&&e.stateNode!=null)a2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return un(e),null}if(t=fs(qr.current),ed(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Wr]=e,r[Uc]=o,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(i=0;i<nc.length;i++)nt(nc[i],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":dT(r,o),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},nt("invalid",r);break;case"textarea":mT(r,o),nt("invalid",r)}$0(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Zh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Zh(r.textContent,a,t),i=["children",""+a]):kc.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&nt("scroll",r)}switch(n){case"input":Gh(r),pT(r,o,!0);break;case"textarea":Gh(r),gT(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=rp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Wr]=e,t[Uc]=r,s2(t,e,!1,!1),e.stateNode=t;e:{switch(s=F0(n,r),n){case"dialog":nt("cancel",t),nt("close",t),i=r;break;case"iframe":case"object":case"embed":nt("load",t),i=r;break;case"video":case"audio":for(i=0;i<nc.length;i++)nt(nc[i],t);i=r;break;case"source":nt("error",t),i=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),i=r;break;case"details":nt("toggle",t),i=r;break;case"input":dT(t,r),i=R0(t,r),nt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pt({},r,{value:void 0}),nt("invalid",t);break;case"textarea":mT(t,r),i=j0(t,r),nt("invalid",t);break;default:i=r}$0(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?FN(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&LN(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Nc(t,l):typeof l=="number"&&Nc(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kc.hasOwnProperty(o)?l!=null&&o==="onScroll"&&nt("scroll",t):l!=null&&jb(t,o,l,s))}switch(n){case"input":Gh(t),pT(t,r,!1);break;case"textarea":Gh(t),gT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ko(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?La(t,!!r.multiple,o,!1):r.defaultValue!=null&&La(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=rp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)l2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=fs(zc.current),fs(qr.current),ed(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wr]=e,(o=r.nodeValue!==n)&&(t=Qn,t!==null))switch(t.tag){case 3:Zh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zh(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wr]=e,e.stateNode=r}return un(e),null;case 13:if(st(ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(lt&&Kn!==null&&e.mode&1&&!(e.flags&128))AR(),rl(),e.flags|=98560,o=!1;else if(o=ed(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Wr]=e}else rl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),o=!1}else Ir!==null&&(__(Ir),Ir=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Mt===0&&(Mt=3):vx())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return ol(),f_(t,e),t===null&&Fc(e.stateNode.containerInfo),un(e),null;case 10:return tx(e.type._context),un(e),null;case 17:return Ln(e.type)&&ip(),un(e),null;case 19:if(st(ft),o=e.memoizedState,o===null)return un(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Du(o,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=fp(t),s!==null){for(e.flags|=128,Du(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(ft,ft.current&1|2),e.child}t=t.sibling}o.tail!==null&&bt()>al&&(e.flags|=128,r=!0,Du(o,!1),e.lanes=4194304)}else{if(!r)if(t=fp(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Du(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!lt)return un(e),null}else 2*bt()-o.renderingStartTime>al&&n!==1073741824&&(e.flags|=128,r=!0,Du(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=bt(),e.sibling=null,n=ft.current,et(ft,r?n&1|2:n&1),e):(un(e),null);case 22:case 23:return yx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gn&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function nU(t,e){switch(Xb(e),e.tag){case 1:return Ln(e.type)&&ip(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ol(),st(jn),st(yn),sx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ox(e),null;case 13:if(st(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));rl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return st(ft),null;case 4:return ol(),null;case 10:return tx(e.type._context),null;case 22:case 23:return yx(),null;case 24:return null;default:return null}}var rd=!1,dn=!1,rU=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vt(t,e,r)}else n.current=null}function h_(t,e,n){try{n()}catch(r){vt(t,e,r)}}var oA=!1;function iU(t,e){if(Y0=ep,t=dR(),Yb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,f=0,c=t,d=null;t:for(;;){for(var p;c!==n||i!==0&&c.nodeType!==3||(a=s+i),c!==o||r!==0&&c.nodeType!==3||(l=s+r),c.nodeType===3&&(s+=c.nodeValue.length),(p=c.firstChild)!==null;)d=c,c=p;for(;;){if(c===t)break t;if(d===n&&++u===i&&(a=s),d===o&&++f===r&&(l=s),(p=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Q0={focusedElem:t,selectionRange:n},ep=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?g:Er(e.type,g),v);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(C){vt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return m=oA,oA=!1,m}function pc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&h_(e,n,o)}i=i.next}while(i!==r)}}function ug(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function d_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u2(t){var e=t.alternate;e!==null&&(t.alternate=null,u2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wr],delete e[Uc],delete e[Z0],delete e[V3],delete e[U3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c2(t){return t.tag===5||t.tag===3||t.tag===4}function sA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function p_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rp));else if(r!==4&&(t=t.child,t!==null))for(p_(t,e,n),t=t.sibling;t!==null;)p_(t,e,n),t=t.sibling}function m_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(m_(t,e,n),t=t.sibling;t!==null;)m_(t,e,n),t=t.sibling}var Qt=null,Sr=!1;function eo(t,e,n){for(n=n.child;n!==null;)f2(t,e,n),n=n.sibling}function f2(t,e,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(tg,n)}catch{}switch(n.tag){case 5:dn||Ca(n,e);case 6:var r=Qt,i=Sr;Qt=null,eo(t,e,n),Qt=r,Sr=i,Qt!==null&&(Sr?(t=Qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(Sr?(t=Qt,n=n.stateNode,t.nodeType===8?bv(t.parentNode,n):t.nodeType===1&&bv(t,n),jc(t)):bv(Qt,n.stateNode));break;case 4:r=Qt,i=Sr,Qt=n.stateNode.containerInfo,Sr=!0,eo(t,e,n),Qt=r,Sr=i;break;case 0:case 11:case 14:case 15:if(!dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&h_(n,e,s),i=i.next}while(i!==r)}eo(t,e,n);break;case 1:if(!dn&&(Ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){vt(n,e,a)}eo(t,e,n);break;case 21:eo(t,e,n);break;case 22:n.mode&1?(dn=(r=dn)||n.memoizedState!==null,eo(t,e,n),dn=r):eo(t,e,n);break;default:eo(t,e,n)}}function aA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rU),e.forEach(function(r){var i=dU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Qt=a.stateNode,Sr=!1;break e;case 3:Qt=a.stateNode.containerInfo,Sr=!0;break e;case 4:Qt=a.stateNode.containerInfo,Sr=!0;break e}a=a.return}if(Qt===null)throw Error(ee(160));f2(o,s,i),Qt=null,Sr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){vt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h2(e,t),e=e.sibling}function h2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wr(e,t),Ur(t),r&4){try{pc(3,t,t.return),ug(3,t)}catch(g){vt(t,t.return,g)}try{pc(5,t,t.return)}catch(g){vt(t,t.return,g)}}break;case 1:wr(e,t),Ur(t),r&512&&n!==null&&Ca(n,n.return);break;case 5:if(wr(e,t),Ur(t),r&512&&n!==null&&Ca(n,n.return),t.flags&32){var i=t.stateNode;try{Nc(i,"")}catch(g){vt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&MN(i,o),F0(a,s);var u=F0(a,o);for(s=0;s<l.length;s+=2){var f=l[s],c=l[s+1];f==="style"?FN(i,c):f==="dangerouslySetInnerHTML"?LN(i,c):f==="children"?Nc(i,c):jb(i,f,c,u)}switch(a){case"input":M0(i,o);break;case"textarea":DN(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?La(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?La(i,!!o.multiple,o.defaultValue,!0):La(i,!!o.multiple,o.multiple?[]:"",!1))}i[Uc]=o}catch(g){vt(t,t.return,g)}}break;case 6:if(wr(e,t),Ur(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){vt(t,t.return,g)}}break;case 3:if(wr(e,t),Ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jc(e.containerInfo)}catch(g){vt(t,t.return,g)}break;case 4:wr(e,t),Ur(t);break;case 13:wr(e,t),Ur(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(mx=bt())),r&4&&aA(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dn=(u=dn)||f,wr(e,t),dn=u):wr(e,t),Ur(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(ce=t,f=t.child;f!==null;){for(c=ce=f;ce!==null;){switch(d=ce,p=d.child,d.tag){case 0:case 11:case 14:case 15:pc(4,d,d.return);break;case 1:Ca(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){vt(r,n,g)}}break;case 5:Ca(d,d.return);break;case 22:if(d.memoizedState!==null){uA(c);continue}}p!==null?(p.return=d,ce=p):uA(c)}f=f.sibling}e:for(f=null,c=t;;){if(c.tag===5){if(f===null){f=c;try{i=c.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=c.stateNode,l=c.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$N("display",s))}catch(g){vt(t,t.return,g)}}}else if(c.tag===6){if(f===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(g){vt(t,t.return,g)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:wr(e,t),Ur(t),r&4&&aA(t);break;case 21:break;default:wr(e,t),Ur(t)}}function Ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c2(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nc(i,""),r.flags&=-33);var o=sA(t);m_(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=sA(t);p_(t,a,s);break;default:throw Error(ee(161))}}catch(l){vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oU(t,e,n){ce=t,d2(t)}function d2(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var i=ce,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||rd;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||dn;a=rd;var u=dn;if(rd=s,(dn=l)&&!u)for(ce=i;ce!==null;)s=ce,l=s.child,s.tag===22&&s.memoizedState!==null?cA(i):l!==null?(l.return=s,ce=l):cA(i);for(;o!==null;)ce=o,d2(o),o=o.sibling;ce=i,rd=a,dn=u}lA(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ce=o):lA(t)}}function lA(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||ug(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Er(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&HT(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HT(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var c=f.dehydrated;c!==null&&jc(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}dn||e.flags&512&&d_(e)}catch(d){vt(e,e.return,d)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function uA(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function cA(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ug(4,e)}catch(l){vt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){vt(e,i,l)}}var o=e.return;try{d_(e)}catch(l){vt(e,o,l)}break;case 5:var s=e.return;try{d_(e)}catch(l){vt(e,s,l)}}}catch(l){vt(e,e.return,l)}if(e===t){ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ce=a;break}ce=e.return}}var sU=Math.ceil,pp=Gi.ReactCurrentDispatcher,dx=Gi.ReactCurrentOwner,ur=Gi.ReactCurrentBatchConfig,je=0,Wt=null,It=null,en=0,Gn=0,Oa=Uo(0),Mt=0,qc=null,ks=0,cg=0,px=0,mc=null,On=null,mx=0,al=1/0,fi=null,mp=!1,g_=null,bo=null,id=!1,ho=null,gp=0,gc=0,y_=null,Ld=-1,$d=0;function Tn(){return je&6?bt():Ld!==-1?Ld:Ld=bt()}function xo(t){return t.mode&1?je&2&&en!==0?en&-en:z3.transition!==null?($d===0&&($d=XN()),$d):(t=We,t!==0||(t=window.event,t=t===void 0?16:iR(t.type)),t):1}function Mr(t,e,n,r){if(50<gc)throw gc=0,y_=null,Error(ee(185));Yf(t,n,r),(!(je&2)||t!==Wt)&&(t===Wt&&(!(je&2)&&(cg|=n),Mt===4&&so(t,en)),$n(t,r),n===1&&je===0&&!(e.mode&1)&&(al=bt()+500,sg&&Bo()))}function $n(t,e){var n=t.callbackNode;zV(t,e);var r=Zd(t,t===Wt?en:0);if(r===0)n!==null&&_T(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_T(n),e===1)t.tag===0?B3(fA.bind(null,t)):ER(fA.bind(null,t)),$3(function(){!(je&6)&&Bo()}),n=null;else{switch(JN(r)){case 1:n=Ub;break;case 4:n=YN;break;case 16:n=Jd;break;case 536870912:n=QN;break;default:n=Jd}n=b2(n,p2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p2(t,e){if(Ld=-1,$d=0,je&6)throw Error(ee(327));var n=t.callbackNode;if(Ba()&&t.callbackNode!==n)return null;var r=Zd(t,t===Wt?en:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yp(t,r);else{e=r;var i=je;je|=2;var o=g2();(Wt!==t||en!==e)&&(fi=null,al=bt()+500,ws(t,e));do try{uU();break}catch(a){m2(t,a)}while(1);ex(),pp.current=o,je=i,It!==null?e=0:(Wt=null,en=0,e=Mt)}if(e!==0){if(e===2&&(i=W0(t),i!==0&&(r=i,e=v_(t,i))),e===1)throw n=qc,ws(t,0),so(t,r),$n(t,bt()),n;if(e===6)so(t,r);else{if(i=t.current.alternate,!(r&30)&&!aU(i)&&(e=yp(t,r),e===2&&(o=W0(t),o!==0&&(r=o,e=v_(t,o))),e===1))throw n=qc,ws(t,0),so(t,r),$n(t,bt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:ns(t,On,fi);break;case 3:if(so(t,r),(r&130023424)===r&&(e=mx+500-bt(),10<e)){if(Zd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=J0(ns.bind(null,t,On,fi),e);break}ns(t,On,fi);break;case 4:if(so(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Rr(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sU(r/1960))-r,10<r){t.timeoutHandle=J0(ns.bind(null,t,On,fi),r);break}ns(t,On,fi);break;case 5:ns(t,On,fi);break;default:throw Error(ee(329))}}}return $n(t,bt()),t.callbackNode===n?p2.bind(null,t):null}function v_(t,e){var n=mc;return t.current.memoizedState.isDehydrated&&(ws(t,e).flags|=256),t=yp(t,e),t!==2&&(e=On,On=n,e!==null&&__(e)),t}function __(t){On===null?On=t:On.push.apply(On,t)}function aU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!$r(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function so(t,e){for(e&=~px,e&=~cg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rr(e),r=1<<n;t[n]=-1,e&=~r}}function fA(t){if(je&6)throw Error(ee(327));Ba();var e=Zd(t,0);if(!(e&1))return $n(t,bt()),null;var n=yp(t,e);if(t.tag!==0&&n===2){var r=W0(t);r!==0&&(e=r,n=v_(t,r))}if(n===1)throw n=qc,ws(t,0),so(t,e),$n(t,bt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ns(t,On,fi),$n(t,bt()),null}function gx(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(al=bt()+500,sg&&Bo())}}function Ns(t){ho!==null&&ho.tag===0&&!(je&6)&&Ba();var e=je;je|=1;var n=ur.transition,r=We;try{if(ur.transition=null,We=1,t)return t()}finally{We=r,ur.transition=n,je=e,!(je&6)&&Bo()}}function yx(){Gn=Oa.current,st(Oa)}function ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,L3(n)),It!==null)for(n=It.return;n!==null;){var r=n;switch(Xb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ip();break;case 3:ol(),st(jn),st(yn),sx();break;case 5:ox(r);break;case 4:ol();break;case 13:st(ft);break;case 19:st(ft);break;case 10:tx(r.type._context);break;case 22:case 23:yx()}n=n.return}if(Wt=t,It=t=Eo(t.current,null),en=Gn=e,Mt=0,qc=null,px=cg=ks=0,On=mc=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}cs=null}return t}function m2(t,e){do{var n=It;try{if(ex(),Md.current=dp,hp){for(var r=dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hp=!1}if(Os=0,Ut=Nt=dt=null,dc=!1,Wc=0,dx.current=null,n===null||n.return===null){Mt=1,qc=e,It=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=en,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,c=f.tag;if(!(f.mode&1)&&(c===0||c===11||c===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=JT(s);if(p!==null){p.flags&=-257,ZT(p,s,a,o,e),p.mode&1&&XT(o,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){XT(o,u,e),vx();break e}l=Error(ee(426))}}else if(lt&&a.mode&1){var v=JT(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ZT(v,s,a,o,e),Jb(sl(l,a));break e}}o=l=sl(l,a),Mt!==4&&(Mt=2),mc===null?mc=[o]:mc.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=JR(o,l,e);GT(o,_);break e;case 1:a=l;var w=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(bo===null||!bo.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=ZR(o,a,e);GT(o,C);break e}}o=o.return}while(o!==null)}v2(n)}catch(T){e=T,It===n&&n!==null&&(It=n=n.return);continue}break}while(1)}function g2(){var t=pp.current;return pp.current=dp,t===null?dp:t}function vx(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Wt===null||!(ks&268435455)&&!(cg&268435455)||so(Wt,en)}function yp(t,e){var n=je;je|=2;var r=g2();(Wt!==t||en!==e)&&(fi=null,ws(t,e));do try{lU();break}catch(i){m2(t,i)}while(1);if(ex(),je=n,pp.current=r,It!==null)throw Error(ee(261));return Wt=null,en=0,Mt}function lU(){for(;It!==null;)y2(It)}function uU(){for(;It!==null&&!MV();)y2(It)}function y2(t){var e=w2(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?v2(t):It=e,dx.current=null}function v2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nU(n,e),n!==null){n.flags&=32767,It=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,It=null;return}}else if(n=tU(n,e,Gn),n!==null){It=n;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);Mt===0&&(Mt=5)}function ns(t,e,n){var r=We,i=ur.transition;try{ur.transition=null,We=1,cU(t,e,n,r)}finally{ur.transition=i,We=r}return null}function cU(t,e,n,r){do Ba();while(ho!==null);if(je&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(WV(t,o),t===Wt&&(It=Wt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||id||(id=!0,b2(Jd,function(){return Ba(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ur.transition,ur.transition=null;var s=We;We=1;var a=je;je|=4,dx.current=null,iU(t,n),h2(n,t),O3(Q0),ep=!!Y0,Q0=Y0=null,t.current=n,oU(n),DV(),je=a,We=s,ur.transition=o}else t.current=n;if(id&&(id=!1,ho=t,gp=i),o=t.pendingLanes,o===0&&(bo=null),$V(n.stateNode),$n(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mp)throw mp=!1,t=g_,g_=null,t;return gp&1&&t.tag!==0&&Ba(),o=t.pendingLanes,o&1?t===y_?gc++:(gc=0,y_=t):gc=0,Bo(),null}function Ba(){if(ho!==null){var t=JN(gp),e=ur.transition,n=We;try{if(ur.transition=null,We=16>t?16:t,ho===null)var r=!1;else{if(t=ho,ho=null,gp=0,je&6)throw Error(ee(331));var i=je;for(je|=4,ce=t.current;ce!==null;){var o=ce,s=o.child;if(ce.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ce=u;ce!==null;){var f=ce;switch(f.tag){case 0:case 11:case 15:pc(8,f,o)}var c=f.child;if(c!==null)c.return=f,ce=c;else for(;ce!==null;){f=ce;var d=f.sibling,p=f.return;if(u2(f),f===u){ce=null;break}if(d!==null){d.return=p,ce=d;break}ce=p}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ce=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ce=s;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:pc(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,ce=_;break e}ce=o.return}}var w=t.current;for(ce=w;ce!==null;){s=ce;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,ce=E;else e:for(s=w;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ug(9,a)}}catch(T){vt(a,a.return,T)}if(a===s){ce=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ce=C;break e}ce=a.return}}if(je=i,Bo(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(tg,t)}catch{}r=!0}return r}finally{We=n,ur.transition=e}}return!1}function hA(t,e,n){e=sl(n,e),e=JR(t,e,1),t=wo(t,e,1),e=Tn(),t!==null&&(Yf(t,1,e),$n(t,e))}function vt(t,e,n){if(t.tag===3)hA(t,t,n);else for(;e!==null;){if(e.tag===3){hA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bo===null||!bo.has(r))){t=sl(n,t),t=ZR(e,t,1),e=wo(e,t,1),t=Tn(),e!==null&&(Yf(e,1,t),$n(e,t));break}}e=e.return}}function fU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&(en&n)===n&&(Mt===4||Mt===3&&(en&130023424)===en&&500>bt()-mx?ws(t,0):px|=n),$n(t,e)}function _2(t,e){e===0&&(t.mode&1?(e=Kh,Kh<<=1,!(Kh&130023424)&&(Kh=4194304)):e=1);var n=Tn();t=Mi(t,e),t!==null&&(Yf(t,e,n),$n(t,n))}function hU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_2(t,n)}function dU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),_2(t,n)}var w2;w2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jn.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,eU(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,lt&&e.flags&1048576&&SR(e,ap,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jd(t,e),t=e.pendingProps;var i=nl(e,yn.current);Ua(e,n),i=lx(null,e,r,t,i,n);var o=ux();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ln(r)?(o=!0,op(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rx(e),i.updater=lg,e.stateNode=i,i._reactInternals=e,o_(e,r,t,n),e=l_(null,e,r,!0,o,n)):(e.tag=0,lt&&o&&Qb(e),xn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mU(r),t=Er(r,t),i){case 0:e=a_(null,e,r,t,n);break e;case 1:e=nA(null,e,r,t,n);break e;case 11:e=eA(null,e,r,t,n);break e;case 14:e=tA(null,e,r,Er(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),a_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),nA(t,e,r,i,n);case 3:e:{if(r2(e),t===null)throw Error(ee(387));r=e.pendingProps,o=e.memoizedState,i=o.element,OR(t,e),cp(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=sl(Error(ee(423)),e),e=rA(t,e,r,n,i);break e}else if(r!==i){i=sl(Error(ee(424)),e),e=rA(t,e,r,n,i);break e}else for(Kn=_o(e.stateNode.containerInfo.firstChild),Qn=e,lt=!0,Ir=null,n=PR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rl(),r===i){e=Di(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return kR(e),t===null&&n_(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,X0(r,i)?s=null:o!==null&&X0(r,o)&&(e.flags|=32),n2(t,e),xn(t,e,s,n),e.child;case 6:return t===null&&n_(e),null;case 13:return i2(t,e,n);case 4:return ix(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=il(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),eA(t,e,r,i,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,et(lp,r._currentValue),r._currentValue=s,o!==null)if($r(o.value,s)){if(o.children===i.children&&!jn.current){e=Di(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ti(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),r_(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ee(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),r_(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}xn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ua(e,n),i=dr(i),r=r(i),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,i=Er(r,e.pendingProps),i=Er(r.type,i),tA(t,e,r,i,n);case 15:return e2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Er(r,i),jd(t,e),e.tag=1,Ln(r)?(t=!0,op(e)):t=!1,Ua(e,n),XR(e,r,i),o_(e,r,i,n),l_(null,e,r,!0,t,n);case 19:return o2(t,e,n);case 22:return t2(t,e,n)}throw Error(ee(156,e.tag))};function b2(t,e){return KN(t,e)}function pU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,n,r){return new pU(t,e,n,r)}function _x(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mU(t){if(typeof t=="function")return _x(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$b)return 11;if(t===Fb)return 14}return 2}function Eo(t,e){var n=t.alternate;return n===null?(n=sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fd(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")_x(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case wa:return bs(n.children,i,o,e);case Lb:s=8,i|=8;break;case C0:return t=sr(12,n,e,i|2),t.elementType=C0,t.lanes=o,t;case O0:return t=sr(13,n,e,i),t.elementType=O0,t.lanes=o,t;case k0:return t=sr(19,n,e,i),t.elementType=k0,t.lanes=o,t;case kN:return fg(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case CN:s=10;break e;case ON:s=9;break e;case $b:s=11;break e;case Fb:s=14;break e;case no:s=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=sr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function bs(t,e,n,r){return t=sr(7,t,r,e),t.lanes=n,t}function fg(t,e,n,r){return t=sr(22,t,r,e),t.elementType=kN,t.lanes=n,t.stateNode={isHidden:!1},t}function Cv(t,e,n){return t=sr(6,t,null,e),t.lanes=n,t}function Ov(t,e,n){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cv(0),this.expirationTimes=cv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wx(t,e,n,r,i,o,s,a,l){return t=new gU(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=sr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rx(o),t}function yU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function x2(t){if(!t)return No;t=t._reactInternals;e:{if(Ks(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(Ln(n))return xR(t,n,e)}return e}function E2(t,e,n,r,i,o,s,a,l){return t=wx(n,r,!0,t,i,o,s,a,l),t.context=x2(null),n=t.current,r=Tn(),i=xo(n),o=Ti(r,i),o.callback=e??null,wo(n,o,i),t.current.lanes=i,Yf(t,i,r),$n(t,r),t}function hg(t,e,n,r){var i=e.current,o=Tn(),s=xo(i);return n=x2(n),e.context===null?e.context=n:e.pendingContext=n,e=Ti(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wo(i,e,s),t!==null&&(Mr(t,i,s,o),Rd(t,i,s)),s}function vp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bx(t,e){dA(t,e),(t=t.alternate)&&dA(t,e)}function vU(){return null}var S2=typeof reportError=="function"?reportError:function(t){console.error(t)};function xx(t){this._internalRoot=t}dg.prototype.render=xx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));hg(t,e,null,null)};dg.prototype.unmount=xx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){hg(null,t,null,null)}),e[Ri]=null}};function dg(t){this._internalRoot=t}dg.prototype.unstable_scheduleHydration=function(t){if(t){var e=tR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oo.length&&e!==0&&e<oo[n].priority;n++);oo.splice(n,0,t),n===0&&rR(t)}};function Ex(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pA(){}function _U(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=vp(s);o.call(u)}}var s=E2(e,r,t,0,null,!1,!1,"",pA);return t._reactRootContainer=s,t[Ri]=s.current,Fc(t.nodeType===8?t.parentNode:t),Ns(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=vp(l);a.call(u)}}var l=wx(t,0,!1,null,null,!1,!1,"",pA);return t._reactRootContainer=l,t[Ri]=l.current,Fc(t.nodeType===8?t.parentNode:t),Ns(function(){hg(e,l,n,r)}),l}function mg(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=vp(s);a.call(l)}}hg(e,s,t,i)}else s=_U(n,e,t,i,r);return vp(s)}ZN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tc(e.pendingLanes);n!==0&&(Bb(e,n|1),$n(e,bt()),!(je&6)&&(al=bt()+500,Bo()))}break;case 13:Ns(function(){var r=Mi(t,1);if(r!==null){var i=Tn();Mr(r,t,1,i)}}),bx(t,1)}};zb=function(t){if(t.tag===13){var e=Mi(t,134217728);if(e!==null){var n=Tn();Mr(e,t,134217728,n)}bx(t,134217728)}};eR=function(t){if(t.tag===13){var e=xo(t),n=Mi(t,e);if(n!==null){var r=Tn();Mr(n,t,e,r)}bx(t,e)}};tR=function(){return We};nR=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};U0=function(t,e,n){switch(e){case"input":if(M0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=og(r);if(!i)throw Error(ee(90));RN(r),M0(r,i)}}}break;case"textarea":DN(t,n);break;case"select":e=n.value,e!=null&&La(t,!!n.multiple,e,!1)}};BN=gx;zN=Ns;var wU={usingClientEntryPoint:!1,Events:[Xf,Sa,og,VN,UN,gx]},ju={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bU={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HN(t),t===null?null:t.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||vU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{tg=od.inject(bU),Hr=od}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wU;Zn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ex(e))throw Error(ee(200));return yU(t,e,null,n)};Zn.createRoot=function(t,e){if(!Ex(t))throw Error(ee(299));var n=!1,r="",i=S2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wx(t,1,!1,null,null,n,!1,r,i),t[Ri]=e.current,Fc(t.nodeType===8?t.parentNode:t),new xx(e)};Zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=HN(e),t=t===null?null:t.stateNode,t};Zn.flushSync=function(t){return Ns(t)};Zn.hydrate=function(t,e,n){if(!pg(e))throw Error(ee(200));return mg(null,t,e,!0,n)};Zn.hydrateRoot=function(t,e,n){if(!Ex(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=S2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=E2(e,null,t,1,n??null,i,!1,o,s),t[Ri]=e.current,Fc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dg(e)};Zn.render=function(t,e,n){if(!pg(e))throw Error(ee(200));return mg(null,t,e,!1,n)};Zn.unmountComponentAtNode=function(t){if(!pg(t))throw Error(ee(40));return t._reactRootContainer?(Ns(function(){mg(null,null,t,!1,function(){t._reactRootContainer=null,t[Ri]=null})}),!0):!1};Zn.unstable_batchedUpdates=gx;Zn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pg(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return mg(t,e,n,!1,r)};Zn.version="18.3.1-next-f1338f8080-20240426";function T2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T2)}catch(t){console.error(t)}}T2(),TN.exports=Zn;var xU=TN.exports,mA=xU;I0.createRoot=mA.createRoot,I0.hydrateRoot=mA.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(t,e){if(!t)throw Kl(e)},Kl=function(t){return new Error("Firebase Database ("+A2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},EU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Sx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=o>>2,c=(o&3)<<4|a>>4;let d=(a&15)<<2|u>>6,p=u&63;l||(p=64,s||(d=64)),r.push(n[f],n[c],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||c==null)throw new SU;const d=o<<2|a>>4;if(r.push(d),u!==64){const p=a<<4&240|u>>2;if(r.push(p),c!==64){const m=u<<6&192|c;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P2=function(t){const e=I2(t);return Sx.encodeByteArray(e,!0)},_p=function(t){return P2(t).replace(/\./g,"")},wp=function(t){try{return Sx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){return C2(void 0,t)}function C2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!AU(n)||(t[n]=C2(t[n],e[n]));return t}function AU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=()=>IU().__FIREBASE_DEFAULTS__,CU=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wp(t[1]);return e&&JSON.parse(e)},gg=()=>{try{return PU()||CU()||OU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},O2=t=>{var e,n;return(n=(e=gg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},k2=t=>{const e=O2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N2=()=>{var t;return(t=gg())===null||t===void 0?void 0:t.config},R2=t=>{var e;return(e=gg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[_p(JSON.stringify(n)),_p(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function kU(){var t;const e=(t=gg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function D2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MU(){const t=vn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function j2(){return A2.NODE_ADMIN===!0}function DU(){return!kU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jU(){try{return typeof indexedDB=="object"}catch{return!1}}function LU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="FirebaseError";class Hi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$U,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zf.prototype.create)}}class Zf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?FU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Hi(i,a,r)}}function FU(t,e){return t.replace(VU,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VU=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return JSON.parse(t)}function zt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=function(t){let e={},n={},r={},i="";try{const o=t.split(".");e=Kc(wp(o[0])||""),n=Kc(wp(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},UU=function(t){const e=L2(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},BU=function(t){const e=L2(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ll(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function bp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xp(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ep(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(gA(o)&&gA(s)){if(!Ep(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const d=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,f;for(let c=0;c<80;c++){c<40?c<20?(u=a^o&(s^a),f=1518500249):(u=o^s^a,f=1859775393):c<60?(u=o&s|a&(o|s),f=2400959708):(u=o^s^a,f=3395469782);const d=(i<<5|i>>>27)+u+l+f+r[c]&4294967295;l=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}function WU(t,e){const n=new GU(t,e);return n.subscribe.bind(n)}class GU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kv),i.error===void 0&&(i.error=kv),i.complete===void 0&&(i.complete=kv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kv(){}function ul(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,ne(r<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class Ro{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new di;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QU(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YU(t){return t===rs?void 0:t}function QU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const JU={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},ZU=Ne.INFO,eB={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},tB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=ZU,this._logHandler=tB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const nB=(t,e)=>e.some(n=>t instanceof n);let yA,vA;function rB(){return yA||(yA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iB(){return vA||(vA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $2=new WeakMap,w_=new WeakMap,F2=new WeakMap,Nv=new WeakMap,Ax=new WeakMap;function oB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(So(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&$2.set(n,t)}).catch(()=>{}),Ax.set(e,t),e}function sB(t){if(w_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});w_.set(t,e)}let b_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return w_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||F2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return So(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aB(t){b_=t(b_)}function lB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rv(this),e,...n);return F2.set(r,e.sort?e.sort():[e]),So(r)}:iB().includes(t)?function(...e){return t.apply(Rv(this),e),So($2.get(this))}:function(...e){return So(t.apply(Rv(this),e))}}function uB(t){return typeof t=="function"?lB(t):(t instanceof IDBTransaction&&sB(t),nB(t,rB())?new Proxy(t,b_):t)}function So(t){if(t instanceof IDBRequest)return oB(t);if(Nv.has(t))return Nv.get(t);const e=uB(t);return e!==t&&(Nv.set(t,e),Ax.set(e,t)),e}const Rv=t=>Ax.get(t);function cB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=So(s);return r&&s.addEventListener("upgradeneeded",l=>{r(So(s.result),l.oldVersion,l.newVersion,So(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const fB=["get","getKey","getAll","getAllKeys","count"],hB=["put","add","delete","clear"],Mv=new Map;function _A(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mv.get(e))return Mv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=hB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fB.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Mv.set(e,o),o}aB(t=>({...t,get:(e,n,r)=>_A(e,n)||t.get(e,n,r),has:(e,n)=>!!_A(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const x_="@firebase/app",wA="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new vg("@firebase/app"),mB="@firebase/app-compat",gB="@firebase/analytics-compat",yB="@firebase/analytics",vB="@firebase/app-check-compat",_B="@firebase/app-check",wB="@firebase/auth",bB="@firebase/auth-compat",xB="@firebase/database",EB="@firebase/data-connect",SB="@firebase/database-compat",TB="@firebase/functions",AB="@firebase/functions-compat",IB="@firebase/installations",PB="@firebase/installations-compat",CB="@firebase/messaging",OB="@firebase/messaging-compat",kB="@firebase/performance",NB="@firebase/performance-compat",RB="@firebase/remote-config",MB="@firebase/remote-config-compat",DB="@firebase/storage",jB="@firebase/storage-compat",LB="@firebase/firestore",$B="@firebase/vertexai-preview",FB="@firebase/firestore-compat",VB="firebase",UB="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="[DEFAULT]",BB={[x_]:"fire-core",[mB]:"fire-core-compat",[yB]:"fire-analytics",[gB]:"fire-analytics-compat",[_B]:"fire-app-check",[vB]:"fire-app-check-compat",[wB]:"fire-auth",[bB]:"fire-auth-compat",[xB]:"fire-rtdb",[EB]:"fire-data-connect",[SB]:"fire-rtdb-compat",[TB]:"fire-fn",[AB]:"fire-fn-compat",[IB]:"fire-iid",[PB]:"fire-iid-compat",[CB]:"fire-fcm",[OB]:"fire-fcm-compat",[kB]:"fire-perf",[NB]:"fire-perf-compat",[RB]:"fire-rc",[MB]:"fire-rc-compat",[DB]:"fire-gcs",[jB]:"fire-gcs-compat",[LB]:"fire-fst",[FB]:"fire-fst-compat",[$B]:"fire-vertex","fire-js":"fire-js",[VB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=new Map,zB=new Map,S_=new Map;function bA(t,e){try{t.container.addComponent(e)}catch(n){ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rs(t){const e=t.name;if(S_.has(e))return ji.debug(`There were multiple attempts to register component ${e}.`),!1;S_.set(e,t);for(const n of Sp.values())bA(n,t);for(const n of zB.values())bA(n,t);return!0}function _g(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},To=new Zf("app","Firebase",WB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=UB;function V2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:E_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw To.create("bad-app-name",{appName:String(i)});if(n||(n=N2()),!n)throw To.create("no-options");const o=Sp.get(i);if(o){if(Ep(n,o.options)&&Ep(r,o.config))return o;throw To.create("duplicate-app",{appName:i})}const s=new XU(i);for(const l of S_.values())s.addComponent(l);const a=new GB(n,r,s);return Sp.set(i,a),a}function Ix(t=E_){const e=Sp.get(t);if(!e&&t===E_&&N2())return V2();if(!e)throw To.create("no-app",{appName:t});return e}function Kr(t,e,n){var r;let i=(r=BB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ji.warn(a.join(" "));return}Rs(new Ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB="firebase-heartbeat-database",qB=1,Yc="firebase-heartbeat-store";let Dv=null;function U2(){return Dv||(Dv=cB(HB,qB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yc)}catch(n){console.warn(n)}}}}).catch(t=>{throw To.create("idb-open",{originalErrorMessage:t.message})})),Dv}async function KB(t){try{const n=(await U2()).transaction(Yc),r=await n.objectStore(Yc).get(B2(t));return await n.done,r}catch(e){if(e instanceof Hi)ji.warn(e.message);else{const n=To.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ji.warn(n.message)}}}async function xA(t,e){try{const r=(await U2()).transaction(Yc,"readwrite");await r.objectStore(Yc).put(e,B2(t)),await r.done}catch(n){if(n instanceof Hi)ji.warn(n.message);else{const r=To.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ji.warn(r.message)}}}function B2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=1024,QB=30*24*60*60*1e3;class XB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=QB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ji.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=EA(),{heartbeatsToSend:r,unsentEntries:i}=JB(this._heartbeatsCache.heartbeats),o=_p(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ji.warn(n),""}}}function EA(){return new Date().toISOString().substring(0,10)}function JB(t,e=YB){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),SA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),SA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jU()?LU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return xA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return xA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function SA(t){return _p(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(t){Rs(new Ro("platform-logger",e=>new dB(e),"PRIVATE")),Rs(new Ro("heartbeat",e=>new XB(e),"PRIVATE")),Kr(x_,wA,t),Kr(x_,wA,"esm2017"),Kr("fire-js","")}e6("");var t6="firebase",n6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(t6,n6,"app");var TA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,z2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function P(){}P.prototype=S.prototype,b.D=S.prototype,b.prototype=new P,b.prototype.constructor=b,b.C=function(O,k,M){for(var N=Array(arguments.length-2),V=2;V<arguments.length;V++)N[V-2]=arguments[V];return S.prototype[k].apply(O,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,S,P){P||(P=0);var O=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)O[k]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(k=0;16>k;++k)O[k]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=b.g[0],P=b.g[1],k=b.g[2];var M=b.g[3],N=S+(M^P&(k^M))+O[0]+3614090360&4294967295;S=P+(N<<7&4294967295|N>>>25),N=M+(k^S&(P^k))+O[1]+3905402710&4294967295,M=S+(N<<12&4294967295|N>>>20),N=k+(P^M&(S^P))+O[2]+606105819&4294967295,k=M+(N<<17&4294967295|N>>>15),N=P+(S^k&(M^S))+O[3]+3250441966&4294967295,P=k+(N<<22&4294967295|N>>>10),N=S+(M^P&(k^M))+O[4]+4118548399&4294967295,S=P+(N<<7&4294967295|N>>>25),N=M+(k^S&(P^k))+O[5]+1200080426&4294967295,M=S+(N<<12&4294967295|N>>>20),N=k+(P^M&(S^P))+O[6]+2821735955&4294967295,k=M+(N<<17&4294967295|N>>>15),N=P+(S^k&(M^S))+O[7]+4249261313&4294967295,P=k+(N<<22&4294967295|N>>>10),N=S+(M^P&(k^M))+O[8]+1770035416&4294967295,S=P+(N<<7&4294967295|N>>>25),N=M+(k^S&(P^k))+O[9]+2336552879&4294967295,M=S+(N<<12&4294967295|N>>>20),N=k+(P^M&(S^P))+O[10]+4294925233&4294967295,k=M+(N<<17&4294967295|N>>>15),N=P+(S^k&(M^S))+O[11]+2304563134&4294967295,P=k+(N<<22&4294967295|N>>>10),N=S+(M^P&(k^M))+O[12]+1804603682&4294967295,S=P+(N<<7&4294967295|N>>>25),N=M+(k^S&(P^k))+O[13]+4254626195&4294967295,M=S+(N<<12&4294967295|N>>>20),N=k+(P^M&(S^P))+O[14]+2792965006&4294967295,k=M+(N<<17&4294967295|N>>>15),N=P+(S^k&(M^S))+O[15]+1236535329&4294967295,P=k+(N<<22&4294967295|N>>>10),N=S+(k^M&(P^k))+O[1]+4129170786&4294967295,S=P+(N<<5&4294967295|N>>>27),N=M+(P^k&(S^P))+O[6]+3225465664&4294967295,M=S+(N<<9&4294967295|N>>>23),N=k+(S^P&(M^S))+O[11]+643717713&4294967295,k=M+(N<<14&4294967295|N>>>18),N=P+(M^S&(k^M))+O[0]+3921069994&4294967295,P=k+(N<<20&4294967295|N>>>12),N=S+(k^M&(P^k))+O[5]+3593408605&4294967295,S=P+(N<<5&4294967295|N>>>27),N=M+(P^k&(S^P))+O[10]+38016083&4294967295,M=S+(N<<9&4294967295|N>>>23),N=k+(S^P&(M^S))+O[15]+3634488961&4294967295,k=M+(N<<14&4294967295|N>>>18),N=P+(M^S&(k^M))+O[4]+3889429448&4294967295,P=k+(N<<20&4294967295|N>>>12),N=S+(k^M&(P^k))+O[9]+568446438&4294967295,S=P+(N<<5&4294967295|N>>>27),N=M+(P^k&(S^P))+O[14]+3275163606&4294967295,M=S+(N<<9&4294967295|N>>>23),N=k+(S^P&(M^S))+O[3]+4107603335&4294967295,k=M+(N<<14&4294967295|N>>>18),N=P+(M^S&(k^M))+O[8]+1163531501&4294967295,P=k+(N<<20&4294967295|N>>>12),N=S+(k^M&(P^k))+O[13]+2850285829&4294967295,S=P+(N<<5&4294967295|N>>>27),N=M+(P^k&(S^P))+O[2]+4243563512&4294967295,M=S+(N<<9&4294967295|N>>>23),N=k+(S^P&(M^S))+O[7]+1735328473&4294967295,k=M+(N<<14&4294967295|N>>>18),N=P+(M^S&(k^M))+O[12]+2368359562&4294967295,P=k+(N<<20&4294967295|N>>>12),N=S+(P^k^M)+O[5]+4294588738&4294967295,S=P+(N<<4&4294967295|N>>>28),N=M+(S^P^k)+O[8]+2272392833&4294967295,M=S+(N<<11&4294967295|N>>>21),N=k+(M^S^P)+O[11]+1839030562&4294967295,k=M+(N<<16&4294967295|N>>>16),N=P+(k^M^S)+O[14]+4259657740&4294967295,P=k+(N<<23&4294967295|N>>>9),N=S+(P^k^M)+O[1]+2763975236&4294967295,S=P+(N<<4&4294967295|N>>>28),N=M+(S^P^k)+O[4]+1272893353&4294967295,M=S+(N<<11&4294967295|N>>>21),N=k+(M^S^P)+O[7]+4139469664&4294967295,k=M+(N<<16&4294967295|N>>>16),N=P+(k^M^S)+O[10]+3200236656&4294967295,P=k+(N<<23&4294967295|N>>>9),N=S+(P^k^M)+O[13]+681279174&4294967295,S=P+(N<<4&4294967295|N>>>28),N=M+(S^P^k)+O[0]+3936430074&4294967295,M=S+(N<<11&4294967295|N>>>21),N=k+(M^S^P)+O[3]+3572445317&4294967295,k=M+(N<<16&4294967295|N>>>16),N=P+(k^M^S)+O[6]+76029189&4294967295,P=k+(N<<23&4294967295|N>>>9),N=S+(P^k^M)+O[9]+3654602809&4294967295,S=P+(N<<4&4294967295|N>>>28),N=M+(S^P^k)+O[12]+3873151461&4294967295,M=S+(N<<11&4294967295|N>>>21),N=k+(M^S^P)+O[15]+530742520&4294967295,k=M+(N<<16&4294967295|N>>>16),N=P+(k^M^S)+O[2]+3299628645&4294967295,P=k+(N<<23&4294967295|N>>>9),N=S+(k^(P|~M))+O[0]+4096336452&4294967295,S=P+(N<<6&4294967295|N>>>26),N=M+(P^(S|~k))+O[7]+1126891415&4294967295,M=S+(N<<10&4294967295|N>>>22),N=k+(S^(M|~P))+O[14]+2878612391&4294967295,k=M+(N<<15&4294967295|N>>>17),N=P+(M^(k|~S))+O[5]+4237533241&4294967295,P=k+(N<<21&4294967295|N>>>11),N=S+(k^(P|~M))+O[12]+1700485571&4294967295,S=P+(N<<6&4294967295|N>>>26),N=M+(P^(S|~k))+O[3]+2399980690&4294967295,M=S+(N<<10&4294967295|N>>>22),N=k+(S^(M|~P))+O[10]+4293915773&4294967295,k=M+(N<<15&4294967295|N>>>17),N=P+(M^(k|~S))+O[1]+2240044497&4294967295,P=k+(N<<21&4294967295|N>>>11),N=S+(k^(P|~M))+O[8]+1873313359&4294967295,S=P+(N<<6&4294967295|N>>>26),N=M+(P^(S|~k))+O[15]+4264355552&4294967295,M=S+(N<<10&4294967295|N>>>22),N=k+(S^(M|~P))+O[6]+2734768916&4294967295,k=M+(N<<15&4294967295|N>>>17),N=P+(M^(k|~S))+O[13]+1309151649&4294967295,P=k+(N<<21&4294967295|N>>>11),N=S+(k^(P|~M))+O[4]+4149444226&4294967295,S=P+(N<<6&4294967295|N>>>26),N=M+(P^(S|~k))+O[11]+3174756917&4294967295,M=S+(N<<10&4294967295|N>>>22),N=k+(S^(M|~P))+O[2]+718787259&4294967295,k=M+(N<<15&4294967295|N>>>17),N=P+(M^(k|~S))+O[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+M&4294967295}r.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var P=S-this.blockSize,O=this.B,k=this.h,M=0;M<S;){if(k==0)for(;M<=P;)i(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<S;)if(O[k++]=b.charCodeAt(M++),k==this.blockSize){i(this,O),k=0;break}}else for(;M<S;)if(O[k++]=b[M++],k==this.blockSize){i(this,O),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var P=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=P&255,P/=256;for(this.u(b),b=Array(16),S=P=0;4>S;++S)for(var O=0;32>O;O+=8)b[P++]=this.g[S]>>>O&255;return b};function o(b,S){var P=a;return Object.prototype.hasOwnProperty.call(P,b)?P[b]:P[b]=S(b)}function s(b,S){this.h=S;for(var P=[],O=!0,k=b.length-1;0<=k;k--){var M=b[k]|0;O&&M==S||(P[k]=M,O=!1)}this.g=P}var a={};function l(b){return-128<=b&&128>b?o(b,function(S){return new s([S|0],0>S?-1:0)}):new s([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return c;if(0>b)return v(u(-b));for(var S=[],P=1,O=0;b>=P;O++)S[O]=b/P|0,P*=4294967296;return new s(S,0)}function f(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return v(f(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(S,8)),O=c,k=0;k<b.length;k+=8){var M=Math.min(8,b.length-k),N=parseInt(b.substring(k,k+M),S);8>M?(M=u(Math.pow(S,M)),O=O.j(M).add(u(N))):(O=O.j(P),O=O.add(u(N)))}return O}var c=l(0),d=l(1),p=l(16777216);t=s.prototype,t.m=function(){if(g(this))return-v(this).m();for(var b=0,S=1,P=0;P<this.g.length;P++){var O=this.i(P);b+=(0<=O?O:4294967296+O)*S,S*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(m(this))return"0";if(g(this))return"-"+v(this).toString(b);for(var S=u(Math.pow(b,6)),P=this,O="";;){var k=C(P,S).g;P=_(P,k.j(S));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(b);if(P=k,m(P))return M+O;for(;6>M.length;)M="0"+M;O=M+O}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function m(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function g(b){return b.h==-1}t.l=function(b){return b=_(this,b),g(b)?-1:m(b)?0:1};function v(b){for(var S=b.g.length,P=[],O=0;O<S;O++)P[O]=~b.g[O];return new s(P,~b.h).add(d)}t.abs=function(){return g(this)?v(this):this},t.add=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0,k=0;k<=S;k++){var M=O+(this.i(k)&65535)+(b.i(k)&65535),N=(M>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);O=N>>>16,M&=65535,N&=65535,P[k]=N<<16|M}return new s(P,P[P.length-1]&-2147483648?-1:0)};function _(b,S){return b.add(v(S))}t.j=function(b){if(m(this)||m(b))return c;if(g(this))return g(b)?v(this).j(v(b)):v(v(this).j(b));if(g(b))return v(this.j(v(b)));if(0>this.l(p)&&0>b.l(p))return u(this.m()*b.m());for(var S=this.g.length+b.g.length,P=[],O=0;O<2*S;O++)P[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<b.g.length;k++){var M=this.i(O)>>>16,N=this.i(O)&65535,V=b.i(k)>>>16,z=b.i(k)&65535;P[2*O+2*k]+=N*z,w(P,2*O+2*k),P[2*O+2*k+1]+=M*z,w(P,2*O+2*k+1),P[2*O+2*k+1]+=N*V,w(P,2*O+2*k+1),P[2*O+2*k+2]+=M*V,w(P,2*O+2*k+2)}for(O=0;O<S;O++)P[O]=P[2*O+1]<<16|P[2*O];for(O=S;O<2*S;O++)P[O]=0;return new s(P,0)};function w(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function E(b,S){this.g=b,this.h=S}function C(b,S){if(m(S))throw Error("division by zero");if(m(b))return new E(c,c);if(g(b))return S=C(v(b),S),new E(v(S.g),v(S.h));if(g(S))return S=C(b,v(S)),new E(v(S.g),S.h);if(30<b.g.length){if(g(b)||g(S))throw Error("slowDivide_ only works with positive integers.");for(var P=d,O=S;0>=O.l(b);)P=T(P),O=T(O);var k=I(P,1),M=I(O,1);for(O=I(O,2),P=I(P,2);!m(O);){var N=M.add(O);0>=N.l(b)&&(k=k.add(P),M=N),O=I(O,1),P=I(P,1)}return S=_(b,k.j(S)),new E(k,S)}for(k=c;0<=b.l(S);){for(P=Math.max(1,Math.floor(b.m()/S.m())),O=Math.ceil(Math.log(P)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),M=u(P),N=M.j(S);g(N)||0<N.l(b);)P-=O,M=u(P),N=M.j(S);m(M)&&(M=d),k=k.add(M),b=_(b,N)}return new E(k,b)}t.A=function(b){return C(this,b).h},t.and=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0;O<S;O++)P[O]=this.i(O)&b.i(O);return new s(P,this.h&b.h)},t.or=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0;O<S;O++)P[O]=this.i(O)|b.i(O);return new s(P,this.h|b.h)},t.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),P=[],O=0;O<S;O++)P[O]=this.i(O)^b.i(O);return new s(P,this.h^b.h)};function T(b){for(var S=b.g.length+1,P=[],O=0;O<S;O++)P[O]=b.i(O)<<1|b.i(O-1)>>>31;return new s(P,b.h)}function I(b,S){var P=S>>5;S%=32;for(var O=b.g.length-P,k=[],M=0;M<O;M++)k[M]=0<S?b.i(M+P)>>>S|b.i(M+P+1)<<32-S:b.i(M+P);return new s(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,z2=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,xs=s}).apply(typeof TA<"u"?TA:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W2,rc,G2,Vd,T_,H2,q2,K2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,A){return h==Array.prototype||h==Object.prototype||(h[y]=A.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var y=0;y<h.length;++y){var A=h[y];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function i(h,y){if(y)e:{var A=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var L=h[R];if(!(L in A))break e;A=A[L]}h=h[h.length-1],R=A[h],y=y(R),y!=R&&y!=null&&e(A,h,{configurable:!0,writable:!0,value:y})}}function o(h,y){h instanceof String&&(h+="");var A=0,R=!1,L={next:function(){if(!R&&A<h.length){var B=A++;return{value:y(B,h[B]),done:!1}}return R=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(h){return h||function(){return o(this,function(y,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function u(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function f(h,y,A){return h.call.apply(h.bind,arguments)}function c(h,y,A){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,R),h.apply(y,L)}}return function(){return h.apply(y,arguments)}}function d(h,y,A){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:c,d.apply(null,arguments)}function p(h,y){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function m(h,y){function A(){}A.prototype=y.prototype,h.aa=y.prototype,h.prototype=new A,h.prototype.constructor=h,h.Qb=function(R,L,B){for(var ie=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)ie[Ye-2]=arguments[Ye];return y.prototype[L].apply(R,ie)}}function g(h){const y=h.length;if(0<y){const A=Array(y);for(let R=0;R<y;R++)A[R]=h[R];return A}return[]}function v(h,y){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(l(R)){const L=h.length||0,B=R.length||0;h.length=L+B;for(let ie=0;ie<B;ie++)h[L+ie]=R[ie]}else h.push(R)}}class _{constructor(y,A){this.i=y,this.j=A,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function w(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function C(h){return C[" "](h),h}C[" "]=function(){};var T=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function I(h,y,A){for(const R in h)y.call(A,h[R],R,h)}function b(h,y){for(const A in h)y.call(void 0,h[A],A,h)}function S(h){const y={};for(const A in h)y[A]=h[A];return y}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let A,R;for(let L=1;L<arguments.length;L++){R=arguments[L];for(A in R)h[A]=R[A];for(let B=0;B<P.length;B++)A=P[B],Object.prototype.hasOwnProperty.call(R,A)&&(h[A]=R[A])}}function k(h){var y=1;h=h.split(":");const A=[];for(;0<y&&h.length;)A.push(h.shift()),y--;return h.length&&A.push(h.join(":")),A}function M(h){a.setTimeout(()=>{throw h},0)}function N(){var h=W;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class V{constructor(){this.h=this.g=null}add(y,A){const R=z.get();R.set(y,A),this.h?this.h.next=R:this.g=R,this.h=R}}var z=new _(()=>new q,h=>h.reset());class q{constructor(){this.next=this.g=this.h=null}set(y,A){this.h=y,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let K,F=!1,W=new V,Q=()=>{const h=a.Promise.resolve(void 0);K=()=>{h.then(re)}};var re=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(A){M(A)}var y=z;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}F=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const A=()=>{};a.addEventListener("test",A,y),a.removeEventListener("test",A,y)}catch{}return h}();function de(h,y){if(X.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var A=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(T){e:{try{C(y.nodeName);var L=!0;break e}catch{}L=!1}L||(y=null)}}else A=="mouseover"?y=h.fromElement:A=="mouseout"&&(y=h.toElement);this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:me[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&de.aa.h.call(this)}}m(de,X);var me={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),ae=0;function Y(h,y,A,R,L){this.listener=h,this.proxy=null,this.src=y,this.type=A,this.capture=!!R,this.ha=L,this.key=++ae,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,y,A,R,L){var B=h.toString();h=this.g[B],h||(h=this.g[B]=[],this.h++);var ie=_e(h,y,R,L);return-1<ie?(y=h[ie],A||(y.fa=!1)):(y=new Y(y,this.src,B,!!R,L),y.fa=A,h.push(y)),y};function G(h,y){var A=y.type;if(A in h.g){var R=h.g[A],L=Array.prototype.indexOf.call(R,y,void 0),B;(B=0<=L)&&Array.prototype.splice.call(R,L,1),B&&(te(y),h.g[A].length==0&&(delete h.g[A],h.h--))}}function _e(h,y,A,R){for(var L=0;L<h.length;++L){var B=h[L];if(!B.da&&B.listener==y&&B.capture==!!A&&B.ha==R)return L}return-1}var $="closure_lm_"+(1e6*Math.random()|0),se={};function Ie(h,y,A,R,L){if(R&&R.once)return vr(h,y,A,R,L);if(Array.isArray(y)){for(var B=0;B<y.length;B++)Ie(h,y[B],A,R,L);return null}return A=By(A),h&&h[xe]?h.K(y,A,u(R)?!!R.capture:!!R,L):$e(h,y,A,!1,R,L)}function $e(h,y,A,R,L,B){if(!y)throw Error("Invalid event type");var ie=u(L)?!!L.capture:!!L,Ye=ia(h);if(Ye||(h[$]=Ye=new le(h)),A=Ye.add(y,A,R,ie,B),A.proxy)return A;if(R=Ht(),A.proxy=R,R.src=h,R.listener=A,h.addEventListener)ue||(L=ie),L===void 0&&(L=!1),h.addEventListener(y.toString(),R,L);else if(h.attachEvent)h.attachEvent(Vr(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Ht(){function h(A){return y.call(h.src,h.listener,A)}const y=mu;return h}function vr(h,y,A,R,L){if(Array.isArray(y)){for(var B=0;B<y.length;B++)vr(h,y[B],A,R,L);return null}return A=By(A),h&&h[xe]?h.L(y,A,u(R)?!!R.capture:!!R,L):$e(h,y,A,!0,R,L)}function si(h,y,A,R,L){if(Array.isArray(y))for(var B=0;B<y.length;B++)si(h,y[B],A,R,L);else R=u(R)?!!R.capture:!!R,A=By(A),h&&h[xe]?(h=h.i,y=String(y).toString(),y in h.g&&(B=h.g[y],A=_e(B,A,R,L),-1<A&&(te(B[A]),Array.prototype.splice.call(B,A,1),B.length==0&&(delete h.g[y],h.h--)))):h&&(h=ia(h))&&(y=h.g[y.toString()],h=-1,y&&(h=_e(y,A,R,L)),(A=-1<h?y[h]:null)&&Pn(A))}function Pn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[xe])G(y.i,h);else{var A=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(A,R,h.capture):y.detachEvent?y.detachEvent(Vr(A),R):y.addListener&&y.removeListener&&y.removeListener(R),(A=ia(y))?(G(A,h),A.h==0&&(A.src=null,y[$]=null)):te(h)}}}function Vr(h){return h in se?se[h]:se[h]="on"+h}function mu(h,y){if(h.da)h=!0;else{y=new de(y,this);var A=h.listener,R=h.ha||h.src;h.fa&&Pn(h),h=A.call(R,y)}return h}function ia(h){return h=h[$],h instanceof le?h:null}var oa="__closure_events_fn_"+(1e9*Math.random()>>>0);function By(h){return typeof h=="function"?h:(h[oa]||(h[oa]=function(y){return h.handleEvent(y)}),h[oa])}function on(){U.call(this),this.i=new le(this),this.M=this,this.F=null}m(on,U),on.prototype[xe]=!0,on.prototype.removeEventListener=function(h,y,A,R){si(this,h,y,A,R)};function wn(h,y){var A,R=h.F;if(R)for(A=[];R;R=R.F)A.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new X(y,h);else if(y instanceof X)y.target=y.target||h;else{var L=y;y=new X(R,h),O(y,L)}if(L=!0,A)for(var B=A.length-1;0<=B;B--){var ie=y.g=A[B];L=Ah(ie,R,!0,y)&&L}if(ie=y.g=h,L=Ah(ie,R,!0,y)&&L,L=Ah(ie,R,!1,y)&&L,A)for(B=0;B<A.length;B++)ie=y.g=A[B],L=Ah(ie,R,!1,y)&&L}on.prototype.N=function(){if(on.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var A=h.g[y],R=0;R<A.length;R++)te(A[R]);delete h.g[y],h.h--}}this.F=null},on.prototype.K=function(h,y,A,R){return this.i.add(String(h),y,!1,A,R)},on.prototype.L=function(h,y,A,R){return this.i.add(String(h),y,!0,A,R)};function Ah(h,y,A,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var L=!0,B=0;B<y.length;++B){var ie=y[B];if(ie&&!ie.da&&ie.capture==A){var Ye=ie.listener,qt=ie.ha||ie.src;ie.fa&&G(h.i,ie),L=Ye.call(qt,R)!==!1&&L}}return L&&!R.defaultPrevented}function hS(h,y,A){if(typeof h=="function")A&&(h=d(h,A));else if(h&&typeof h.handleEvent=="function")h=d(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(h,y||0)}function dS(h){h.g=hS(()=>{h.g=null,h.i&&(h.i=!1,dS(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class T4 extends U{constructor(y,A){super(),this.m=y,this.l=A,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:dS(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gu(h){U.call(this),this.h=h,this.g={}}m(gu,U);var pS=[];function mS(h){I(h.g,function(y,A){this.g.hasOwnProperty(A)&&Pn(y)},h),h.g={}}gu.prototype.N=function(){gu.aa.N.call(this),mS(this)},gu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zy=a.JSON.stringify,A4=a.JSON.parse,I4=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Wy(){}Wy.prototype.h=null;function gS(h){return h.h||(h.h=h.i())}function yS(){}var yu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gy(){X.call(this,"d")}m(Gy,X);function Hy(){X.call(this,"c")}m(Hy,X);var Yo={},vS=null;function Ih(){return vS=vS||new on}Yo.La="serverreachability";function _S(h){X.call(this,Yo.La,h)}m(_S,X);function vu(h){const y=Ih();wn(y,new _S(y))}Yo.STAT_EVENT="statevent";function wS(h,y){X.call(this,Yo.STAT_EVENT,h),this.stat=y}m(wS,X);function bn(h){const y=Ih();wn(y,new wS(y,h))}Yo.Ma="timingevent";function bS(h,y){X.call(this,Yo.Ma,h),this.size=y}m(bS,X);function _u(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function wu(){this.g=!0}wu.prototype.xa=function(){this.g=!1};function P4(h,y,A,R,L,B){h.info(function(){if(h.g)if(B)for(var ie="",Ye=B.split("&"),qt=0;qt<Ye.length;qt++){var Fe=Ye[qt].split("=");if(1<Fe.length){var sn=Fe[0];Fe=Fe[1];var an=sn.split("_");ie=2<=an.length&&an[1]=="type"?ie+(sn+"="+Fe+"&"):ie+(sn+"=redacted&")}}else ie=null;else ie=B;return"XMLHTTP REQ ("+R+") [attempt "+L+"]: "+y+`
`+A+`
`+ie})}function C4(h,y,A,R,L,B,ie){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+L+"]: "+y+`
`+A+`
`+B+" "+ie})}function sa(h,y,A,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+k4(h,A)+(R?" "+R:"")})}function O4(h,y){h.info(function(){return"TIMEOUT: "+y})}wu.prototype.info=function(){};function k4(h,y){if(!h.g)return y;if(!y)return null;try{var A=JSON.parse(y);if(A){for(h=0;h<A.length;h++)if(Array.isArray(A[h])){var R=A[h];if(!(2>R.length)){var L=R[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ie=1;ie<L.length;ie++)L[ie]=""}}}}return zy(A)}catch{return y}}var Ph={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qy;function Ch(){}m(Ch,Wy),Ch.prototype.g=function(){return new XMLHttpRequest},Ch.prototype.i=function(){return{}},qy=new Ch;function Xi(h,y,A,R){this.j=h,this.i=y,this.l=A,this.R=R||1,this.U=new gu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ES}function ES(){this.i=null,this.g="",this.h=!1}var SS={},Ky={};function Yy(h,y,A){h.L=1,h.v=Rh(ai(y)),h.m=A,h.P=!0,TS(h,null)}function TS(h,y){h.F=Date.now(),Oh(h),h.A=ai(h.v);var A=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),FS(A.i,"t",R),h.C=0,A=h.j.J,h.h=new ES,h.g=rT(h.j,A?y:null,!h.m),0<h.O&&(h.M=new T4(d(h.Y,h,h.g),h.O)),y=h.U,A=h.g,R=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(pS[0]=L.toString()),L=pS);for(var B=0;B<L.length;B++){var ie=Ie(A,L[B],R||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),vu(),P4(h.i,h.u,h.A,h.l,h.R,h.m)}Xi.prototype.ca=function(h){h=h.target;const y=this.M;y&&li(h)==3?y.j():this.Y(h)},Xi.prototype.Y=function(h){try{if(h==this.g)e:{const an=li(this.g);var y=this.g.Ba();const ua=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||HS(this.g)))){this.J||an!=4||y==7||(y==8||0>=ua?vu(3):vu(2)),Qy(this);var A=this.g.Z();this.X=A;t:if(AS(this)){var R=HS(this.g);h="";var L=R.length,B=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qo(this),bu(this);var ie="";break t}this.h.i=new a.TextDecoder}for(y=0;y<L;y++)this.h.h=!0,h+=this.h.i.decode(R[y],{stream:!(B&&y==L-1)});R.length=0,this.h.g+=h,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=A==200,C4(this.i,this.u,this.A,this.l,this.R,an,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,qt=this.g;if((Ye=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ye)){var Fe=Ye;break t}}Fe=null}if(A=Fe)sa(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xy(this,A);else{this.o=!1,this.s=3,bn(12),Qo(this),bu(this);break e}}if(this.P){A=!0;let _r;for(;!this.J&&this.C<ie.length;)if(_r=N4(this,ie),_r==Ky){an==4&&(this.s=4,bn(14),A=!1),sa(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==SS){this.s=4,bn(15),sa(this.i,this.l,ie,"[Invalid Chunk]"),A=!1;break}else sa(this.i,this.l,_r,null),Xy(this,_r);if(AS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||ie.length!=0||this.h.h||(this.s=1,bn(16),A=!1),this.o=this.o&&A,!A)sa(this.i,this.l,ie,"[Invalid Chunked Response]"),Qo(this),bu(this);else if(0<ie.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),rv(sn),sn.M=!0,bn(11))}}else sa(this.i,this.l,ie,null),Xy(this,ie);an==4&&Qo(this),this.o&&!this.J&&(an==4?ZS(this.j,this):(this.o=!1,Oh(this)))}else Y4(this.g),A==400&&0<ie.indexOf("Unknown SID")?(this.s=3,bn(12)):(this.s=0,bn(13)),Qo(this),bu(this)}}}catch{}finally{}};function AS(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function N4(h,y){var A=h.C,R=y.indexOf(`
`,A);return R==-1?Ky:(A=Number(y.substring(A,R)),isNaN(A)?SS:(R+=1,R+A>y.length?Ky:(y=y.slice(R,R+A),h.C=R+A,y)))}Xi.prototype.cancel=function(){this.J=!0,Qo(this)};function Oh(h){h.S=Date.now()+h.I,IS(h,h.I)}function IS(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=_u(d(h.ba,h),y)}function Qy(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Xi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(O4(this.i,this.A),this.L!=2&&(vu(),bn(17)),Qo(this),this.s=2,bu(this)):IS(this,this.S-h)};function bu(h){h.j.G==0||h.J||ZS(h.j,h)}function Qo(h){Qy(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,mS(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Xy(h,y){try{var A=h.j;if(A.G!=0&&(A.g==h||Jy(A.h,h))){if(!h.K&&Jy(A.h,h)&&A.G==3){try{var R=A.Da.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var L=R;if(L[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<h.F)Fh(A),Lh(A);else break e;nv(A),bn(18)}}else A.za=L[1],0<A.za-A.T&&37500>L[2]&&A.F&&A.v==0&&!A.C&&(A.C=_u(d(A.Za,A),6e3));if(1>=OS(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Jo(A,11)}else if((h.K||A.g==h)&&Fh(A),!w(y))for(L=A.Da.g.parse(y),y=0;y<L.length;y++){let Fe=L[y];if(A.T=Fe[0],Fe=Fe[1],A.G==2)if(Fe[0]=="c"){A.K=Fe[1],A.ia=Fe[2];const sn=Fe[3];sn!=null&&(A.la=sn,A.j.info("VER="+A.la));const an=Fe[4];an!=null&&(A.Aa=an,A.j.info("SVER="+A.Aa));const ua=Fe[5];ua!=null&&typeof ua=="number"&&0<ua&&(R=1.5*ua,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const _r=h.g;if(_r){const Uh=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uh){var B=R.h;B.g||Uh.indexOf("spdy")==-1&&Uh.indexOf("quic")==-1&&Uh.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Zy(B,B.h),B.h=null))}if(R.D){const iv=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;iv&&(R.ya=iv,tt(R.I,R.D,iv))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-h.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var ie=h;if(R.qa=nT(R,R.J?R.ia:null,R.W),ie.K){kS(R.h,ie);var Ye=ie,qt=R.L;qt&&(Ye.I=qt),Ye.B&&(Qy(Ye),Oh(Ye)),R.g=ie}else XS(R);0<A.i.length&&$h(A)}else Fe[0]!="stop"&&Fe[0]!="close"||Jo(A,7);else A.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Jo(A,7):tv(A):Fe[0]!="noop"&&A.l&&A.l.ta(Fe),A.v=0)}}vu(4)}catch{}}var R4=class{constructor(h,y){this.g=h,this.map=y}};function PS(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function CS(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function OS(h){return h.h?1:h.g?h.g.size:0}function Jy(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Zy(h,y){h.g?h.g.add(y):h.h=y}function kS(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}PS.prototype.cancel=function(){if(this.i=NS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function NS(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const A of h.g.values())y=y.concat(A.D);return y}return g(h.i)}function M4(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var y=[],A=h.length,R=0;R<A;R++)y.push(h[R]);return y}y=[],A=0;for(R in h)y[A++]=h[R];return y}function D4(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var y=[];h=h.length;for(var A=0;A<h;A++)y.push(A);return y}y=[],A=0;for(const R in h)y[A++]=R;return y}}}function RS(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var A=D4(h),R=M4(h),L=R.length,B=0;B<L;B++)y.call(void 0,R[B],A&&A[B],h)}var MS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j4(h,y){if(h){h=h.split("&");for(var A=0;A<h.length;A++){var R=h[A].indexOf("="),L=null;if(0<=R){var B=h[A].substring(0,R);L=h[A].substring(R+1)}else B=h[A];y(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Xo(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Xo){this.h=h.h,kh(this,h.j),this.o=h.o,this.g=h.g,Nh(this,h.s),this.l=h.l;var y=h.i,A=new Su;A.i=y.i,y.g&&(A.g=new Map(y.g),A.h=y.h),DS(this,A),this.m=h.m}else h&&(y=String(h).match(MS))?(this.h=!1,kh(this,y[1]||"",!0),this.o=xu(y[2]||""),this.g=xu(y[3]||"",!0),Nh(this,y[4]),this.l=xu(y[5]||"",!0),DS(this,y[6]||"",!0),this.m=xu(y[7]||"")):(this.h=!1,this.i=new Su(null,this.h))}Xo.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Eu(y,jS,!0),":");var A=this.g;return(A||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Eu(y,jS,!0),"@"),h.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&h.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&h.push("/"),h.push(Eu(A,A.charAt(0)=="/"?F4:$4,!0))),(A=this.i.toString())&&h.push("?",A),(A=this.m)&&h.push("#",Eu(A,U4)),h.join("")};function ai(h){return new Xo(h)}function kh(h,y,A){h.j=A?xu(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Nh(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function DS(h,y,A){y instanceof Su?(h.i=y,B4(h.i,h.h)):(A||(y=Eu(y,V4)),h.i=new Su(y,h.h))}function tt(h,y,A){h.i.set(y,A)}function Rh(h){return tt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function xu(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Eu(h,y,A){return typeof h=="string"?(h=encodeURI(h).replace(y,L4),A&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function L4(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var jS=/[#\/\?@]/g,$4=/[#\?:]/g,F4=/[#\?]/g,V4=/[#\?@]/g,U4=/#/g;function Su(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Ji(h){h.g||(h.g=new Map,h.h=0,h.i&&j4(h.i,function(y,A){h.add(decodeURIComponent(y.replace(/\+/g," ")),A)}))}t=Su.prototype,t.add=function(h,y){Ji(this),this.i=null,h=aa(this,h);var A=this.g.get(h);return A||this.g.set(h,A=[]),A.push(y),this.h+=1,this};function LS(h,y){Ji(h),y=aa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function $S(h,y){return Ji(h),y=aa(h,y),h.g.has(y)}t.forEach=function(h,y){Ji(this),this.g.forEach(function(A,R){A.forEach(function(L){h.call(y,L,R,this)},this)},this)},t.na=function(){Ji(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),A=[];for(let R=0;R<y.length;R++){const L=h[R];for(let B=0;B<L.length;B++)A.push(y[R])}return A},t.V=function(h){Ji(this);let y=[];if(typeof h=="string")$S(this,h)&&(y=y.concat(this.g.get(aa(this,h))));else{h=Array.from(this.g.values());for(let A=0;A<h.length;A++)y=y.concat(h[A])}return y},t.set=function(h,y){return Ji(this),this.i=null,h=aa(this,h),$S(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},t.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function FS(h,y,A){LS(h,y),0<A.length&&(h.i=null,h.g.set(aa(h,y),g(A)),h.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var A=0;A<y.length;A++){var R=y[A];const B=encodeURIComponent(String(R)),ie=this.V(R);for(R=0;R<ie.length;R++){var L=B;ie[R]!==""&&(L+="="+encodeURIComponent(String(ie[R]))),h.push(L)}}return this.i=h.join("&")};function aa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function B4(h,y){y&&!h.j&&(Ji(h),h.i=null,h.g.forEach(function(A,R){var L=R.toLowerCase();R!=L&&(LS(this,R),FS(this,L,A))},h)),h.j=y}function z4(h,y){const A=new wu;if(a.Image){const R=new Image;R.onload=p(Zi,A,"TestLoadImage: loaded",!0,y,R),R.onerror=p(Zi,A,"TestLoadImage: error",!1,y,R),R.onabort=p(Zi,A,"TestLoadImage: abort",!1,y,R),R.ontimeout=p(Zi,A,"TestLoadImage: timeout",!1,y,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function W4(h,y){const A=new wu,R=new AbortController,L=setTimeout(()=>{R.abort(),Zi(A,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(B=>{clearTimeout(L),B.ok?Zi(A,"TestPingServer: ok",!0,y):Zi(A,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),Zi(A,"TestPingServer: error",!1,y)})}function Zi(h,y,A,R,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),R(A)}catch{}}function G4(){this.g=new I4}function H4(h,y,A){const R=A||"";try{RS(h,function(L,B){let ie=L;u(L)&&(ie=zy(L)),y.push(R+B+"="+encodeURIComponent(ie))})}catch(L){throw y.push(R+"type="+encodeURIComponent("_badmap")),L}}function Mh(h){this.l=h.Ub||null,this.j=h.eb||!1}m(Mh,Wy),Mh.prototype.g=function(){return new Dh(this.l,this.j)},Mh.prototype.i=function(h){return function(){return h}}({});function Dh(h,y){on.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Dh,on),t=Dh.prototype,t.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Au(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tu(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Au(this)),this.g&&(this.readyState=3,Au(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;VS(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function VS(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Tu(this):Au(this),this.readyState==3&&VS(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Tu(this))},t.Qa=function(h){this.g&&(this.response=h,Tu(this))},t.ga=function(){this.g&&Tu(this)};function Tu(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Au(h)}t.setRequestHeader=function(h,y){this.u.append(h,y)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var A=y.next();!A.done;)A=A.value,h.push(A[0]+": "+A[1]),A=y.next();return h.join(`\r
`)};function Au(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Dh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function US(h){let y="";return I(h,function(A,R){y+=R,y+=":",y+=A,y+=`\r
`}),y}function ev(h,y,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=US(A),typeof h=="string"?A!=null&&encodeURIComponent(String(A)):tt(h,y,A))}function gt(h){on.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(gt,on);var q4=/^https?$/i,K4=["POST","PUT"];t=gt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,y,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qy.g(),this.v=this.o?gS(this.o):gS(qy),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(B){BS(this,B);return}if(h=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var L in R)A.set(L,R[L]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const B of R.keys())A.set(B,R.get(B));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find(B=>B.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(K4,y,void 0))||R||L||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ie]of A)this.g.setRequestHeader(B,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{GS(this),this.u=!0,this.g.send(h),this.u=!1}catch(B){BS(this,B)}};function BS(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,zS(h),jh(h)}function zS(h){h.A||(h.A=!0,wn(h,"complete"),wn(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,wn(this,"complete"),wn(this,"abort"),jh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jh(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?WS(this):this.bb())},t.bb=function(){WS(this)};function WS(h){if(h.h&&typeof s<"u"&&(!h.v[1]||li(h)!=4||h.Z()!=2)){if(h.u&&li(h)==4)hS(h.Ea,0,h);else if(wn(h,"readystatechange"),li(h)==4){h.h=!1;try{const ie=h.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var A;if(!(A=y)){var R;if(R=ie===0){var L=String(h.D).match(MS)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),R=!q4.test(L?L.toLowerCase():"")}A=R}if(A)wn(h,"complete"),wn(h,"success");else{h.m=6;try{var B=2<li(h)?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.Z()+"]",zS(h)}}finally{jh(h)}}}}function jh(h,y){if(h.g){GS(h);const A=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||wn(h,"ready");try{A.onreadystatechange=R}catch{}}}function GS(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function li(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),A4(y)}};function HS(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Y4(h){const y={};h=(h.g&&2<=li(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(w(h[R]))continue;var A=k(h[R]);const L=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const B=y[L]||[];y[L]=B,B.push(A)}b(y,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Iu(h,y,A){return A&&A.internalChannelParams&&A.internalChannelParams[h]||y}function qS(h){this.Aa=0,this.i=[],this.j=new wu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Iu("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Iu("baseRetryDelayMs",5e3,h),this.cb=Iu("retryDelaySeedMs",1e4,h),this.Wa=Iu("forwardChannelMaxRetries",2,h),this.wa=Iu("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new PS(h&&h.concurrentRequestLimit),this.Da=new G4,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qS.prototype,t.la=8,t.G=1,t.connect=function(h,y,A,R){bn(0),this.W=h,this.H=y||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=nT(this,null,this.W),$h(this)};function tv(h){if(KS(h),h.G==3){var y=h.U++,A=ai(h.I);if(tt(A,"SID",h.K),tt(A,"RID",y),tt(A,"TYPE","terminate"),Pu(h,A),y=new Xi(h,h.j,y),y.L=2,y.v=Rh(ai(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=y.v,A=!0),A||(y.g=rT(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Oh(y)}tT(h)}function Lh(h){h.g&&(rv(h),h.g.cancel(),h.g=null)}function KS(h){Lh(h),h.u&&(a.clearTimeout(h.u),h.u=null),Fh(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function $h(h){if(!CS(h.h)&&!h.s){h.s=!0;var y=h.Ga;K||Q(),F||(K(),F=!0),W.add(y,h),h.B=0}}function Q4(h,y){return OS(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=_u(d(h.Ga,h,y),eT(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new Xi(this,this.j,h);let B=this.o;if(this.S&&(B?(B=S(B),O(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var y=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,4096<y){y=A;break e}if(y===4096||A===this.i.length-1){y=A+1;break e}}y=1e3}else y=1e3;y=QS(this,L,y),A=ai(this.I),tt(A,"RID",h),tt(A,"CVER",22),this.D&&tt(A,"X-HTTP-Session-Id",this.D),Pu(this,A),B&&(this.O?y="headers="+encodeURIComponent(String(US(B)))+"&"+y:this.m&&ev(A,this.m,B)),Zy(this.h,L),this.Ua&&tt(A,"TYPE","init"),this.P?(tt(A,"$req",y),tt(A,"SID","null"),L.T=!0,Yy(L,A,null)):Yy(L,A,y),this.G=2}}else this.G==3&&(h?YS(this,h):this.i.length==0||CS(this.h)||YS(this))};function YS(h,y){var A;y?A=y.l:A=h.U++;const R=ai(h.I);tt(R,"SID",h.K),tt(R,"RID",A),tt(R,"AID",h.T),Pu(h,R),h.m&&h.o&&ev(R,h.m,h.o),A=new Xi(h,h.j,A,h.B+1),h.m===null&&(A.H=h.o),y&&(h.i=y.D.concat(h.i)),y=QS(h,A,1e3),A.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Zy(h.h,A),Yy(A,R,y)}function Pu(h,y){h.H&&I(h.H,function(A,R){tt(y,R,A)}),h.l&&RS({},function(A,R){tt(y,R,A)})}function QS(h,y,A){A=Math.min(h.i.length,A);var R=h.l?d(h.l.Na,h.l,h):null;e:{var L=h.i;let B=-1;for(;;){const ie=["count="+A];B==-1?0<A?(B=L[0].g,ie.push("ofs="+B)):B=0:ie.push("ofs="+B);let Ye=!0;for(let qt=0;qt<A;qt++){let Fe=L[qt].g;const sn=L[qt].map;if(Fe-=B,0>Fe)B=Math.max(0,L[qt].g-100),Ye=!1;else try{H4(sn,ie,"req"+Fe+"_")}catch{R&&R(sn)}}if(Ye){R=ie.join("&");break e}}}return h=h.i.splice(0,A),y.D=h,R}function XS(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;K||Q(),F||(K(),F=!0),W.add(y,h),h.v=0}}function nv(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=_u(d(h.Fa,h),eT(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,JS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=_u(d(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bn(10),Lh(this),JS(this))};function rv(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function JS(h){h.g=new Xi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=ai(h.qa);tt(y,"RID","rpc"),tt(y,"SID",h.K),tt(y,"AID",h.T),tt(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&tt(y,"TO",h.ja),tt(y,"TYPE","xmlhttp"),Pu(h,y),h.m&&h.o&&ev(y,h.m,h.o),h.L&&(h.g.I=h.L);var A=h.g;h=h.ia,A.L=1,A.v=Rh(ai(y)),A.m=null,A.P=!0,TS(A,h)}t.Za=function(){this.C!=null&&(this.C=null,Lh(this),nv(this),bn(19))};function Fh(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function ZS(h,y){var A=null;if(h.g==y){Fh(h),rv(h),h.g=null;var R=2}else if(Jy(h.h,y))A=y.D,kS(h.h,y),R=1;else return;if(h.G!=0){if(y.o)if(R==1){A=y.m?y.m.length:0,y=Date.now()-y.F;var L=h.B;R=Ih(),wn(R,new bS(R,A)),$h(h)}else XS(h);else if(L=y.s,L==3||L==0&&0<y.X||!(R==1&&Q4(h,y)||R==2&&nv(h)))switch(A&&0<A.length&&(y=h.h,y.i=y.i.concat(A)),L){case 1:Jo(h,5);break;case 4:Jo(h,10);break;case 3:Jo(h,6);break;default:Jo(h,2)}}}function eT(h,y){let A=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(A*=2),A*y}function Jo(h,y){if(h.j.info("Error code "+y),y==2){var A=d(h.fb,h),R=h.Xa;const L=!R;R=new Xo(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||kh(R,"https"),Rh(R),L?z4(R.toString(),A):W4(R.toString(),A)}else bn(2);h.G=0,h.l&&h.l.sa(y),tT(h),KS(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function tT(h){if(h.G=0,h.ka=[],h.l){const y=NS(h.h);(y.length!=0||h.i.length!=0)&&(v(h.ka,y),v(h.ka,h.i),h.h.i.length=0,g(h.i),h.i.length=0),h.l.ra()}}function nT(h,y,A){var R=A instanceof Xo?ai(A):new Xo(A);if(R.g!="")y&&(R.g=y+"."+R.g),Nh(R,R.s);else{var L=a.location;R=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;var B=new Xo(null);R&&kh(B,R),y&&(B.g=y),L&&Nh(B,L),A&&(B.l=A),R=B}return A=h.D,y=h.ya,A&&y&&tt(R,A,y),tt(R,"VER",h.la),Pu(h,R),R}function rT(h,y,A){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new gt(new Mh({eb:A})):new gt(h.pa),y.Ha(h.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iT(){}t=iT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vh(){}Vh.prototype.g=function(h,y){return new Bn(h,y)};function Bn(h,y){on.call(this),this.g=new qS(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!w(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new la(this)}m(Bn,on),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){tv(this.g)},Bn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var A={};A.__data__=h,h=A}else this.u&&(A={},A.__data__=zy(h),h=A);y.i.push(new R4(y.Ya++,h)),y.G==3&&$h(y)},Bn.prototype.N=function(){this.g.l=null,delete this.j,tv(this.g),delete this.g,Bn.aa.N.call(this)};function oT(h){Gy.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const A in y){h=A;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}m(oT,Gy);function sT(){Hy.call(this),this.status=1}m(sT,Hy);function la(h){this.g=h}m(la,iT),la.prototype.ua=function(){wn(this.g,"a")},la.prototype.ta=function(h){wn(this.g,new oT(h))},la.prototype.sa=function(h){wn(this.g,new sT)},la.prototype.ra=function(){wn(this.g,"b")},Vh.prototype.createWebChannel=Vh.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,K2=function(){return new Vh},q2=function(){return Ih()},H2=Yo,T_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ph.NO_ERROR=0,Ph.TIMEOUT=8,Ph.HTTP_ERROR=6,Vd=Ph,xS.COMPLETE="complete",G2=xS,yS.EventType=yu,yu.OPEN="a",yu.CLOSE="b",yu.ERROR="c",yu.MESSAGE="d",on.prototype.listen=on.prototype.K,rc=yS,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,W2=gt}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});const AA="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new vg("@firebase/firestore");function Lu(){return Ms.logLevel}function he(t,...e){if(Ms.logLevel<=Ne.DEBUG){const n=e.map(Px);Ms.debug(`Firestore (${Ql}): ${t}`,...n)}}function Li(t,...e){if(Ms.logLevel<=Ne.ERROR){const n=e.map(Px);Ms.error(`Firestore (${Ql}): ${t}`,...n)}}function cl(t,...e){if(Ms.logLevel<=Ne.WARN){const n=e.map(Px);Ms.warn(`Firestore (${Ql}): ${t}`,...n)}}function Px(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${Ql}) INTERNAL ASSERTION FAILED: `+t;throw Li(e),new Error(e)}function Ge(t,e){t||be()}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class i6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class o6{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ai,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ai)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new Y2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new hn(e)}}class s6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class a6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new s6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ge(this.o===void 0);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string"),this.R=n.token,new l6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=c6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function fl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new pe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new jt(0,0))}static max(){return new Ee(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ut extends Qc{construct(e,n,r){return new ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const f6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Qc{construct(e,n,r){return new Jt(e,n,r)}static isValidIdentifier(e){return f6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new pe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new pe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new pe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ut.fromString(e))}static fromName(e){return new ge(ut.fromString(e).popFirst(5))}static empty(){return new ge(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ut(e.slice()))}}function h6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Mo(i,ge.empty(),e)}function d6(t){return new Mo(t.readTime,t.key,-1)}class Mo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mo(Ee.min(),ge.empty(),-1)}static max(){return new Mo(Ee.max(),ge.empty(),-1)}}function p6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==m6)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(i=>i?Z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(e[u]).next(f=>{s[u]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new Z((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function y6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function th(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Cx.oe=-1;function wg(t){return t==null}function Tp(t){return t===0&&1/t==-1/0}function v6(t){return typeof t=="number"&&Number.isInteger(t)&&!Tp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function X2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ct=class A_{constructor(e,n){this.comparator=e,this.root=n||Ao.EMPTY}insert(e,n){return new A_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ao.BLACK,null,null))}remove(e){return new A_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ao.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}},ad=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ao=class ci{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ci.RED,this.left=i??ci.EMPTY,this.right=o??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ci(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}};Ao.EMPTY=null,Ao.RED=!0,Ao.BLACK=!1;Ao.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ao(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PA(this.data.getIterator())}getIteratorFrom(e){return new PA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class PA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new tn(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new J2("Invalid base64 string: "+o):o}}(e);return new rn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const _6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(t){if(Ge(!!t),typeof t=="string"){let e=0;const n=_6.exec(t);if(Ge(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kx(t){const e=t.mapValue.fields.__previous_value__;return Ox(e)?kx(e):e}function Xc(t){const e=Do(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n,r,i,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Jc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ox(t)?4:x6(t)?9007199254740991:b6(t)?10:11:be()}function ei(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xc(t).isEqual(Xc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Do(i.timestampValue),a=Do(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ds(i.bytesValue).isEqual(Ds(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return wt(i.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return wt(i.integerValue)===wt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=wt(i.doubleValue),a=wt(o.doubleValue);return s===a?Tp(s)===Tp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return fl(t.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(IA(s)!==IA(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!ei(s[l],a[l])))return!1;return!0}(t,e);default:return be()}}function Zc(t,e){return(t.values||[]).find(n=>ei(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=wt(o.integerValue||o.doubleValue),l=wt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return CA(t.timestampValue,e.timestampValue);case 4:return CA(Xc(t),Xc(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Ds(o),l=Ds(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const f=Ve(a[u],l[u]);if(f!==0)return f}return Ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ve(wt(o.latitude),wt(s.latitude));return a!==0?a:Ve(wt(o.longitude),wt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OA(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,f;const c=o.fields||{},d=s.fields||{},p=(a=c.value)===null||a===void 0?void 0:a.arrayValue,m=(l=d.value)===null||l===void 0?void 0:l.arrayValue,g=Ve(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0);return g!==0?g:OA(p,m)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ld.mapValue&&s===ld.mapValue)return 0;if(o===ld.mapValue)return 1;if(s===ld.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let c=0;c<l.length&&c<f.length;++c){const d=Ve(l[c],f[c]);if(d!==0)return d;const p=hl(a[l[c]],u[f[c]]);if(p!==0)return p}return Ve(l.length,f.length)}(t.mapValue,e.mapValue);default:throw be()}}function CA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=Do(t),r=Do(e),i=Ve(n.seconds,r.seconds);return i!==0?i:Ve(n.nanos,r.nanos)}function OA(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=hl(n[i],r[i]);if(o)return o}return Ve(n.length,r.length)}function dl(t){return I_(t)}function I_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Do(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=I_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${I_(n.fields[s])}`;return i+"}"}(t.mapValue):be()}function P_(t){return!!t&&"integerValue"in t}function Nx(t){return!!t&&"arrayValue"in t}function kA(t){return!!t&&"nullValue"in t}function NA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ud(t){return!!t&&"mapValue"in t}function b6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function x6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(n)}setAll(e){let n=Jt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=yc(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ud(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qs(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new kn(yc(this.value))}}function Z2(t){const e=[];return Qs(t.fields,(n,r)=>{const i=new Jt([n]);if(Ud(r)){const o=Z2(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new pn(e,0,Ee.min(),Ee.min(),Ee.min(),kn.empty(),0)}static newFoundDocument(e,n,r,i){return new pn(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new pn(e,2,n,Ee.min(),Ee.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Ee.min(),Ee.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.position=e,this.inclusive=n}}function RA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ge.comparator(ge.fromName(s.referenceValue),n.key):r=hl(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function MA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n="asc"){this.field=e,this.dir=n}}function E6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{}class Rt extends eM{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new T6(e,n,r):n==="array-contains"?new P6(e,r):n==="in"?new C6(e,r):n==="not-in"?new O6(e,r):n==="array-contains-any"?new k6(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new A6(e,r):new I6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hl(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends eM{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ti(e,n)}matches(e){return tM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tM(t){return t.op==="and"}function nM(t){return S6(t)&&tM(t)}function S6(t){for(const e of t.filters)if(e instanceof ti)return!1;return!0}function C_(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+dl(t.value);if(nM(t))return t.filters.map(e=>C_(e)).join(",");{const e=t.filters.map(n=>C_(n)).join(",");return`${t.op}(${e})`}}function rM(t,e){return t instanceof Rt?function(r,i){return i instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&ei(r.value,i.value)}(t,e):t instanceof ti?function(r,i){return i instanceof ti&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&rM(s,i.filters[a]),!0):!1}(t,e):void be()}function iM(t){return t instanceof Rt?function(n){return`${n.field.canonicalString()} ${n.op} ${dl(n.value)}`}(t):t instanceof ti?function(n){return n.op.toString()+" {"+n.getFilters().map(iM).join(" ,")+"}"}(t):"Filter"}class T6 extends Rt{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class A6 extends Rt{constructor(e,n){super(e,"in",n),this.keys=oM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class I6 extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=oM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class P6 extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nx(n)&&Zc(n.arrayValue,this.value)}}class C6 extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zc(this.value.arrayValue,n)}}class O6 extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zc(this.value.arrayValue,n)}}class k6 extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function DA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new N6(t,e,n,r,i,o,s)}function Rx(t){const e=Se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>C_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),wg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>dl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>dl(r)).join(",")),e.ue=n}return e.ue}function Mx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!E6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MA(t.startAt,e.startAt)&&MA(t.endAt,e.endAt)}function O_(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function R6(t,e,n,r,i,o,s,a){return new bg(t,e,n,r,i,o,s,a)}function xg(t){return new bg(t)}function jA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M6(t){return t.collectionGroup!==null}function vc(t){const e=Se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new tn(Jt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ip(o,r))}),n.has(Jt.keyField().canonicalString())||e.ce.push(new Ip(Jt.keyField(),r))}return e.ce}function Yr(t){const e=Se(t);return e.le||(e.le=D6(e,vc(t))),e.le}function D6(t,e){if(t.limitType==="F")return DA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ip(i.field,o)});const n=t.endAt?new Ap(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ap(t.startAt.position,t.startAt.inclusive):null;return DA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function k_(t,e,n){return new bg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eg(t,e){return Mx(Yr(t),Yr(e))&&t.limitType===e.limitType}function sM(t){return`${Rx(Yr(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>iM(i)).join(", ")}]`),wg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>dl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>dl(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function Sg(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ge.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of vc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=RA(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,vc(r),i)||r.endAt&&!function(s,a,l){const u=RA(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,vc(r),i))}(t,e)}function j6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aM(t){return(e,n)=>{let r=!1;for(const i of vc(t)){const o=L6(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function L6(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?hl(l,u):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return X2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=new Ct(ge.comparator);function $i(){return $6}const lM=new Ct(ge.comparator);function ic(...t){let e=lM;for(const n of t)e=e.insert(n.key,n);return e}function uM(t){let e=lM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hs(){return _c()}function cM(){return _c()}function _c(){return new Xl(t=>t.toString(),(t,e)=>t.isEqual(e))}const F6=new Ct(ge.comparator),V6=new tn(ge.comparator);function Re(...t){let e=V6;for(const n of t)e=e.add(n);return e}const U6=new tn(Ve);function B6(){return U6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tp(e)?"-0":e}}function fM(t){return{integerValue:""+t}}function hM(t,e){return v6(e)?fM(e):Dx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(){this._=void 0}}function z6(t,e,n){return t instanceof Pp?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ox(o)&&(o=kx(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ef?pM(t,e):t instanceof tf?mM(t,e):function(i,o){const s=dM(i,o),a=LA(s)+LA(i.Pe);return P_(s)&&P_(i.Pe)?fM(a):Dx(i.serializer,a)}(t,e)}function W6(t,e,n){return t instanceof ef?pM(t,e):t instanceof tf?mM(t,e):n}function dM(t,e){return t instanceof nf?function(r){return P_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Pp extends Tg{}class ef extends Tg{constructor(e){super(),this.elements=e}}function pM(t,e){const n=gM(e);for(const r of t.elements)n.some(i=>ei(i,r))||n.push(r);return{arrayValue:{values:n}}}class tf extends Tg{constructor(e){super(),this.elements=e}}function mM(t,e){let n=gM(e);for(const r of t.elements)n=n.filter(i=>!ei(i,r));return{arrayValue:{values:n}}}class nf extends Tg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function LA(t){return wt(t.integerValue||t.doubleValue)}function gM(t){return Nx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n){this.field=e,this.transform=n}}function H6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ef&&i instanceof ef||r instanceof tf&&i instanceof tf?fl(r.elements,i.elements,ei):r instanceof nf&&i instanceof nf?ei(r.Pe,i.Pe):r instanceof Pp&&i instanceof Pp}(t.transform,e.transform)}class q6{constructor(e,n){this.version=e,this.transformResults=n}}class Dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ag{}function yM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jx(t.key,Dr.none()):new nh(t.key,t.data,Dr.none());{const n=t.data,r=kn.empty();let i=new tn(Jt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zo(t.key,r,new Yn(i.toArray()),Dr.none())}}function K6(t,e,n){t instanceof nh?function(i,o,s){const a=i.value.clone(),l=FA(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zo?function(i,o,s){if(!Bd(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=FA(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(vM(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function wc(t,e,n,r){return t instanceof nh?function(o,s,a,l){if(!Bd(o.precondition,s))return a;const u=o.value.clone(),f=VA(o.fieldTransforms,l,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof zo?function(o,s,a,l){if(!Bd(o.precondition,s))return a;const u=VA(o.fieldTransforms,l,s),f=s.data;return f.setAll(vM(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(o,s,a){return Bd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Y6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=dM(r.transform,i||null);o!=null&&(n===null&&(n=kn.empty()),n.set(r.field,o))}return n||null}function $A(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fl(r,i,(o,s)=>H6(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nh extends Ag{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zo extends Ag{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function vM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function FA(t,e,n){const r=new Map;Ge(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,W6(s,a,n[i]))}return r}function VA(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,z6(o,s,e))}return r}class jx extends Ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q6 extends Ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&K6(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cM();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=yM(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,(n,r)=>$A(n,r))&&fl(this.baseMutations,e.baseMutations,(n,r)=>$A(n,r))}}class Lx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length);let i=function(){return F6}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Lx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,De;function e5(t){switch(t){default:return be();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function _M(t){if(t===void 0)return Li("GRPC error has no .code"),J.UNKNOWN;switch(t){case St.OK:return J.OK;case St.CANCELLED:return J.CANCELLED;case St.UNKNOWN:return J.UNKNOWN;case St.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case St.INTERNAL:return J.INTERNAL;case St.UNAVAILABLE:return J.UNAVAILABLE;case St.UNAUTHENTICATED:return J.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case St.NOT_FOUND:return J.NOT_FOUND;case St.ALREADY_EXISTS:return J.ALREADY_EXISTS;case St.PERMISSION_DENIED:return J.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case St.ABORTED:return J.ABORTED;case St.OUT_OF_RANGE:return J.OUT_OF_RANGE;case St.UNIMPLEMENTED:return J.UNIMPLEMENTED;case St.DATA_LOSS:return J.DATA_LOSS;default:return be()}}(De=St||(St={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=new xs([4294967295,4294967295],0);function UA(t){const e=t5().encode(t),n=new z2;return n.update(e),new Uint8Array(n.digest())}function BA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xs([n,r],0),new xs([i,o],0)]}class $x{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oc(`Invalid padding: ${n}`);if(r<0)throw new oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=xs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(xs.fromNumber(r)));return i.compare(n5)===1&&(i=new xs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=UA(e),[r,i]=BA(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new $x(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=UA(e),[r,i]=BA(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ig(Ee.min(),i,new Ct(Ve),$i(),Re())}}class rh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rh(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class wM{constructor(e,n){this.targetId=e,this.me=n}}class bM{constructor(e,n,r=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zA{constructor(){this.fe=0,this.ge=GA(),this.pe=rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),r=Re();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:be()}}),new rh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=GA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class r5{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=WA(),this.Qe=new Ct(Ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(O_(o))if(r===0){const s=new ge(o.path);this.Ue(n,s,pn.newNoDocument(s,Ee.min()))}else Ge(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Ds(r).toUint8Array()}catch(l){if(l instanceof J2)return cl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new $x(s,i,o)}catch(l){return cl(l instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&O_(a.target)){const l=new ge(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,pn.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Re();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Ig(e,n,this.Qe,this.ke,r);return this.ke=$i(),this.qe=WA(),this.Qe=new Ct(Ve),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zA,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tn(Ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zA),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function WA(){return new Ct(ge.comparator)}function GA(){return new Ct(ge.comparator)}const i5=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),o5=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),s5=(()=>({and:"AND",or:"OR"}))();class a5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function N_(t,e){return t.useProto3Json||wg(e)?e:{value:e}}function Cp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l5(t,e){return Cp(t,e.toTimestamp())}function Qr(t){return Ge(!!t),Ee.fromTimestamp(function(n){const r=Do(n);return new jt(r.seconds,r.nanos)}(t))}function Fx(t,e){return R_(t,e).canonicalString()}function R_(t,e){const n=function(i){return new ut(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EM(t){const e=ut.fromString(t);return Ge(PM(e)),e}function M_(t,e){return Fx(t.databaseId,e.path)}function jv(t,e){const n=EM(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(TM(n))}function SM(t,e){return Fx(t.databaseId,e)}function u5(t){const e=EM(t);return e.length===4?ut.emptyPath():TM(e)}function D_(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TM(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HA(t,e,n){return{name:M_(t,e),fields:n.value.mapValue.fields}}function c5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,f){return u.useProto3Json?(Ge(f===void 0||typeof f=="string"),rn.fromBase64String(f||"")):(Ge(f===void 0||f instanceof Buffer||f instanceof Uint8Array),rn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const f=u.code===void 0?J.UNKNOWN:_M(u.code);return new pe(f,u.message||"")}(s);n=new bM(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=jv(t,r.document.name),o=Qr(r.document.updateTime),s=r.document.createTime?Qr(r.document.createTime):Ee.min(),a=new kn({mapValue:{fields:r.document.fields}}),l=pn.newFoundDocument(i,o,s,a),u=r.targetIds||[],f=r.removedTargetIds||[];n=new zd(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=jv(t,r.document),o=r.readTime?Qr(r.readTime):Ee.min(),s=pn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new zd([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=jv(t,r.document),o=r.removedTargetIds||[];n=new zd([],o,i,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Z6(i,o),a=r.targetId;n=new wM(a,s)}}return n}function f5(t,e){let n;if(e instanceof nh)n={update:HA(t,e.key,e.value)};else if(e instanceof jx)n={delete:M_(t,e.key)};else if(e instanceof zo)n={update:HA(t,e.key,e.data),updateMask:w5(e.fieldMask)};else{if(!(e instanceof Q6))return be();n={verify:M_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Pp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ef)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nf)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:l5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:be()}(t,e.precondition)),n}function h5(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Qr(i.updateTime):Qr(o);return s.isEqual(Ee.min())&&(s=Qr(o)),new q6(s,i.transformResults||[])}(n,e))):[]}function d5(t,e){return{documents:[SM(t,e.path)]}}function p5(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SM(t,i);const o=function(u){if(u.length!==0)return IM(ti.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(f=>function(d){return{field:ya(d.field),direction:y5(d.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=N_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function m5(t){let e=u5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(c){const d=AM(c);return d instanceof ti&&nM(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(c){return c.map(d=>function(m){return new Ip(va(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(c){let d;return d=typeof c=="object"?c.value:c,wg(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(c){const d=!!c.before,p=c.values||[];return new Ap(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const d=!c.before,p=c.values||[];return new Ap(p,d)}(n.endAt)),R6(e,i,s,o,a,"F",l,u)}function g5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=va(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=va(n.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=va(n.unaryFilter.field);return Rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=va(n.unaryFilter.field);return Rt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return Rt.create(va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ti.create(n.compositeFilter.filters.map(r=>AM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function y5(t){return i5[t]}function v5(t){return o5[t]}function _5(t){return s5[t]}function ya(t){return{fieldPath:t.canonicalString()}}function va(t){return Jt.fromServerFormat(t.fieldPath)}function IM(t){return t instanceof Rt?function(n){if(n.op==="=="){if(NA(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(kA(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NA(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(kA(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:v5(n.op),value:n.value}}}(t):t instanceof ti?function(n){const r=n.getFilters().map(i=>IM(i));return r.length===1?r[0]:{compositeFilter:{op:_5(n.op),filters:r}}}(t):be()}function w5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n,r,i,o=Ee.min(),s=Ee.min(),a=rn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.ct=e}}function x5(t){const e=m5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.un=new S5}addToCollectionParentIndex(e,n){return this.un.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Mo.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class S5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tn(ut.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pl(0)}static kn(){return new pl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this.changes=new Xl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wc(r.mutation,i,Yn.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const i=hs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ic();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=$i();const s=_c(),a=function(){return _c()}();return n.forEach((l,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof zo)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),wc(f.mutation,u,f.mutation.getFieldMask(),jt.now())):s.set(u.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,f)=>s.set(u,f)),n.forEach((u,f)=>{var c;return a.set(u,new A5(f,(c=s.get(u))!==null&&c!==void 0?c:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_c();let i=new Ct((s,a)=>s-a),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Yn.empty();f=a.applyToLocalView(u,f),r.set(l,f);const c=(i.get(a.batchId)||Re()).add(l);i=i.insert(a.batchId,c)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,f=l.value,c=cM();f.forEach(d=>{if(!o.has(d)){const p=yM(n.get(d),r.get(d));p!==null&&c.set(d,p),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,c))}return Z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Z.resolve(hs());let a=-1,l=o;return s.next(u=>Z.forEach(u,(f,c)=>(a<c.largestBatchId&&(a=c.largestBatchId),o.get(f)?Z.resolve():this.remoteDocumentCache.getEntry(e,f).next(d=>{l=l.insert(f,d)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Re())).next(f=>({batchId:a,changes:uM(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let i=ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ic();return this.indexManager.getCollectionParents(e,o).next(a=>Z.forEach(a,l=>{const u=function(c,d){return new bg(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,pn.newInvalidDocument(f)))});let a=ic();return s.forEach((l,u)=>{const f=o.get(l);f!==void 0&&wc(f.mutation,u,Yn.empty(),jt.now()),Sg(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Qr(i.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:x5(i.bundledQuery),readTime:Qr(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.overlays=new Ct(ge.comparator),this.Ir=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hs();return Z.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=hs(),o=n.length+1,s=new ge(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ct((u,f)=>u-f);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=hs(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=hs(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return Z.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new J6(n,r));let o=this.Ir.get(n);o===void 0&&(o=Re(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.Tr=new tn(Ft.Er),this.dr=new tn(Ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ge(new ut([])),r=new Ft(n,e),i=new Ft(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new ut([])),r=new Ft(n,e),i=new Ft(n,e+1);let o=Re();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||Ve(e.wr,n.wr)}static Ar(e,n){return Ve(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tn(Ft.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new X6(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Ft(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(s)}lookupMutationBatch(e,n){return Z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),i=new Ft(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tn(Ve);return n.forEach(i=>{const o=new Ft(i,0),s=new Ft(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),Z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ge.isDocumentKey(o)||(o=o.child(""));const s=new Ft(new ge(o),0);let a=new tn(Ve);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},s),Z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Z.forEach(n.mutations,i=>{const o=new Ft(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ft(n,0),i=this.br.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.Mr=e,this.docs=function(){return new Ct(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=$i();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=$i();const s=n.path,a=new ge(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||p6(d6(f),r)<=0||(i.has(f.key)||Sg(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,r,i){be()}Or(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new R5(this)}getSize(e){return Z.resolve(this.size)}}class R5 extends T5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.persistence=e,this.Nr=new Xl(n=>Rx(n),Mx),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vx,this.targetCount=0,this.kr=pl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new pl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Kn(n),Z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Z.waitFor(o).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Cx(0),this.Kr=!1,this.Kr=!0,this.$r=new O5,this.referenceDelegate=e(this),this.Ur=new M5(this),this.indexManager=new E5,this.remoteDocumentCache=function(i){return new N5(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new b5(n),this.Gr=new P5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new C5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new k5(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new j5(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return Z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class j5 extends g6{constructor(e){super(),this.currentSequenceNumber=e}}class Ux{constructor(e){this.persistence=e,this.Jr=new Vx,this.Yr=null}static Zr(e){return new Ux(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,r=>{const i=ge.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Z.or([()=>Z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Re(),i=Re();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Bx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DU()?8:y6(vn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new L5;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Lu()<=Ne.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(Lu()<=Ne.DEBUG&&he("QueryEngine","Query:",ga(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Lu()<=Ne.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):Z.resolve())}Yi(e,n){if(jA(n))return Z.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=k_(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Re(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,s,l.readTime)?this.Yi(e,k_(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return jA(n)||i.isEqual(Ee.min())?Z.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?Z.resolve(null):(Lu()<=Ne.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ga(n)),this.rs(e,s,n,h6(i,-1)).next(a=>a))})}ts(e,n){let r=new tn(aM(e));return n.forEach((i,o)=>{Sg(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Lu()<=Ne.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ga(n)),this.Ji.getDocumentsMatchingQuery(e,n,Mo.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ct(Ve),this._s=new Xl(o=>Rx(o),Mx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function V5(t,e,n,r){return new F5(t,e,n,r)}async function CM(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=Re();for(const u of i){s.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of o){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})}function U5(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,f){const c=u.batch,d=c.keys();let p=Z.resolve();return d.forEach(m=>{p=p.next(()=>f.getEntry(l,m)).next(g=>{const v=u.docVersions.get(m);Ge(v!==null),g.version.compareTo(v)<0&&(c.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),f.addEntry(g)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,c))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Re();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function OM(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function B5(t,e){const n=Se(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((f,c)=>{const d=i.get(c);if(!d)return;a.push(n.Ur.removeMatchingKeys(o,f.removedDocuments,c).next(()=>n.Ur.addMatchingKeys(o,f.addedDocuments,c)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(c)!==null?p=p.withResumeToken(rn.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(c,p),function(g,v,_){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,p,f)&&a.push(n.Ur.updateTargetData(o,p))});let l=$i(),u=Re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(z5(o,s,e.documentUpdates).next(f=>{l=f.Ps,u=f.Is})),!r.isEqual(Ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(o).next(c=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return Z.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.os=i,o))}function z5(t,e,n){let r=Re(),i=Re();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=$i();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function W5(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G5(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,Z.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new po(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function j_(t,e,n){const r=Se(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!th(s))throw s;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function qA(t,e,n){const r=Se(t);let i=Ee.min(),o=Re();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,f){const c=Se(l),d=c._s.get(f);return d!==void 0?Z.resolve(c.os.get(d)):c.Ur.getTargetData(u,f)}(r,s,Yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:Ee.min(),n?o:Re())).next(a=>(H5(r,j6(e),a),{documents:a,Ts:o})))}function H5(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class KA{constructor(){this.activeTargetIds=B6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q5{constructor(){this.so=new KA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new KA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function Lv(){return ud===null?ud=function(){return 268435456+Math.round(2147483648*Math.random())}():ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class X5 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=Lv(),l=this.xo(n,r.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(n,l,u,i).then(f=>(he("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw cl("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",l,"request:",i),f})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ql}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=Y5[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=Lv();return new Promise((s,a)=>{const l=new W2;l.setWithCredentials(!0),l.listenOnce(G2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vd.NO_ERROR:const f=l.getResponseJson();he(cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Vd.TIMEOUT:he(cn,`RPC '${e}' ${o} timed out`),a(new pe(J.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:const c=l.getStatus();if(he(cn,`RPC '${e}' ${o} failed with status:`,c,"response text:",l.getResponseText()),c>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(_)>=0?_:J.UNKNOWN}(p.status);a(new pe(m,p.message))}else a(new pe(J.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new pe(J.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{he(cn,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);he(cn,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Lv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=K2(),a=q2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=o.join("");he(cn,`Creating RPC '${e}' stream ${i}: ${f}`,l);const c=s.createWebChannel(f,l);let d=!1,p=!1;const m=new Q5({Io:v=>{p?he(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(d||(he(cn,`Opening RPC '${e}' stream ${i} transport.`),c.open(),d=!0),he(cn,`RPC '${e}' stream ${i} sending:`,v),c.send(v))},To:()=>c.close()}),g=(v,_,w)=>{v.listen(_,E=>{try{w(E)}catch(C){setTimeout(()=>{throw C},0)}})};return g(c,rc.EventType.OPEN,()=>{p||(he(cn,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),g(c,rc.EventType.CLOSE,()=>{p||(p=!0,he(cn,`RPC '${e}' stream ${i} transport closed`),m.So())}),g(c,rc.EventType.ERROR,v=>{p||(p=!0,cl(cn,`RPC '${e}' stream ${i} transport errored:`,v),m.So(new pe(J.UNAVAILABLE,"The operation could not be completed")))}),g(c,rc.EventType.MESSAGE,v=>{var _;if(!p){const w=v.data[0];Ge(!!w);const E=w,C=E.error||((_=E[0])===null||_===void 0?void 0:_.error);if(C){he(cn,`RPC '${e}' stream ${i} received error:`,C);const T=C.status;let I=function(P){const O=St[P];if(O!==void 0)return _M(O)}(T),b=C.message;I===void 0&&(I=J.INTERNAL,b="Unknown error status: "+T+" with message "+C.message),p=!0,m.So(new pe(I,b)),c.close()}else he(cn,`RPC '${e}' stream ${i} received:`,w),m.bo(w)}}),g(a,H2.STAT_EVENT,v=>{v.stat===T_.PROXY?he(cn,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===T_.NOPROXY&&he(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function $v(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){return new a5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kM(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Li(n.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new pe(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J5 extends NM{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=c5(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ee.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ee.min():s.readTime?Qr(s.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=D_(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=O_(l)?{documents:d5(o,l)}:{query:p5(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=xM(o,s.resumeToken);const u=N_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ee.min())>0){a.readTime=Cp(o,s.snapshotVersion.toTimestamp());const u=N_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=g5(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=D_(this.serializer),n.removeTarget=e,this.a_(n)}}class Z5 extends NM{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=h5(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=D_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>f5(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new pe(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,R_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(J.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,R_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(J.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class t9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Li(n),this.D_=!1):he("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{Xs(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Se(l);u.L_.add(4),await ih(u),u.q_.set("Unknown"),u.L_.delete(4),await Cg(u)}(this))})}),this.q_=new t9(r,i)}}async function Cg(t){if(Xs(t))for(const e of t.B_)await e(!0)}async function ih(t){for(const e of t.B_)await e(!1)}function RM(t,e){const n=Se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Hx(n)?Gx(n):Jl(n).r_()&&Wx(n,e))}function zx(t,e){const n=Se(t),r=Jl(n);n.N_.delete(e),r.r_()&&MM(n,e),n.N_.size===0&&(r.r_()?r.o_():Xs(n)&&n.q_.set("Unknown"))}function Wx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jl(t).A_(e)}function MM(t,e){t.Q_.xe(e),Jl(t).R_(e)}function Gx(t){t.Q_=new r5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Jl(t).start(),t.q_.v_()}function Hx(t){return Xs(t)&&!Jl(t).n_()&&t.N_.size>0}function Xs(t){return Se(t).L_.size===0}function DM(t){t.Q_=void 0}async function r9(t){t.q_.set("Online")}async function i9(t){t.N_.forEach((e,n)=>{Wx(t,e)})}async function o9(t,e){DM(t),Hx(t)?(t.q_.M_(e),Gx(t)):t.q_.set("Unknown")}async function s9(t,e,n){if(t.q_.set("Online"),e instanceof bM&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Op(t,r)}else if(e instanceof zd?t.Q_.Ke(e):e instanceof wM?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await OM(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=o.N_.get(u);f&&o.N_.set(u,f.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const f=o.N_.get(l);if(!f)return;o.N_.set(l,f.withResumeToken(rn.EMPTY_BYTE_STRING,f.snapshotVersion)),MM(o,l);const c=new po(f.target,l,u,f.sequenceNumber);Wx(o,c)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){he("RemoteStore","Failed to raise snapshot:",r),await Op(t,r)}}async function Op(t,e,n){if(!th(e))throw e;t.L_.add(1),await ih(t),t.q_.set("Offline"),n||(n=()=>OM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Cg(t)})}function jM(t,e){return e().catch(n=>Op(t,n,e))}async function Og(t){const e=Se(t),n=jo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;a9(e);)try{const i=await W5(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,l9(e,i)}catch(i){await Op(e,i)}LM(e)&&$M(e)}function a9(t){return Xs(t)&&t.O_.length<10}function l9(t,e){t.O_.push(e);const n=jo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LM(t){return Xs(t)&&!jo(t).n_()&&t.O_.length>0}function $M(t){jo(t).start()}async function u9(t){jo(t).p_()}async function c9(t){const e=jo(t);for(const n of t.O_)e.m_(n.mutations)}async function f9(t,e,n){const r=t.O_.shift(),i=Lx.from(r,e,n);await jM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Og(t)}async function h9(t,e){e&&jo(t).V_&&await async function(r,i){if(function(s){return e5(s)&&s!==J.ABORTED}(i.code)){const o=r.O_.shift();jo(r).s_(),await jM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Og(r)}}(t,e),LM(t)&&$M(t)}async function QA(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=Xs(n);n.L_.add(3),await ih(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Cg(n)}async function d9(t,e){const n=Se(t);e?(n.L_.delete(2),await Cg(n)):e||(n.L_.add(2),await ih(n),n.q_.set("Unknown"))}function Jl(t){return t.K_||(t.K_=function(n,r,i){const o=Se(n);return o.w_(),new J5(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:r9.bind(null,t),Ro:i9.bind(null,t),mo:o9.bind(null,t),d_:s9.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Hx(t)?Gx(t):t.q_.set("Unknown")):(await t.K_.stop(),DM(t))})),t.K_}function jo(t){return t.U_||(t.U_=function(n,r,i){const o=Se(n);return o.w_(),new Z5(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:u9.bind(null,t),mo:h9.bind(null,t),f_:c9.bind(null,t),g_:f9.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Og(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new qx(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kx(t,e){if(Li("AsyncQueue",`${e}: ${t}`),th(t))return new pe(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=ic(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new za(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.W_=new Ct(ge.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ml{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ml(e,n,za.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class m9{constructor(){this.queries=JA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Se(n),o=i.queries;i.queries=JA(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new pe(J.ABORTED,"Firestore shutting down"))}}function JA(){return new Xl(t=>sM(t),Eg)}async function Yx(t,e){const n=Se(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new p9,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=Kx(s,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Xx(n)}async function Qx(t,e){const n=Se(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function g9(t,e){const n=Se(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Xx(n)}function y9(t,e,n){const r=Se(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function Xx(t){t.Y_.forEach(e=>{e.next()})}var L_,ZA;(ZA=L_||(L_={})).ea="default",ZA.Cache="cache";class Jx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==L_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.key=e}}class VM{constructor(e){this.key=e}}class v9{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=aM(e),this.Ra=new za(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new XA,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,c)=>{const d=i.get(f),p=Sg(this.query,c)?c:null,m=!!d&&this.mutatedKeys.has(d.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;d&&p?d.data.isEqual(p.data)?m!==g&&(r.track({type:3,doc:p}),v=!0):this.ga(d,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.Aa(p,l)>0||u&&this.Aa(p,u)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),v=!0):d&&!p&&(r.track({type:1,doc:d}),v=!0,(l||u)&&(a=!0)),v&&(p?(s=s.add(p),o=g?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((f,c)=>function(p,m){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return g(p)-g(m)}(f.type,c.type)||this.Aa(f.doc,c.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new ml(this.query,e.Ra,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new XA,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new VM(r))}),this.da.forEach(r=>{e.has(r)||n.push(new FM(r))}),n}ba(e){this.Ta=e.Ts,this.da=Re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ml.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class w9{constructor(e){this.key=e,this.va=!1}}class b9{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Xl(a=>sM(a),Eg),this.Ma=new Map,this.xa=new Set,this.Oa=new Ct(ge.comparator),this.Na=new Map,this.La=new Vx,this.Ba={},this.ka=new Map,this.qa=pl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function x9(t,e,n=!0){const r=HM(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await UM(r,e,n,!0),i}async function E9(t,e){const n=HM(t);await UM(n,e,!0,!1)}async function UM(t,e,n,r){const i=await G5(t.localStore,Yr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await S9(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&RM(t.remoteStore,i),a}async function S9(t,e,n,r,i){t.Ka=(c,d,p)=>async function(g,v,_,w){let E=v.view.ma(_);E.ns&&(E=await qA(g.localStore,v.query,!1).then(({documents:b})=>v.view.ma(b,E)));const C=w&&w.targetChanges.get(v.targetId),T=w&&w.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(E,g.isPrimaryClient,C,T);return tI(g,v.targetId,I.wa),I.snapshot}(t,c,d,p);const o=await qA(t.localStore,e,!0),s=new v9(e,o.Ts),a=s.ma(o.documents),l=rh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);tI(t,n,u.wa);const f=new _9(e,n,s);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function T9(t,e,n){const r=Se(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Eg(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await j_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zx(r.remoteStore,i.targetId),$_(r,i.targetId)}).catch(eh)):($_(r,i.targetId),await j_(r.localStore,i.targetId,!0))}async function A9(t,e){const n=Se(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zx(n.remoteStore,r.targetId))}async function I9(t,e,n){const r=M9(t);try{const i=await function(s,a){const l=Se(s),u=jt.now(),f=a.reduce((p,m)=>p.add(m.key),Re());let c,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=$i(),g=Re();return l.cs.getEntries(p,f).next(v=>{m=v,m.forEach((_,w)=>{w.isValidDocument()||(g=g.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(v=>{c=v;const _=[];for(const w of a){const E=Y6(w,c.get(w.key).overlayedDocument);E!=null&&_.push(new zo(w.key,E,Z2(E.value.mapValue),Dr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,_,a)}).next(v=>{d=v;const _=v.applyToLocalDocumentSet(c,g);return l.documentOverlayCache.saveOverlays(p,v.batchId,_)})}).then(()=>({batchId:d.batchId,changes:uM(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new Ct(Ve)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,n),await oh(r,i.changes),await Og(r.remoteStore)}catch(i){const o=Kx(i,"Failed to persist write");n.reject(o)}}async function BM(t,e){const n=Se(t);try{const r=await B5(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ge(s.va):i.removedDocuments.size>0&&(Ge(s.va),s.va=!1))}),await oh(n,r,e)}catch(r){await eh(r)}}function eI(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Se(s);l.onlineState=a;let u=!1;l.queries.forEach((f,c)=>{for(const d of c.j_)d.Z_(a)&&(u=!0)}),u&&Xx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P9(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ct(ge.comparator);s=s.insert(o,pn.newNoDocument(o,Ee.min()));const a=Re().add(o),l=new Ig(Ee.min(),new Map,new Ct(Ve),s,a);await BM(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),Zx(r)}else await j_(r.localStore,e,!1).then(()=>$_(r,e,n)).catch(eh)}async function C9(t,e){const n=Se(t),r=e.batch.batchId;try{const i=await U5(n.localStore,e);WM(n,r,null),zM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oh(n,i)}catch(i){await eh(i)}}async function O9(t,e,n){const r=Se(t);try{const i=await function(s,a){const l=Se(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(c=>(Ge(c!==null),f=c.keys(),l.mutationQueue.removeMutationBatch(u,c))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,e);WM(r,e,n),zM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oh(r,i)}catch(i){await eh(i)}}function zM(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function WM(t,e,n){const r=Se(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function $_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||GM(t,r)})}function GM(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(zx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Zx(t))}function tI(t,e,n){for(const r of n)r instanceof FM?(t.La.addReference(r.key,e),k9(t,r)):r instanceof VM?(he("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||GM(t,r.key)):be()}function k9(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(he("SyncEngine","New document in limbo: "+n),t.xa.add(r),Zx(t))}function Zx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(ut.fromString(e)),r=t.qa.next();t.Na.set(r,new w9(n)),t.Oa=t.Oa.insert(n,r),RM(t.remoteStore,new po(Yr(xg(n.path)),r,"TargetPurposeLimboResolution",Cx.oe))}}async function oh(t,e,n){const r=Se(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(u=>{var f;if((u||n)&&r.isPrimaryClient){const c=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,c?"current":"not-current")}if(u){i.push(u);const c=Bx.Wi(l.targetId,u);o.push(c)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,u){const f=Se(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>Z.forEach(u,d=>Z.forEach(d.$i,p=>f.persistence.referenceDelegate.addReference(c,d.targetId,p)).next(()=>Z.forEach(d.Ui,p=>f.persistence.referenceDelegate.removeReference(c,d.targetId,p)))))}catch(c){if(!th(c))throw c;he("LocalStore","Failed to update sequence numbers: "+c)}for(const c of u){const d=c.targetId;if(!c.fromCache){const p=f.os.get(d),m=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(m);f.os=f.os.insert(d,g)}}}(r.localStore,o))}async function N9(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=await CM(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new pe(J.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oh(n,r.hs)}}function R9(t,e){const n=Se(t),r=n.Na.get(e);if(r&&r.va)return Re().add(r.key);{let i=Re();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function HM(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P9.bind(null,e),e.Ca.d_=g9.bind(null,e.eventManager),e.Ca.$a=y9.bind(null,e.eventManager),e}function M9(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O9.bind(null,e),e}class kp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return V5(this.persistence,new $5,e.initialUser,this.serializer)}Ga(e){return new D5(Ux.Zr,this.serializer)}Wa(e){return new q5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kp.provider={build:()=>new kp};class F_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N9.bind(null,this.syncEngine),await d9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m9}()}createDatastore(e){const n=Pg(e.databaseInfo.databaseId),r=function(o){return new X5(o)}(e.databaseInfo);return function(o,s,a,l){return new e9(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new n9(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>eI(this.syncEngine,n,0),function(){return YA.D()?new YA:new K5}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,f){const c=new b9(i,o,s,a,l,u);return f&&(c.Qa=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Se(i);he("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ih(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}F_.provider={build:()=>new F_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=Q2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{he("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(he("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fv(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j9(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>QA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>QA(e.remoteStore,i)),t._onlineComponents=e}async function j9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;cl("Error using user provided cache. Falling back to memory cache: "+n),await Fv(t,new kp)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Fv(t,new kp);return t._offlineComponents}async function qM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await nI(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await nI(t,new F_))),t._onlineComponents}function L9(t){return qM(t).then(e=>e.syncEngine)}async function Np(t){const e=await qM(t),n=e.eventManager;return n.onListen=x9.bind(null,e.syncEngine),n.onUnlisten=T9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=E9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A9.bind(null,e.syncEngine),n}function $9(t,e,n={}){const r=new Ai;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const f=new e1({next:d=>{f.Za(),s.enqueueAndForget(()=>Qx(o,c));const p=d.docs.has(a);!p&&d.fromCache?u.reject(new pe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?u.reject(new pe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),c=new Jx(xg(a.path),f,{includeMetadataChanges:!0,_a:!0});return Yx(o,c)}(await Np(t),t.asyncQueue,e,n,r)),r.promise}function F9(t,e,n={}){const r=new Ai;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const f=new e1({next:d=>{f.Za(),s.enqueueAndForget(()=>Qx(o,c)),d.fromCache&&l.source==="server"?u.reject(new pe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),c=new Jx(a,f,{includeMetadataChanges:!0,_a:!0});return Yx(o,c)}(await Np(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e,n){if(!n)throw new pe(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function V9(t,e,n,r){if(e===!0&&r===!0)throw new pe(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iI(t){if(!ge.isDocumentKey(t))throw new pe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oI(t){if(ge.isDocumentKey(t))throw new pe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function t1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=t1(t);throw new pe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new r6;switch(r.type){case"firstParty":return new a6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rI.get(n);r&&(he("ComponentProvider","Removing Datastore"),rI.delete(n),r.terminate())}(this),Promise.resolve()}}function U9(t,e,n,r={}){var i;const o=(t=cr(t,kg))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=hn.MOCK_USER;else{a=M2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new pe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new hn(u)}t._authCredentials=new i6(new Y2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sh(this.firestore,e,this._query)}}class Fn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class Io extends sh{constructor(e,n,r){super(e,n,xg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new ge(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function br(t,e,...n){if(t=mt(t),YM("collection","path",e),t instanceof kg){const r=ut.fromString(e,...n);return oI(r),new Io(t,null,r)}{if(!(t instanceof Fn||t instanceof Io))throw new pe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return oI(r),new Io(t.firestore,null,r)}}function Cn(t,e,...n){if(t=mt(t),arguments.length===1&&(e=Q2.newId()),YM("doc","path",e),t instanceof kg){const r=ut.fromString(e,...n);return iI(r),new Fn(t,null,new ge(r))}{if(!(t instanceof Fn||t instanceof Io))throw new pe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return iI(r),new Fn(t.firestore,t instanceof Io?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kM(this,"async_queue_retry"),this.Vu=()=>{const r=$v();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$v();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$v();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ai;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!th(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Li("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=qx.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function lI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Lo extends kg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new aI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aI(e),this._firestoreClient=void 0,await e}}}function B9(t,e){const n=typeof t=="object"?t:Ix(),r=typeof t=="string"?t:e||"(default)",i=_g(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=k2("firestore");o&&U9(i,...o)}return i}function Ng(t){if(t._terminated)throw new pe(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z9(t),t._firestoreClient}function z9(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,u,f){return new w6(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,KM(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new D9(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(rn.fromBase64String(e))}catch(n){throw new pe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gl(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=/^__.*__$/;class G9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zo(e,this.data,this.fieldMask,n,this.fieldTransforms):new nh(e,this.data,n,this.fieldTransforms)}}class QM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class i1{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new i1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(XM(this.Cu)&&W9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class H9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pg(e)}Qu(e,n,r,i=!1){return new i1({Cu:e,methodName:n,qu:r,path:Jt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JM(t){const e=t._freezeSettings(),n=Pg(t._databaseId);return new H9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function q9(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);s1("Data must be an object, but it was:",s,r);const a=ZM(r,s);let l,u;if(o.merge)l=new Yn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const c of o.mergeFields){const d=V_(e,c,n);if(!s.contains(d))throw new pe(J.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);tD(f,d)||f.push(d)}l=new Yn(f),u=s.fieldTransforms.filter(c=>l.covers(c.field))}else l=null,u=s.fieldTransforms;return new G9(new kn(a),l,u)}class Dg extends Mg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dg}}class o1 extends Mg{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new nf(e.serializer,hM(e.serializer,this.$u));return new G6(e.path,n)}isEqual(e){return e instanceof o1&&this.$u===e.$u}}function K9(t,e,n,r){const i=t.Qu(1,e,n);s1("Data must be an object, but it was:",i,r);const o=[],s=kn.empty();Qs(r,(l,u)=>{const f=a1(e,l,n);u=mt(u);const c=i.Nu(f);if(u instanceof Dg)o.push(f);else{const d=jg(u,c);d!=null&&(o.push(f),s.set(f,d))}});const a=new Yn(o);return new QM(s,a,i.fieldTransforms)}function Y9(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[V_(e,r,n)],l=[i];if(o.length%2!=0)throw new pe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(V_(e,o[d])),l.push(o[d+1]);const u=[],f=kn.empty();for(let d=a.length-1;d>=0;--d)if(!tD(u,a[d])){const p=a[d];let m=l[d];m=mt(m);const g=s.Nu(p);if(m instanceof Dg)u.push(p);else{const v=jg(m,g);v!=null&&(u.push(p),f.set(p,v))}}const c=new Yn(u);return new QM(f,c,s.fieldTransforms)}function jg(t,e){if(eD(t=mt(t)))return s1("Unsupported field value:",e,t),ZM(t,e);if(t instanceof Mg)return function(r,i){if(!XM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=jg(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=jt.fromDate(r);return{timestampValue:Cp(i.serializer,o)}}if(r instanceof jt){const o=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cp(i.serializer,o)}}if(r instanceof n1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gl)return{bytesValue:xM(i.serializer,r._byteString)};if(r instanceof Fn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Fx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof r1)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Dx(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${t1(r)}`)}(t,e)}function ZM(t,e){const n={};return X2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(t,(r,i)=>{const o=jg(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function eD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof n1||t instanceof gl||t instanceof Fn||t instanceof Mg||t instanceof r1)}function s1(t,e,n){if(!eD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=t1(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function V_(t,e,n){if((e=mt(e))instanceof Rg)return e._internalPath;if(typeof e=="string")return a1(t,e);throw Rp("Field path arguments must be of type string or ",t,!1,void 0,n)}const Q9=new RegExp("[~\\*/\\[\\]]");function a1(t,e,n){if(e.search(Q9)>=0)throw Rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rg(...e.split("."))._internalPath}catch{throw Rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rp(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new pe(J.INVALID_ARGUMENT,a+t+l)}function tD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rD("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class X9 extends nD{data(){return super.data()}}function rD(t,e){return typeof e=="string"?a1(t,e):e instanceof Rg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J9{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qs(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>wt(s.doubleValue));return new r1(o)}convertGeoPoint(e){return new n1(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const n=Do(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ut.fromString(e);Ge(PM(r));const i=new Jc(r.get(1),r.get(3)),o=new ge(r.popFirst(5));return i.isEqual(n)||Li(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oD extends nD{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Wd extends oD{data(e={}){return super.data(e)}}class sD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new sc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wd(this._firestore,this._userDataWriter,r.key,r,new sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new Wd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Wd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:ez(a.type),doc:l,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ez(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(t){t=cr(t,Fn);const e=cr(t.firestore,Lo);return $9(Ng(e),t._key).then(n=>aD(e,t,n))}class l1 extends J9{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,n)}}function uI(t){t=cr(t,sh);const e=cr(t.firestore,Lo),n=Ng(e),r=new l1(e);return iD(t._query),F9(n,t._query).then(i=>new sD(e,r,t,i))}function is(t,e,n,...r){t=cr(t,Fn);const i=cr(t.firestore,Lo),o=JM(i);let s;return s=typeof(e=mt(e))=="string"||e instanceof Rg?Y9(o,"updateDoc",t._key,e,n,r):K9(o,"updateDoc",t._key,e),u1(i,[s.toMutation(t._key,Dr.exists(!0))])}function cd(t){return u1(cr(t.firestore,Lo),[new jx(t._key,Dr.none())])}function $u(t,e){const n=cr(t.firestore,Lo),r=Cn(t),i=Z9(t.converter,e);return u1(n,[q9(JM(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}function ka(t,...e){var n,r,i;t=mt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||lI(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lI(e[s])){const c=e[s];e[s]=(n=c.next)===null||n===void 0?void 0:n.bind(c),e[s+1]=(r=c.error)===null||r===void 0?void 0:r.bind(c),e[s+2]=(i=c.complete)===null||i===void 0?void 0:i.bind(c)}let l,u,f;if(t instanceof Fn)u=cr(t.firestore,Lo),f=xg(t._key.path),l={next:c=>{e[s]&&e[s](aD(u,t,c))},error:e[s+1],complete:e[s+2]};else{const c=cr(t,sh);u=cr(c.firestore,Lo),f=c._query;const d=new l1(u);l={next:p=>{e[s]&&e[s](new sD(u,d,c,p))},error:e[s+1],complete:e[s+2]},iD(t._query)}return function(d,p,m,g){const v=new e1(g),_=new Jx(p,v,m);return d.asyncQueue.enqueueAndForget(async()=>Yx(await Np(d),_)),()=>{v.Za(),d.asyncQueue.enqueueAndForget(async()=>Qx(await Np(d),_))}}(Ng(u),f,a,l)}function u1(t,e){return function(r,i){const o=new Ai;return r.asyncQueue.enqueueAndForget(async()=>I9(await L9(r),i,o)),o.promise}(Ng(t),e)}function aD(t,e,n){const r=n.docs.get(e._key),i=new l1(t);return new oD(t,i,e._key,r,new sc(n.hasPendingWrites,n.fromCache),e.converter)}function Zo(t){return new o1("increment",t)}(function(e,n=!0){(function(i){Ql=i})(Ys),Rs(new Ro("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Lo(new o6(r.getProvider("auth-internal")),new u6(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new pe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(u.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Kr(AA,"4.7.3",e),Kr(AA,"4.7.3","esm2017")})();function c1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function lD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nz=lD,uD=new Zf("auth","Firebase",lD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new vg("@firebase/auth");function rz(t,...e){Mp.logLevel<=Ne.WARN&&Mp.warn(`Auth (${Ys}): ${t}`,...e)}function Gd(t,...e){Mp.logLevel<=Ne.ERROR&&Mp.error(`Auth (${Ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t,...e){throw h1(t,...e)}function jr(t,...e){return h1(t,...e)}function f1(t,e,n){const r=Object.assign(Object.assign({},nz()),{[e]:n});return new Zf("auth","Firebase",r).create(e,{appName:t.name})}function Es(t){return f1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iz(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ni(t,"argument-error"),f1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function h1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uD.create(t,...e)}function we(t,e,...n){if(!t)throw h1(e,...n)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gd(e),new Error(e)}function Fi(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oz(){return cI()==="http:"||cI()==="https:"}function cI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oz()||RU()||"connection"in navigator)?navigator.onLine:!0}function az(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fi(n>e,"Short delay should be less than long delay!"),this.isMobile=Tx()||D2()}get(){return sz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e){Fi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=new ah(3e4,6e4);function p1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zl(t,e,n,r,i={}){return fD(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Yl(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},o);return NU()||(u.referrerPolicy="no-referrer"),cD.fetch()(hD(t,t.config.apiHost,n,a),u)})}async function fD(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lz),e);try{const i=new fz(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw fd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw fd(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw fd(t,"user-disabled",s);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw f1(t,f,u);ni(t,f)}}catch(i){if(i instanceof Hi)throw i;ni(t,"network-request-failed",{message:String(i)})}}async function cz(t,e,n,r,i={}){const o=await Zl(t,e,n,r,i);return"mfaPendingCredential"in o&&ni(t,"multi-factor-auth-required",{_serverResponse:o}),o}function hD(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?d1(t.config,i):`${t.config.apiScheme}://${i}`}class fz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jr(this.auth,"network-request-failed")),uz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hz(t,e){return Zl(t,"POST","/v1/accounts:delete",e)}async function dD(t,e){return Zl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dz(t,e=!1){const n=mt(t),r=await n.getIdToken(e),i=m1(r);we(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:bc(Vv(i.auth_time)),issuedAtTime:bc(Vv(i.iat)),expirationTime:bc(Vv(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vv(t){return Number(t)*1e3}function m1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gd("JWT malformed, contained fewer than 3 sections"),null;try{const i=wp(n);return i?JSON.parse(i):(Gd("Failed to decode base64 JWT payload"),null)}catch(i){return Gd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fI(t){const e=m1(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hi&&pz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await rf(t,dD(n,{idToken:r}));we(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?pD(o.providerUserInfo):[],a=yz(t.providerData,s),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,c={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new B_(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,c)}async function gz(t){const e=mt(t);await Dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pD(t){return t.map(e=>{var{providerId:n}=e,r=c1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vz(t,e){const n=await fD(t,{},async()=>{const r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=hD(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",cD.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _z(t,e){return Zl(t,"POST","/v2/accounts:revokeToken",p1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=fI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await vz(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Wa;return r&&(we(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(we(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(we(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _i{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=c1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new B_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await rf(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dz(this,e)}reload(){return gz(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yi(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await rf(this,hz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,f;const c=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,p=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:C,isAnonymous:T,providerData:I,stsTokenManager:b}=n;we(E&&b,e,"internal-error");const S=Wa.fromJSON(this.name,b);we(typeof E=="string",e,"internal-error"),to(c,e.name),to(d,e.name),we(typeof C=="boolean",e,"internal-error"),we(typeof T=="boolean",e,"internal-error"),to(p,e.name),to(m,e.name),to(g,e.name),to(v,e.name),to(_,e.name),to(w,e.name);const P=new _i({uid:E,auth:e,email:d,emailVerified:C,displayName:c,isAnonymous:T,photoURL:m,phoneNumber:p,tenantId:g,stsTokenManager:S,createdAt:_,lastLoginAt:w});return I&&Array.isArray(I)&&(P.providerData=I.map(O=>Object.assign({},O))),v&&(P._redirectEventId=v),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Wa;i.updateFromServerResponse(n);const o=new _i({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Dp(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];we(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?pD(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Wa;a.updateFromIdToken(r);const l=new _i({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new B_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new Map;function wi(t){Fi(t instanceof Function,"Expected a class definition");let e=hI.get(t);return e?(Fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mD.type="NONE";const dI=mD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e,n){return`firebase:${t}:${e}:${n}`}class Ga{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Hd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Hd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_i._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ga(wi(dI),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||wi(dI);const s=Hd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(s);if(f){const c=_i._fromJSON(e,f);u!==o&&(a=c),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Ga(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new Ga(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_D(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bD(e))return"Blackberry";if(xD(e))return"Webos";if(yD(e))return"Safari";if((e.includes("chrome/")||vD(e))&&!e.includes("edge/"))return"Chrome";if(wD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gD(t=vn()){return/firefox\//i.test(t)}function yD(t=vn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vD(t=vn()){return/crios\//i.test(t)}function _D(t=vn()){return/iemobile/i.test(t)}function wD(t=vn()){return/android/i.test(t)}function bD(t=vn()){return/blackberry/i.test(t)}function xD(t=vn()){return/webos/i.test(t)}function g1(t=vn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wz(t=vn()){var e;return g1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bz(){return MU()&&document.documentMode===10}function ED(t=vn()){return g1(t)||wD(t)||xD(t)||bD(t)||/windows phone/i.test(t)||_D(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t,e=[]){let n;switch(t){case"Browser":n=pI(vn());break;case"Worker":n=`${pI(vn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ez(t,e={}){return Zl(t,"GET","/v2/passwordPolicy",p1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz=6;class Tz{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Sz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mI(this),this.idTokenSubscription=new mI(this),this.beforeStateQueue=new xz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ga.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dD(this,{idToken:e}),r=await _i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yi(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=az()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yi(this.app))return Promise.reject(Es(this));const n=e?mt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yi(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yi(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ez(this),n=new Tz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _z(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rz(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lg(t){return mt(t)}class mI{constructor(e){this.auth=e,this.observer=null,this.addObserver=WU(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Iz(t){y1=t}function Pz(t){return y1.loadJS(t)}function Cz(){return y1.gapiScript}function Oz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kz(t,e){const n=_g(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ep(o,e??{}))return i;ni(i,"already-initialized")}return n.initialize({options:e})}function Nz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Rz(t,e,n){const r=Lg(t);we(r._canInitEmulator,r,"emulator-config-failed"),we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=TD(e),{host:s,port:a}=Mz(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Dz()}function TD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Mz(t){const e=TD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:gI(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:gI(s)}}}function gI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,n){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e){return cz(t,"POST","/v1/accounts:signInWithIdp",p1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz="http://localhost";class Ls extends AD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ni("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=c1(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Ls(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Ha(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ha(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ha(e,n)}buildRequest(){const e={requestUri:jz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends v1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends lh{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends lh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ls._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends lh{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends lh{constructor(){super("twitter.com")}static credential(e,n){return Ls._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return uo.credential(n,r)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await _i._fromIdTokenResponse(e,r,i),s=yI(r);return new yl({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yI(r);return new yl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Hi{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new jp(e,n,r,i)}}function ID(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(t,o,e,r):o})}async function Lz(t,e,n=!1){const r=await rf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return yl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t,e,n=!1){const{auth:r}=t;if(yi(r.app))return Promise.reject(Es(r));const i="reauthenticate";try{const o=await rf(t,ID(r,i,e,t),n);we(o.idToken,r,"internal-error");const s=m1(o.idToken);we(s,r,"internal-error");const{sub:a}=s;return we(t.uid===a,r,"user-mismatch"),yl._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ni(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fz(t,e,n=!1){if(yi(t.app))return Promise.reject(Es(t));const r="signIn",i=await ID(t,r,e),o=await yl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function Vz(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function Uz(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function Bz(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function zz(t){return mt(t).signOut()}const Lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lp,"1"),this.storage.removeItem(Lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=1e3,Gz=10;class CD extends PD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ED(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);bz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Gz):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Wz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CD.type="LOCAL";const Hz=CD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD extends PD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OD.type="SESSION";const kD=OD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new $g(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),l=await qz(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$g.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=_1("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(c){const d=c;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(f),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function Yz(t){Xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function Qz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jz(){return ND()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="firebaseLocalStorageDb",Zz=1,$p="firebaseLocalStorage",MD="fbase_key";class uh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fg(t,e){return t.transaction([$p],e?"readwrite":"readonly").objectStore($p)}function eW(){const t=indexedDB.deleteDatabase(RD);return new uh(t).toPromise()}function z_(){const t=indexedDB.open(RD,Zz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($p,{keyPath:MD})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($p)?e(r):(r.close(),await eW(),e(await z_()))})})}async function vI(t,e,n){const r=Fg(t,!0).put({[MD]:e,value:n});return new uh(r).toPromise()}async function tW(t,e){const n=Fg(t,!1).get(e),r=await new uh(n).toPromise();return r===void 0?null:r.value}function _I(t,e){const n=Fg(t,!0).delete(e);return new uh(n).toPromise()}const nW=800,rW=3;class DD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await z_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ND()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$g._getInstance(Jz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Qz(),!this.activeServiceWorker)return;this.sender=new Kz(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await z_();return await vI(e,Lp,"1"),await _I(e,Lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_I(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Fg(i,!1).getAll();return new uh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DD.type="LOCAL";const iW=DD;new ah(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){return e?wi(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends AD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oW(t){return Fz(t.auth,new w1(t),t.bypassAuthState)}function sW(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),$z(n,new w1(t),t.bypassAuthState)}async function aW(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),Lz(n,new w1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oW;case"linkViaPopup":case"linkViaRedirect":return aW;case"reauthViaPopup":case"reauthViaRedirect":return sW;default:ni(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW=new ah(2e3,1e4);async function uW(t,e,n){if(yi(t.app))return Promise.reject(jr(t,"operation-not-supported-in-this-environment"));const r=Lg(t);iz(t,e,v1);const i=jD(r,n);return new ds(r,"signInViaPopup",e,i).executeNotNull()}class ds extends LD{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ds.currentPopupAction&&ds.currentPopupAction.cancel(),ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=_1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lW.get())};e()}}ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW="pendingRedirect",qd=new Map;class fW extends LD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const r=await hW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hW(t,e){const n=mW(e),r=pW(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function dW(t,e){qd.set(t._key(),e)}function pW(t){return wi(t._redirectPersistence)}function mW(t){return Hd(cW,t.config.apiKey,t.name)}async function gW(t,e,n=!1){if(yi(t.app))return Promise.reject(Es(t));const r=Lg(t),i=jD(r,e),s=await new fW(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW=10*60*1e3;class vW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_W(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$D(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yW&&this.cachedEventUids.clear(),this.cachedEventUids.has(wI(e))}saveEventToCache(e){this.cachedEventUids.add(wI(e)),this.lastProcessedEventTime=Date.now()}}function wI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $D({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _W(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $D(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wW(t,e={}){return Zl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xW=/^https?/;async function EW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wW(t);for(const n of e)try{if(SW(n))return}catch{}ni(t,"unauthorized-domain")}function SW(t){const e=U_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!xW.test(n))return!1;if(bW.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TW=new ah(3e4,6e4);function bI(){const t=Xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AW(t){return new Promise((e,n)=>{var r,i,o;function s(){bI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bI(),n(jr(t,"network-request-failed"))},timeout:TW.get()})}if(!((i=(r=Xr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Xr().gapi)===null||o===void 0)&&o.load)s();else{const a=Oz("iframefcb");return Xr()[a]=()=>{gapi.load?s():n(jr(t,"network-request-failed"))},Pz(`${Cz()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Kd=null,e})}let Kd=null;function IW(t){return Kd=Kd||AW(t),Kd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=new ah(5e3,15e3),CW="__/auth/iframe",OW="emulator/auth/iframe",kW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RW(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?d1(e,OW):`https://${t.config.authDomain}/${CW}`,r={apiKey:e.apiKey,appName:t.name,v:Ys},i=NW.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Yl(r).slice(1)}`}async function MW(t){const e=await IW(t),n=Xr().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:RW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kW,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=jr(t,"network-request-failed"),a=Xr().setTimeout(()=>{o(s)},PW.get());function l(){Xr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jW=500,LW=600,$W="_blank",FW="http://localhost";class xI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VW(t,e,n,r=jW,i=LW){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},DW),{width:r.toString(),height:i.toString(),top:o,left:s}),u=vn().toLowerCase();n&&(a=vD(u)?$W:n),gD(u)&&(e=e||FW,l.scrollbars="yes");const f=Object.entries(l).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(wz(u)&&a!=="_self")return UW(e||"",a),new xI(null);const c=window.open(e||"",a,f);we(c,t,"popup-blocked");try{c.focus()}catch{}return new xI(c)}function UW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BW="__/auth/handler",zW="emulator/auth/handler",WW=encodeURIComponent("fac");async function EI(t,e,n,r,i,o){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ys,eventId:i};if(e instanceof v1){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",bp(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,c]of Object.entries(o||{}))s[f]=c}if(e instanceof lh){const f=e.getScopes().filter(c=>c!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),u=l?`#${WW}=${encodeURIComponent(l)}`:"";return`${GW(t)}?${Yl(a).slice(1)}${u}`}function GW({config:t}){return t.emulator?d1(t,zW):`https://${t.authDomain}/${BW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="webStorageSupport";class HW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kD,this._completeRedirectFn=gW,this._overrideRedirectResult=dW}async _openPopup(e,n,r,i){var o;Fi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await EI(e,n,r,U_(),i);return VW(e,s,_1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await EI(e,n,r,U_(),i);return Yz(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Fi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MW(e),r=new vW(e);return n.register("authEvent",i=>(we(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Uv,{type:Uv},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Uv];s!==void 0&&n(!!s),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ED()||yD()||g1()}}const qW=HW;var SI="@firebase/auth",TI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QW(t){Rs(new Ro("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;we(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SD(t)},u=new Az(r,i,o,l);return Nz(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new Ro("auth-internal",e=>{const n=Lg(e.getProvider("auth").getImmediate());return(r=>new KW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(SI,TI,YW(t)),Kr(SI,TI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW=5*60,JW=R2("authIdTokenMaxAge")||XW;let AI=null;const ZW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JW)return;const i=n==null?void 0:n.token;AI!==i&&(AI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function e8(t=Ix()){const e=_g(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kz(t,{popupRedirectResolver:qW,persistence:[iW,Hz,kD]}),r=R2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=ZW(o.toString());Uz(n,s,()=>s(n.currentUser)),Vz(n,a=>s(a))}}const i=O2("auth");return i&&Rz(n,`http://${i}`),n}function t8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Iz({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=jr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",t8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QW("Browser");const II="@firebase/database",PI="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FD="";function n8(t){FD=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Kc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ii(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r8(e)}}catch{}return new i8},ps=VD("localStorage"),W_=VD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new vg("@firebase/database"),o8=function(){let t=1;return function(){return t++}}(),UD=function(t){const e=qU(t),n=new zU;n.update(e);const r=n.digest();return Sx.encodeByteArray(r)},ch=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ch.apply(null,r):typeof r=="object"?e+=zt(r):e+=r,e+=" "}return e};let Ss=null,CI=!0;const s8=function(t,e){ne(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(qa.logLevel=Ne.VERBOSE,Ss=qa.log.bind(qa),e&&W_.set("logging_enabled",!0)):typeof t=="function"?Ss=t:(Ss=null,W_.remove("logging_enabled"))},Xt=function(...t){if(CI===!0&&(CI=!1,Ss===null&&W_.get("logging_enabled")===!0&&s8(!0)),Ss){const e=ch.apply(null,t);Ss(e)}},fh=function(t){return function(...e){Xt(t,...e)}},G_=function(...t){const e="FIREBASE INTERNAL ERROR: "+ch(...t);qa.error(e)},Vi=function(...t){const e=`FIREBASE FATAL ERROR: ${ch(...t)}`;throw qa.error(e),new Error(e)},Vn=function(...t){const e="FIREBASE WARNING: "+ch(...t);qa.warn(e)},a8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Vg=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},l8=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vl="[MIN_NAME]",$s="[MAX_NAME]",Js=function(t,e){if(t===e)return 0;if(t===vl||e===$s)return-1;if(e===vl||t===$s)return 1;{const n=OI(t),r=OI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},u8=function(t,e){return t===e?0:t<e?-1:1},Fu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+zt(e))},b1=function(t){if(typeof t!="object"||t===null)return zt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=zt(e[r]),n+=":",n+=b1(t[e[r]]);return n+="}",n},BD=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function _n(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const zD=function(t){ne(!Vg(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,o,s,a,l;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const f=u.join("");let c="";for(l=0;l<64;l+=8){let d=parseInt(f.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},c8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},f8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function h8(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const d8=new RegExp("^-?(0*)\\d{1,10}$"),p8=-2147483648,m8=2147483647,OI=function(t){if(d8.test(t)){const e=Number(t);if(e>=p8&&e<=m8)return e}return null},eu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Vn("Exception was thrown by user callback.",n),e},Math.floor(0))}},g8=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(e)}}class Ka{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ka.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="5",WD="v",GD="s",HD="r",qD="f",KD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YD="ls",QD="p",H_="ac",XD="websocket",JD="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,i,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ps.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ps.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function _8(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ej(t,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let r;if(e===XD)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===JD)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);_8(t)&&(n.ns=t.namespace);const i=[];return _n(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.counters_={}}incrementCounter(e,n=1){ii(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return TU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv={},zv={};function E1(t){const e=t.toString();return Bv[e]||(Bv[e]=new w8),Bv[e]}function b8(t,e){const n=t.toString();return zv[n]||(zv[n]=e()),zv[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&eu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="start",E8="close",S8="pLPCommand",T8="pRTLPCB",tj="id",nj="pw",rj="ser",A8="cb",I8="seg",P8="ts",C8="d",O8="dframe",ij=1870,oj=30,k8=ij-oj,N8=25e3,R8=3e4;class Na{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fh(e),this.stats_=E1(n),this.urlFn=l=>(this.appCheckToken&&(l[H_]=this.appCheckToken),ej(n,JD,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new x8(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(R8)),l8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new S1((...o)=>{const[s,a,l,u,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===kI)this.id=a,this.password=l;else if(s===E8)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[kI]="t",r[rj]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[A8]=this.scriptTagHolder.uniqueCallbackIdentifier),r[WD]=x1,this.transportSessionId&&(r[GD]=this.transportSessionId),this.lastSessionId&&(r[YD]=this.lastSessionId),this.applicationId&&(r[QD]=this.applicationId),this.appCheckToken&&(r[H_]=this.appCheckToken),typeof location<"u"&&location.hostname&&KD.test(location.hostname)&&(r[HD]=qD);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Na.forceAllow_=!0}static forceDisallow(){Na.forceDisallow_=!0}static isAvailable(){return Na.forceAllow_?!0:!Na.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!c8()&&!f8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=zt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=P2(n),i=BD(r,k8);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[O8]="t",r[tj]=e,r[nj]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=zt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class S1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=o8(),window[S8+this.uniqueCallbackIdentifier]=e,window[T8+this.uniqueCallbackIdentifier]=n,this.myIFrame=S1.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Xt("frame writing exception"),a.stack&&Xt(a.stack),Xt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[tj]=this.myID,e[nj]=this.myPW,e[rj]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+oj+r.length<=ij;){const s=this.pendingSegs.shift();r=r+"&"+I8+i+"="+s.seg+"&"+P8+i+"="+s.ts+"&"+C8+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(N8)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=16384,D8=45e3;let Fp=null;typeof MozWebSocket<"u"?Fp=MozWebSocket:typeof WebSocket<"u"&&(Fp=WebSocket);class Cr{constructor(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fh(this.connId),this.stats_=E1(n),this.connURL=Cr.connectionURL_(n,s,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,o){const s={};return s[WD]=x1,typeof location<"u"&&location.hostname&&KD.test(location.hostname)&&(s[HD]=qD),n&&(s[GD]=n),r&&(s[YD]=r),i&&(s[H_]=i),o&&(s[QD]=o),ej(e,XD,s)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ps.set("previous_websocket_failure",!0);try{let r;j2(),this.mySock=new Fp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Cr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Fp!==null&&!Cr.forceDisallow_}static previouslyFailed(){return ps.isInMemoryStorage||ps.get("previous_websocket_failure")===!0}markConnectionHealthy(){ps.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Kc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=zt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=BD(n,M8);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(D8))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Cr.responsesRequiredToBeHealthy=2;Cr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Na,Cr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Cr&&Cr.isAvailable();let r=n&&!Cr.previouslyFailed();if(e.webSocketOnly&&(n||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Cr];else{const i=this.transports_=[];for(const o of of.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);of.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}of.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=6e4,L8=5e3,$8=10*1024,F8=100*1024,Wv="t",NI="d",V8="s",RI="r",U8="e",MI="o",DI="a",jI="n",LI="p",B8="h";class z8{constructor(e,n,r,i,o,s,a,l,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fh("c:"+this.id+":"),this.transportManager_=new of(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>F8?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$8?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wv in e){const n=e[Wv];n===DI?this.upgradeIfSecondaryHealthy_():n===RI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===MI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Fu("t",e),r=Fu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:LI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:DI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Fu("t",e),r=Fu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Fu(Wv,e);if(NI in e){const r=e[NI];if(n===B8){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===jI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===V8?this.onConnectionShutdown_(r):n===RI?this.onReset_(r):n===U8?G_("Server Error: "+r):n===MI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):G_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),x1!==r&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),xc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(j8))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(L8))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:LI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aj=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends aj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Tx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Vp}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=32,FI=768;let He=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Be(){return new He("")}function Ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $o(t){return t.pieces_.length-t.pieceNum_}function Qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new He(t.pieces_,e)}function T1(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function W8(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function sf(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function lj(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new He(e,0)}function xt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof He)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new He(n,0)}function Pe(t){return t.pieceNum_>=t.pieces_.length}function Rn(t,e){const n=Ae(t),r=Ae(e);if(n===null)return e;if(n===r)return Rn(Qe(t),Qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function G8(t,e){const n=sf(t,0),r=sf(e,0);for(let i=0;i<n.length&&i<r.length;i++){const o=Js(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function A1(t,e){if($o(t)!==$o(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ar(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($o(t)>$o(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class H8{constructor(e,n){this.errorPrefix_=n,this.parts_=sf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=yg(this.parts_[r]);uj(this)}}function q8(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=yg(e),uj(t)}function K8(t){const e=t.parts_.pop();t.byteLength_-=yg(e),t.parts_.length>0&&(t.byteLength_-=1)}function uj(t){if(t.byteLength_>FI)throw new Error(t.errorPrefix_+"has a key path longer than "+FI+" bytes ("+t.byteLength_+").");if(t.parts_.length>$I)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$I+") or object contains a cycle "+os(t))}function os(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends aj{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new I1}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=1e3,Y8=60*5*1e3,VI=30*1e3,Q8=1.3,X8=3e4,J8="server_kill",UI=3;class Ii extends sj{constructor(e,n,r,i,o,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ii.nextPersistentConnectionId_++,this.log_=fh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vu,this.maxReconnectDelay_=Y8,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!j2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");I1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,o={r:i,a:e,b:n};this.log_(zt(o)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new di,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const a=s.d;s.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,r,i){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const o={p:r},s="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,a=>{const l=a.d,u=a.s;Ii.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ii(e,"w")){const r=ll(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||BU(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=VI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=UU(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const o=i.s,s=i.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const o={p:e},s="n";i&&(o.q=r,o.t=i),this.sendRequest(s,o)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const o={p:n,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{i&&setTimeout(()=>{i(s.s,s.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,o){this.initConnection_();const s={p:n,d:r};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+zt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):G_("Unrecognized action received from server: "+zt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Vu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>X8&&(this.reconnectDelay_=Vu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Q8)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ii.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,r())},u=function(c){ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(c)};this.realtime_={close:l,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);s?Xt("getToken() completed but was canceled"):(Xt("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,a=new z8(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{Vn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(J8)},o))}catch(c){this.log_("Failed to get token: "+c),s||(this.repoInfo_.nodeAdmin&&Vn(c),l())}}}interrupt(e){Xt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bp(this.interruptReasons_)&&(this.reconnectDelay_=Vu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(o=>b1(o)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new He(e).toString();let i;if(this.listens.has(r)){const o=this.listens.get(r);i=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Xt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=UI&&(this.reconnectDelay_=VI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=UI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+FD.replace(/\./g,"-")]=1,Tx()?e["framework.cordova"]=1:D2()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vp.getInstance().currentlyOnline();return bp(this.interruptReasons_)&&e}}Ii.nextPersistentConnectionId_=0;Ii.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ce(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ce(vl,e),i=new Ce(vl,n);return this.compare(r,i)!==0}minPost(){return Ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd;class cj extends Ug{static get __EMPTY_NODE(){return hd}static set __EMPTY_NODE(e){hd=e}compare(e,n){return Js(e.name,n.name)}isDefinedOn(e){throw Kl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ce.MIN}maxPost(){return new Ce($s,hd)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ce(e,hd)}toString(){return".key"}}const Ya=new cj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Bt.RED,this.left=i??Mn.EMPTY_NODE,this.right=o??Mn.EMPTY_NODE}copy(e,n,r,i,o){return new Bt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Mn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Bt.RED=!0;Bt.BLACK=!1;class Z8{copy(e,n,r,i,o){return this}insert(e,n,r){return new Bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Mn{constructor(e,n=Mn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Mn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Bt.BLACK,null,null))}remove(e){return new Mn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Bt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new dd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new dd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new dd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new dd(this.root_,null,this.comparator_,!0,e)}}Mn.EMPTY_NODE=new Z8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eG(t,e){return Js(t.name,e.name)}function P1(t,e){return Js(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_;function tG(t){q_=t}const fj=function(t){return typeof t=="number"?"number:"+zD(t):"string:"+t},hj=function(t){if(t.isLeafNode()){const e=t.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ii(e,".sv"),"Priority must be a string or number.")}else ne(t===q_||t.isEmpty(),"priority of unexpected type.");ne(t===q_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BI;class $t{constructor(e,n=$t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hj(this.priorityNode_)}static set __childrenNodeConstructor(e){BI=e}static get __childrenNodeConstructor(){return BI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new $t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Pe(e)?this:Ae(e)===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:$t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ae(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ne(r!==".priority"||$o(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,$t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fj(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=zD(this.value_):e+=this.value_,this.lazyHash_=UD(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===$t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof $t.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=$t.VALUE_TYPE_ORDER.indexOf(n),o=$t.VALUE_TYPE_ORDER.indexOf(r);return ne(i>=0,"Unknown leaf type: "+n),ne(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}$t.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dj,pj;function nG(t){dj=t}function rG(t){pj=t}class iG extends Ug{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Js(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ce.MIN}maxPost(){return new Ce($s,new $t("[PRIORITY-POST]",pj))}makePost(e,n){const r=dj(e);return new Ce(n,new $t("[PRIORITY-POST]",r))}toString(){return".priority"}}const ht=new iG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG=Math.log(2);class sG{constructor(e){const n=o=>parseInt(Math.log(o)/oG,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Up=function(t,e,n,r){t.sort(e);const i=function(l,u){const f=u-l;let c,d;if(f===0)return null;if(f===1)return c=t[l],d=n?n(c):c,new Bt(d,c.node,Bt.BLACK,null,null);{const p=parseInt(f/2,10)+l,m=i(l,p),g=i(p+1,u);return c=t[p],d=n?n(c):c,new Bt(d,c.node,Bt.BLACK,m,g)}},o=function(l){let u=null,f=null,c=t.length;const d=function(m,g){const v=c-m,_=c;c-=m;const w=i(v+1,_),E=t[v],C=n?n(E):E;p(new Bt(C,E.node,g,null,w))},p=function(m){u?(u.left=m,u=m):(f=m,u=m)};for(let m=0;m<l.count;++m){const g=l.nextBitIsOne(),v=Math.pow(2,l.count-(m+1));g?d(v,Bt.BLACK):(d(v,Bt.BLACK),d(v,Bt.RED))}return f},s=new sG(t.length),a=o(s);return new Mn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gv;const fa={};class bi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ne(fa&&ht,"ChildrenNode.ts has not been loaded"),Gv=Gv||new bi({".priority":fa},{".priority":ht}),Gv}get(e){const n=ll(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Mn?n:null}hasIndex(e){return ii(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==Ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(Ce.Wrap);let s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Up(r,e.getCompare()):a=fa;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const f=Object.assign({},this.indexes_);return f[l]=a,new bi(f,u)}addToIndexes(e,n){const r=xp(this.indexes_,(i,o)=>{const s=ll(this.indexSet_,o);if(ne(s,"Missing index implementation for "+o),i===fa)if(s.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ce.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Up(a,s.getCompare())}else return fa;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ce(e.name,a))),l.insert(e,e.node)}});return new bi(r,this.indexSet_)}removeFromIndexes(e,n){const r=xp(this.indexes_,i=>{if(i===fa)return i;{const o=n.get(e.name);return o?i.remove(new Ce(e.name,o)):i}});return new bi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;class ve{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&hj(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Uu||(Uu=new ve(new Mn(P1),null,bi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uu}updatePriority(e){return this.children_.isEmpty()?this:new ve(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Uu:n}}getChild(e){const n=Ae(e);return n===null?this:this.getImmediateChild(n).getChild(Qe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ce(e,n);let i,o;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));const s=i.isEmpty()?Uu:this.priorityNode_;return new ve(i,s,o)}}updateChild(e,n){const r=Ae(e);if(r===null)return n;{ne(Ae(e)!==".priority"||$o(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Qe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,o=!0;if(this.forEachChild(ht,(s,a)=>{n[s]=a.val(e),r++,o&&ve.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){const s=[];for(const a in n)s[a]=n[a];return s}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fj(this.getPriority().val())+":"),this.forEachChild(ht,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":UD(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const o=i.getPredecessorKey(new Ce(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ce(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ce(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ce.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,e)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ce.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,e)>0;)i.getNext(),o=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hh?-1:0}withIndex(e){if(e===Ya||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ve(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ya||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ht),i=n.getIterator(ht);let o=r.getNext(),s=i.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=r.getNext(),s=i.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===Ya?null:this.indexMap_.get(e.toString())}}ve.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class aG extends ve{constructor(){super(new Mn(P1),ve.EMPTY_NODE,bi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ve.EMPTY_NODE}isEmpty(){return!1}}const hh=new aG;Object.defineProperties(Ce,{MIN:{value:new Ce(vl,ve.EMPTY_NODE)},MAX:{value:new Ce($s,hh)}});cj.__EMPTY_NODE=ve.EMPTY_NODE;$t.__childrenNodeConstructor=ve;tG(hh);rG(hh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG=!0;function At(t,e=null){if(t===null)return ve.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $t(n,At(e))}if(!(t instanceof Array)&&lG){const n=[];let r=!1;if(_n(t,(s,a)=>{if(s.substring(0,1)!=="."){const l=At(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ce(s,l)))}}),n.length===0)return ve.EMPTY_NODE;const o=Up(n,eG,s=>s.name,P1);if(r){const s=Up(n,ht.getCompare());return new ve(o,At(e),new bi({".priority":s},{".priority":ht}))}else return new ve(o,At(e),bi.Default)}else{let n=ve.EMPTY_NODE;return _n(t,(r,i)=>{if(ii(t,r)&&r.substring(0,1)!=="."){const o=At(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(At(e))}}nG(At);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG extends Ug{constructor(e){super(),this.indexPath_=e,ne(!Pe(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Js(e.name,n.name):o}makePost(e,n){const r=At(e),i=ve.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ce(n,i)}maxPost(){const e=ve.EMPTY_NODE.updateChild(this.indexPath_,hh);return new Ce($s,e)}toString(){return sf(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG extends Ug{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Js(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ce.MIN}maxPost(){return Ce.MAX}makePost(e,n){const r=At(e);return new Ce(n,r)}toString(){return".value"}}const fG=new cG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){return{type:"value",snapshotNode:t}}function _l(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function af(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function lf(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function hG(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(af(n,a)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_l(n,r)):s.trackChildChange(lf(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ht,(i,o)=>{n.hasChild(i)||r.trackChildChange(af(i,o))}),n.isLeafNode()||n.forEachChild(ht,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(lf(i,o,s))}else r.trackChildChange(_l(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ve.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e){this.indexedFilter_=new C1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=uf.getStartPost_(e),this.endPost_=uf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new Ce(n,r))||(r=ve.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ve.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ve.EMPTY_NODE);const o=this;return n.forEachChild(ht,(s,a)=>{o.matches(new Ce(s,a))||(i=i.updateImmediateChild(s,ve.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new uf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new Ce(n,r))||(r=ve.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ve.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ve.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ve.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,ve.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){const c=this.index_.getCompare();s=(d,p)=>c(p,d)}else s=this.index_.getCompare();const a=e;ne(a.numChildren()===this.limit_,"");const l=new Ce(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(l);if(a.hasChild(n)){const c=a.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const p=d==null?1:s(d,l);if(f&&!r.isEmpty()&&p>=0)return o!=null&&o.trackChildChange(lf(n,r,c)),a.updateImmediateChild(n,r);{o!=null&&o.trackChildChange(af(n,c));const g=a.updateImmediateChild(n,ve.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(o!=null&&o.trackChildChange(_l(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return r.isEmpty()?e:f&&s(u,l)>=0?(o!=null&&(o.trackChildChange(af(u.name,u.node)),o.trackChildChange(_l(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,ve.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vl}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$s}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ht}copy(){const e=new O1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function pG(t){return t.loadsAllData()?new C1(t.getIndex()):t.hasLimit()?new dG(t):new uf(t)}function zI(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ht?n="$priority":t.index_===fG?n="$value":t.index_===Ya?n="$key":(ne(t.index_ instanceof uG,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=zt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=zt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+zt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=zt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+zt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function WI(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ht&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends sj{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Bp.getListenId_(e,r),a={};this.listens_[s]=a;const l=zI(e._queryParams);this.restRequest_(o+".json",l,(u,f)=>{let c=f;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(o,c,!1,r),ll(this.listens_,s)===a){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=Bp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=zI(e._queryParams),r=e._path.toString(),i=new di;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yl(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Kc(a.responseText)}catch{Vn("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Vn("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(){this.rootNode_=ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(){return{value:null,children:new Map}}function tu(t,e,n){if(Pe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ae(e);t.children.has(r)||t.children.set(r,zp());const i=t.children.get(r);e=Qe(e),tu(i,e,n)}}function K_(t,e){if(Pe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ht,(r,i)=>{tu(t,new He(r),i)}),K_(t,e)}}else if(t.children.size>0){const n=Ae(e);return e=Qe(e),t.children.has(n)&&K_(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Y_(t,e,n){t.value!==null?n(e,t.value):gG(t,(r,i)=>{const o=new He(e.toString()+"/"+r);Y_(i,o,n)})}function gG(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_n(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=10*1e3,vG=30*1e3,_G=5*60*1e3;class wG{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new yG(e);const r=GI+(vG-GI)*Math.random();xc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;_n(e,(i,o)=>{o>0&&ii(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),xc(this.reportStats_.bind(this),Math.floor(Math.random()*2*_G))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(kr||(kr={}));function gj(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function k1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function N1(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=kr.ACK_USER_WRITE,this.source=gj()}operationForChild(e){if(Pe(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new He(e));return new Wp(Be(),n,this.revert)}}else return ne(Ae(this.path)===e,"operationForChild called for unrelated child."),new Wp(Qe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.source=e,this.path=n,this.type=kr.LISTEN_COMPLETE}operationForChild(e){return Pe(this.path)?new cf(this.source,Be()):new cf(this.source,Qe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=kr.OVERWRITE}operationForChild(e){return Pe(this.path)?new Fs(this.source,Be(),this.snap.getImmediateChild(e)):new Fs(this.source,Qe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=kr.MERGE}operationForChild(e){if(Pe(this.path)){const n=this.children.subtree(new He(e));return n.isEmpty()?null:n.value?new Fs(this.source,Be(),n.value):new ff(this.source,Be(),n)}else return ne(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ff(this.source,Qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xG(t,e,n,r){const i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(hG(s.childName,s.snapshotNode))}),Bu(t,i,"child_removed",e,r,n),Bu(t,i,"child_added",e,r,n),Bu(t,i,"child_moved",o,r,n),Bu(t,i,"child_changed",e,r,n),Bu(t,i,"value",e,r,n),i}function Bu(t,e,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,l)=>SG(t,a,l)),s.forEach(a=>{const l=EG(t,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function EG(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function SG(t,e,n){if(e.childName==null||n.childName==null)throw Kl("Should only compare child_ events.");const r=new Ce(e.childName,e.snapshotNode),i=new Ce(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){return{eventCache:t,serverCache:e}}function Ec(t,e,n,r){return Bg(new Vs(e,n,r),t.serverCache)}function yj(t,e,n,r){return Bg(t.eventCache,new Vs(e,n,r))}function Q_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Us(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hv;const TG=()=>(Hv||(Hv=new Mn(u8)),Hv);class it{constructor(e,n=TG()){this.value=e,this.children=n}static fromObject(e){let n=new it(null);return _n(e,(r,i)=>{n=n.set(new He(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Be(),value:this.value};if(Pe(e))return null;{const r=Ae(e),i=this.children.get(r);if(i!==null){const o=i.findRootMostMatchingPathAndValue(Qe(e),n);return o!=null?{path:xt(new He(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pe(e))return this;{const n=Ae(e),r=this.children.get(n);return r!==null?r.subtree(Qe(e)):new it(null)}}set(e,n){if(Pe(e))return new it(n,this.children);{const r=Ae(e),o=(this.children.get(r)||new it(null)).set(Qe(e),n),s=this.children.insert(r,o);return new it(this.value,s)}}remove(e){if(Pe(e))return this.children.isEmpty()?new it(null):new it(null,this.children);{const n=Ae(e),r=this.children.get(n);if(r){const i=r.remove(Qe(e));let o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new it(null):new it(this.value,o)}else return this}}get(e){if(Pe(e))return this.value;{const n=Ae(e),r=this.children.get(n);return r?r.get(Qe(e)):null}}setTree(e,n){if(Pe(e))return n;{const r=Ae(e),o=(this.children.get(r)||new it(null)).setTree(Qe(e),n);let s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new it(this.value,s)}}fold(e){return this.fold_(Be(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(xt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Be(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Pe(e))return null;{const o=Ae(e),s=this.children.get(o);return s?s.findOnPath_(Qe(e),xt(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Be(),n)}foreachOnPath_(e,n,r){if(Pe(e))return this;{this.value&&r(n,this.value);const i=Ae(e),o=this.children.get(i);return o?o.foreachOnPath_(Qe(e),xt(n,i),r):new it(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(xt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.writeTree_=e}static empty(){return new Lr(new it(null))}}function Sc(t,e,n){if(Pe(e))return new Lr(new it(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let o=r.value;const s=Rn(i,e);return o=o.updateChild(s,n),new Lr(t.writeTree_.set(i,o))}else{const i=new it(n),o=t.writeTree_.setTree(e,i);return new Lr(o)}}}function HI(t,e,n){let r=t;return _n(n,(i,o)=>{r=Sc(r,xt(e,i),o)}),r}function qI(t,e){if(Pe(e))return Lr.empty();{const n=t.writeTree_.setTree(e,new it(null));return new Lr(n)}}function X_(t,e){return Zs(t,e)!=null}function Zs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Rn(n.path,e)):null}function KI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ht,(r,i)=>{e.push(new Ce(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ce(r,i.value))}),e}function Po(t,e){if(Pe(e))return t;{const n=Zs(t,e);return n!=null?new Lr(new it(n)):new Lr(t.writeTree_.subtree(e))}}function J_(t){return t.writeTree_.isEmpty()}function wl(t,e){return vj(Be(),t.writeTree_,e)}function vj(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(ne(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=vj(xt(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(xt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e){return xj(e,t)}function AG(t,e,n,r,i){ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Sc(t.visibleWrites,e,n)),t.lastWriteId=r}function IG(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function PG(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=n&&CG(a,r.path)?i=!1:ar(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return OG(t),!0;if(r.snap)t.visibleWrites=qI(t.visibleWrites,r.path);else{const a=r.children;_n(a,l=>{t.visibleWrites=qI(t.visibleWrites,xt(r.path,l))})}return!0}else return!1}function CG(t,e){if(t.snap)return ar(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ar(xt(t.path,n),e))return!0;return!1}function OG(t){t.visibleWrites=_j(t.allWrites,kG,Be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function kG(t){return t.visible}function _j(t,e,n){let r=Lr.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)ar(n,s)?(a=Rn(n,s),r=Sc(r,a,o.snap)):ar(s,n)&&(a=Rn(s,n),r=Sc(r,Be(),o.snap.getChild(a)));else if(o.children){if(ar(n,s))a=Rn(n,s),r=HI(r,a,o.children);else if(ar(s,n))if(a=Rn(s,n),Pe(a))r=HI(r,Be(),o.children);else{const l=ll(o.children,Ae(a));if(l){const u=l.getChild(Qe(a));r=Sc(r,Be(),u)}}}else throw Kl("WriteRecord should have .snap or .children")}}return r}function wj(t,e,n,r,i){if(!r&&!i){const o=Zs(t.visibleWrites,e);if(o!=null)return o;{const s=Po(t.visibleWrites,e);if(J_(s))return n;if(n==null&&!X_(s,Be()))return null;{const a=n||ve.EMPTY_NODE;return wl(s,a)}}}else{const o=Po(t.visibleWrites,e);if(!i&&J_(o))return n;if(!i&&n==null&&!X_(o,Be()))return null;{const s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(ar(u.path,e)||ar(e,u.path))},a=_j(t.allWrites,s,e),l=n||ve.EMPTY_NODE;return wl(a,l)}}}function NG(t,e,n){let r=ve.EMPTY_NODE;const i=Zs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ht,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=Po(t.visibleWrites,e);return n.forEachChild(ht,(s,a)=>{const l=wl(Po(o,new He(s)),a);r=r.updateImmediateChild(s,l)}),KI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{const o=Po(t.visibleWrites,e);return KI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function RG(t,e,n,r,i){ne(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=xt(e,n);if(X_(t.visibleWrites,o))return null;{const s=Po(t.visibleWrites,o);return J_(s)?i.getChild(n):wl(s,i.getChild(n))}}function MG(t,e,n,r){const i=xt(e,n),o=Zs(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){const s=Po(t.visibleWrites,i);return wl(s,r.getNode().getImmediateChild(n))}else return null}function DG(t,e){return Zs(t.visibleWrites,e)}function jG(t,e,n,r,i,o,s){let a;const l=Po(t.visibleWrites,e),u=Zs(l,Be());if(u!=null)a=u;else if(n!=null)a=wl(l,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){const f=[],c=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let p=d.getNext();for(;p&&f.length<i;)c(p,r)!==0&&f.push(p),p=d.getNext();return f}else return[]}function LG(){return{visibleWrites:Lr.empty(),allWrites:[],lastWriteId:-1}}function Gp(t,e,n,r){return wj(t.writeTree,t.treePath,e,n,r)}function M1(t,e){return NG(t.writeTree,t.treePath,e)}function YI(t,e,n,r){return RG(t.writeTree,t.treePath,e,n,r)}function Hp(t,e){return DG(t.writeTree,xt(t.treePath,e))}function $G(t,e,n,r,i,o){return jG(t.writeTree,t.treePath,e,n,r,i,o)}function D1(t,e,n){return MG(t.writeTree,t.treePath,e,n)}function bj(t,e){return xj(xt(t.treePath,e),t.writeTree)}function xj(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,lf(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,af(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,_l(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,lf(r,e.snapshotNode,i.oldSnap));else throw Kl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Ej=new VG;class j1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Vs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return D1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Us(this.viewCache_),o=$G(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(t){return{filter:t}}function BG(t,e){ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function zG(t,e,n,r,i){const o=new FG;let s,a;if(n.type===kr.OVERWRITE){const u=n;u.source.fromUser?s=Z_(t,e,u.path,u.snap,r,i,o):(ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Pe(u.path),s=qp(t,e,u.path,u.snap,r,i,a,o))}else if(n.type===kr.MERGE){const u=n;u.source.fromUser?s=GG(t,e,u.path,u.children,r,i,o):(ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=ew(t,e,u.path,u.children,r,i,a,o))}else if(n.type===kr.ACK_USER_WRITE){const u=n;u.revert?s=KG(t,e,u.path,r,i,o):s=HG(t,e,u.path,u.affectedTree,r,i,o)}else if(n.type===kr.LISTEN_COMPLETE)s=qG(t,e,n.path,r,o);else throw Kl("Unknown operation type: "+n.type);const l=o.getChanges();return WG(e,s,l),{viewCache:s,changes:l}}function WG(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Q_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(mj(Q_(e)))}}function Sj(t,e,n,r,i,o){const s=e.eventCache;if(Hp(r,n)!=null)return e;{let a,l;if(Pe(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Us(e),f=u instanceof ve?u:ve.EMPTY_NODE,c=M1(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const u=Gp(r,Us(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{const u=Ae(n);if(u===".priority"){ne($o(n)===1,"Can't have a priority with additional path components");const f=s.getNode();l=e.serverCache.getNode();const c=YI(r,n,f,l);c!=null?a=t.filter.updatePriority(f,c):a=s.getNode()}else{const f=Qe(n);let c;if(s.isCompleteForChild(u)){l=e.serverCache.getNode();const d=YI(r,n,s.getNode(),l);d!=null?c=s.getNode().getImmediateChild(u).updateChild(f,d):c=s.getNode().getImmediateChild(u)}else c=D1(r,u,e.serverCache);c!=null?a=t.filter.updateChild(s.getNode(),u,c,f,i,o):a=s.getNode()}}return Ec(e,a,s.isFullyInitialized()||Pe(n),t.filter.filtersNodes())}}function qp(t,e,n,r,i,o,s,a){const l=e.serverCache;let u;const f=s?t.filter:t.filter.getIndexedFilter();if(Pe(n))u=f.updateFullNode(l.getNode(),r,null);else if(f.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,r);u=f.updateFullNode(l.getNode(),p,null)}else{const p=Ae(n);if(!l.isCompleteForPath(n)&&$o(n)>1)return e;const m=Qe(n),v=l.getNode().getImmediateChild(p).updateChild(m,r);p===".priority"?u=f.updatePriority(l.getNode(),v):u=f.updateChild(l.getNode(),p,v,m,Ej,null)}const c=yj(e,u,l.isFullyInitialized()||Pe(n),f.filtersNodes()),d=new j1(i,c,o);return Sj(t,c,n,i,d,a)}function Z_(t,e,n,r,i,o,s){const a=e.eventCache;let l,u;const f=new j1(i,e,o);if(Pe(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),l=Ec(e,u,!0,t.filter.filtersNodes());else{const c=Ae(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=Ec(e,u,a.isFullyInitialized(),a.isFiltered());else{const d=Qe(n),p=a.getNode().getImmediateChild(c);let m;if(Pe(d))m=r;else{const g=f.getCompleteChild(c);g!=null?T1(d)===".priority"&&g.getChild(lj(d)).isEmpty()?m=g:m=g.updateChild(d,r):m=ve.EMPTY_NODE}if(p.equals(m))l=e;else{const g=t.filter.updateChild(a.getNode(),c,m,d,f,s);l=Ec(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function QI(t,e){return t.eventCache.isCompleteForChild(e)}function GG(t,e,n,r,i,o,s){let a=e;return r.foreach((l,u)=>{const f=xt(n,l);QI(e,Ae(f))&&(a=Z_(t,a,f,u,i,o,s))}),r.foreach((l,u)=>{const f=xt(n,l);QI(e,Ae(f))||(a=Z_(t,a,f,u,i,o,s))}),a}function XI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ew(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Pe(n)?u=r:u=new it(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((c,d)=>{if(f.hasChild(c)){const p=e.serverCache.getNode().getImmediateChild(c),m=XI(t,p,d);l=qp(t,l,new He(c),m,i,o,s,a)}}),u.children.inorderTraversal((c,d)=>{const p=!e.serverCache.isCompleteForChild(c)&&d.value===null;if(!f.hasChild(c)&&!p){const m=e.serverCache.getNode().getImmediateChild(c),g=XI(t,m,d);l=qp(t,l,new He(c),g,i,o,s,a)}}),l}function HG(t,e,n,r,i,o,s){if(Hp(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Pe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return qp(t,e,n,l.getNode().getChild(n),i,o,a,s);if(Pe(n)){let u=new it(null);return l.getNode().forEachChild(Ya,(f,c)=>{u=u.set(new He(f),c)}),ew(t,e,n,u,i,o,a,s)}else return e}else{let u=new it(null);return r.foreach((f,c)=>{const d=xt(n,f);l.isCompleteForPath(d)&&(u=u.set(f,l.getNode().getChild(d)))}),ew(t,e,n,u,i,o,a,s)}}function qG(t,e,n,r,i){const o=e.serverCache,s=yj(e,o.getNode(),o.isFullyInitialized()||Pe(n),o.isFiltered());return Sj(t,s,n,r,Ej,i)}function KG(t,e,n,r,i,o){let s;if(Hp(r,n)!=null)return e;{const a=new j1(r,e,i),l=e.eventCache.getNode();let u;if(Pe(n)||Ae(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Gp(r,Us(e));else{const c=e.serverCache.getNode();ne(c instanceof ve,"serverChildren would be complete if leaf node"),f=M1(r,c)}f=f,u=t.filter.updateFullNode(l,f,o)}else{const f=Ae(n);let c=D1(r,f,e.serverCache);c==null&&e.serverCache.isCompleteForChild(f)&&(c=l.getImmediateChild(f)),c!=null?u=t.filter.updateChild(l,f,c,Qe(n),a,o):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(l,f,ve.EMPTY_NODE,Qe(n),a,o):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Gp(r,Us(e)),s.isLeafNode()&&(u=t.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||Hp(r,Be())!=null,Ec(e,u,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new C1(r.getIndex()),o=pG(r);this.processor_=UG(o);const s=n.serverCache,a=n.eventCache,l=i.updateFullNode(ve.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(ve.EMPTY_NODE,a.getNode(),null),f=new Vs(l,s.isFullyInitialized(),i.filtersNodes()),c=new Vs(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Bg(c,f),this.eventGenerator_=new bG(this.query_)}get query(){return this.query_}}function QG(t){return t.viewCache_.serverCache.getNode()}function XG(t,e){const n=Us(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Pe(e)&&!n.getImmediateChild(Ae(e)).isEmpty())?n.getChild(e):null}function JI(t){return t.eventRegistrations_.length===0}function JG(t,e){t.eventRegistrations_.push(e)}function ZI(t,e,n){const r=[];if(n){ne(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function eP(t,e,n,r){e.type===kr.MERGE&&e.source.queryId!==null&&(ne(Us(t.viewCache_),"We should always have a full cache before handling merges"),ne(Q_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=zG(t.processor_,i,e,n,r);return BG(t.processor_,o.viewCache),ne(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Tj(t,o.changes,o.viewCache.eventCache.getNode(),null)}function ZG(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ht,(o,s)=>{r.push(_l(o,s))}),n.isFullyInitialized()&&r.push(mj(n.getNode())),Tj(t,r,n.getNode(),e)}function Tj(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return xG(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp;class eH{constructor(){this.views=new Map}}function tH(t){ne(!Kp,"__referenceConstructor has already been defined"),Kp=t}function nH(){return ne(Kp,"Reference.ts has not been loaded"),Kp}function rH(t){return t.views.size===0}function L1(t,e,n,r){const i=e.source.queryId;if(i!==null){const o=t.views.get(i);return ne(o!=null,"SyncTree gave us an op for an invalid query."),eP(o,e,n,r)}else{let o=[];for(const s of t.views.values())o=o.concat(eP(s,e,n,r));return o}}function iH(t,e,n,r,i){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Gp(n,i?r:null),l=!1;a?l=!0:r instanceof ve?(a=M1(n,r),l=!1):(a=ve.EMPTY_NODE,l=!1);const u=Bg(new Vs(a,l,!1),new Vs(r,i,!1));return new YG(e,u)}return s}function oH(t,e,n,r,i,o){const s=iH(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),JG(s,n),ZG(s,n)}function sH(t,e,n,r){const i=e._queryIdentifier,o=[];let s=[];const a=Fo(t);if(i==="default")for(const[l,u]of t.views.entries())s=s.concat(ZI(u,n,r)),JI(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||o.push(u.query));else{const l=t.views.get(i);l&&(s=s.concat(ZI(l,n,r)),JI(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Fo(t)&&o.push(new(nH())(e._repo,e._path)),{removed:o,events:s}}function Aj(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Qa(t,e){let n=null;for(const r of t.views.values())n=n||XG(r,e);return n}function Ij(t,e){if(e._queryParams.loadsAllData())return zg(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Pj(t,e){return Ij(t,e)!=null}function Fo(t){return zg(t)!=null}function zg(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp;function aH(t){ne(!Yp,"__referenceConstructor has already been defined"),Yp=t}function lH(){return ne(Yp,"Reference.ts has not been loaded"),Yp}let uH=1;class tP{constructor(e){this.listenProvider_=e,this.syncPointTree_=new it(null),this.pendingWriteTree_=LG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Cj(t,e,n,r,i){return AG(t.pendingWriteTree_,e,n,r,i),i?dh(t,new Fs(gj(),e,n)):[]}function ms(t,e,n=!1){const r=IG(t.pendingWriteTree_,e);if(PG(t.pendingWriteTree_,e)){let o=new it(null);return r.snap!=null?o=o.set(Be(),!0):_n(r.children,s=>{o=o.set(new He(s),!0)}),dh(t,new Wp(r.path,o,n))}else return[]}function Wg(t,e,n){return dh(t,new Fs(k1(),e,n))}function cH(t,e,n){const r=it.fromObject(n);return dh(t,new ff(k1(),e,r))}function fH(t,e){return dh(t,new cf(k1(),e))}function hH(t,e,n){const r=F1(t,n);if(r){const i=V1(r),o=i.path,s=i.queryId,a=Rn(o,e),l=new cf(N1(s),a);return U1(t,o,l)}else return[]}function tw(t,e,n,r,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&(e._queryIdentifier==="default"||Pj(s,e))){const l=sH(s,e,n,r);rH(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const u=l.removed;if(a=l.events,!i){const f=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(o,(d,p)=>Fo(p));if(f&&!c){const d=t.syncPointTree_.subtree(o);if(!d.isEmpty()){const p=mH(d);for(let m=0;m<p.length;++m){const g=p[m],v=g.query,_=Nj(t,g);t.listenProvider_.startListening(Tc(v),Qp(t,v),_.hashFn,_.onComplete)}}}!c&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(Tc(e),null):u.forEach(d=>{const p=t.queryToTagMap.get(Gg(d));t.listenProvider_.stopListening(Tc(d),p)}))}gH(t,u)}return a}function dH(t,e,n,r){const i=F1(t,r);if(i!=null){const o=V1(i),s=o.path,a=o.queryId,l=Rn(s,e),u=new Fs(N1(a),l,n);return U1(t,s,u)}else return[]}function pH(t,e,n,r){const i=F1(t,r);if(i){const o=V1(i),s=o.path,a=o.queryId,l=Rn(s,e),u=it.fromObject(n),f=new ff(N1(a),l,u);return U1(t,s,f)}else return[]}function nP(t,e,n,r=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(d,p)=>{const m=Rn(d,i);o=o||Qa(p,m),s=s||Fo(p)});let a=t.syncPointTree_.get(i);a?(s=s||Fo(a),o=o||Qa(a,Be())):(a=new eH,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=ve.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,m)=>{const g=Qa(m,Be());g&&(o=o.updateImmediateChild(p,g))}));const u=Pj(a,e);if(!u&&!e._queryParams.loadsAllData()){const d=Gg(e);ne(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const p=yH();t.queryToTagMap.set(d,p),t.tagToQueryMap.set(p,d)}const f=R1(t.pendingWriteTree_,i);let c=oH(a,e,n,f,o,l);if(!u&&!s&&!r){const d=Ij(a,e);c=c.concat(vH(t,e,d))}return c}function $1(t,e,n){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const l=Rn(s,e),u=Qa(a,l);if(u)return u});return wj(i,e,o,n,!0)}function dh(t,e){return Oj(e,t.syncPointTree_,null,R1(t.pendingWriteTree_,Be()))}function Oj(t,e,n,r){if(Pe(t.path))return kj(t,e,n,r);{const i=e.get(Be());n==null&&i!=null&&(n=Qa(i,Be()));let o=[];const s=Ae(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const u=n?n.getImmediateChild(s):null,f=bj(r,s);o=o.concat(Oj(a,l,u,f))}return i&&(o=o.concat(L1(i,t,r,n))),o}}function kj(t,e,n,r){const i=e.get(Be());n==null&&i!=null&&(n=Qa(i,Be()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=n?n.getImmediateChild(s):null,u=bj(r,s),f=t.operationForChild(s);f&&(o=o.concat(kj(f,a,l,u)))}),i&&(o=o.concat(L1(i,t,r,n))),o}function Nj(t,e){const n=e.query,r=Qp(t,n);return{hashFn:()=>(QG(e)||ve.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?hH(t,n._path,r):fH(t,n._path);{const o=h8(i,n);return tw(t,n,null,o)}}}}function Qp(t,e){const n=Gg(e);return t.queryToTagMap.get(n)}function Gg(t){return t._path.toString()+"$"+t._queryIdentifier}function F1(t,e){return t.tagToQueryMap.get(e)}function V1(t){const e=t.indexOf("$");return ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new He(t.substr(0,e))}}function U1(t,e,n){const r=t.syncPointTree_.get(e);ne(r,"Missing sync point for query tag that we're tracking");const i=R1(t.pendingWriteTree_,e);return L1(r,n,i,null)}function mH(t){return t.fold((e,n,r)=>{if(n&&Fo(n))return[zg(n)];{let i=[];return n&&(i=Aj(n)),_n(r,(o,s)=>{i=i.concat(s)}),i}})}function Tc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(lH())(t._repo,t._path):t}function gH(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Gg(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function yH(){return uH++}function vH(t,e,n){const r=e._path,i=Qp(t,e),o=Nj(t,n),s=t.listenProvider_.startListening(Tc(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)ne(!Fo(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,f,c)=>{if(!Pe(u)&&f&&Fo(f))return[zg(f).query];{let d=[];return f&&(d=d.concat(Aj(f).map(p=>p.query))),_n(c,(p,m)=>{d=d.concat(m)}),d}});for(let u=0;u<l.length;++u){const f=l[u];t.listenProvider_.stopListening(Tc(f),Qp(t,f))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new B1(n)}node(){return this.node_}}class z1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=xt(this.path_,e);return new z1(this.syncTree_,n)}node(){return $1(this.syncTree_,this.path_)}}const _H=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},rP=function(t,e,n){if(!t||typeof t!="object")return t;if(ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return wH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bH(t[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},wH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+t)}},bH=function(t,e,n){t.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ne(!1,"Unexpected increment value: "+r);const i=e.node();if(ne(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return typeof s!="number"?r:s+r},xH=function(t,e,n,r){return W1(e,new z1(n,t),r)},Rj=function(t,e,n){return W1(t,new B1(e),n)};function W1(t,e,n){const r=t.getPriority().val(),i=rP(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,a=rP(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new $t(a,At(i)):t}else{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new $t(i))),s.forEachChild(ht,(a,l)=>{const u=W1(l,e.getImmediateChild(a),n);u!==l&&(o=o.updateImmediateChild(a,u))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function H1(t,e){let n=e instanceof He?e:new He(e),r=t,i=Ae(n);for(;i!==null;){const o=ll(r.node.children,i)||{children:{},childCount:0};r=new G1(i,r,o),n=Qe(n),i=Ae(n)}return r}function nu(t){return t.node.value}function Mj(t,e){t.node.value=e,nw(t)}function Dj(t){return t.node.childCount>0}function EH(t){return nu(t)===void 0&&!Dj(t)}function Hg(t,e){_n(t.node.children,(n,r)=>{e(new G1(n,t,r))})}function jj(t,e,n,r){n&&!r&&e(t),Hg(t,i=>{jj(i,e,!0,r)}),n&&r&&e(t)}function SH(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ph(t){return new He(t.parent===null?t.name:ph(t.parent)+"/"+t.name)}function nw(t){t.parent!==null&&TH(t.parent,t.name,t)}function TH(t,e,n){const r=EH(n),i=ii(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,nw(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,nw(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=/[\[\].#$\/\u0000-\u001F\u007F]/,IH=/[\[\].#$\u0000-\u001F\u007F]/,qv=10*1024*1024,q1=function(t){return typeof t=="string"&&t.length!==0&&!AH.test(t)},Lj=function(t){return typeof t=="string"&&t.length!==0&&!IH.test(t)},PH=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Lj(t)},$j=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Vg(t)||t&&typeof t=="object"&&ii(t,".sv")},rw=function(t,e,n,r){r&&e===void 0||qg(ul(t,"value"),e,n)},qg=function(t,e,n){const r=n instanceof He?new H8(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+os(r));if(typeof e=="function")throw new Error(t+"contains a function "+os(r)+" with contents = "+e.toString());if(Vg(e))throw new Error(t+"contains "+e.toString()+" "+os(r));if(typeof e=="string"&&e.length>qv/3&&yg(e)>qv)throw new Error(t+"contains a string greater than "+qv+" utf8 bytes "+os(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(_n(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!q1(s)))throw new Error(t+" contains an invalid key ("+s+") "+os(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);q8(r,s),qg(t,a,r),K8(r)}),i&&o)throw new Error(t+' contains ".value" child '+os(r)+" in addition to actual children.")}},CH=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const o=sf(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!q1(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(G8);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ar(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},OH=function(t,e,n,r){if(r&&e===void 0)return;const i=ul(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];_n(e,(s,a)=>{const l=new He(s);if(qg(i,a,xt(n,l)),T1(l)===".priority"&&!$j(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),CH(i,o)},kH=function(t,e,n){if(!(n&&e===void 0)){if(Vg(e))throw new Error(ul(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$j(e))throw new Error(ul(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fj=function(t,e,n,r){if(!(r&&n===void 0)&&!Lj(n))throw new Error(ul(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},NH=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fj(t,e,n,r)},Ra=function(t,e){if(Ae(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},RH=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!q1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!PH(n))throw new Error(ul(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function K1(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();n!==null&&!A1(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Vj(t,e,n){K1(t,n),Uj(t,r=>A1(r,e))}function Ui(t,e,n){K1(t,n),Uj(t,r=>ar(r,e)||ar(e,r))}function Uj(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const o=i.path;e(o)?(DH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function DH(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ss&&Xt("event: "+n.toString()),eu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH="repo_interrupt",LH=25;class $H{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zp(),this.transactionQueueTree_=new G1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function FH(t,e,n){if(t.stats_=E1(t.repoInfo_),t.forceRestClient_||g8())t.server_=new Bp(t.repoInfo_,(r,i,o,s)=>{iP(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>oP(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ii(t.repoInfo_,e,(r,i,o,s)=>{iP(t,r,i,o,s)},r=>{oP(t,r)},r=>{UH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=b8(t.repoInfo_,()=>new wG(t.stats_,t.server_)),t.infoData_=new mG,t.infoSyncTree_=new tP({startListening:(r,i,o,s)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Wg(t.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Q1(t,"connected",!1),t.serverSyncTree_=new tP({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,l)=>{const u=s(a,l);Ui(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function VH(t){const n=t.infoData_.getNode(new He(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Y1(t){return _H({timestamp:VH(t)})}function iP(t,e,n,r,i){t.dataUpdateCount++;const o=new He(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const l=xp(n,u=>At(u));s=pH(t.serverSyncTree_,o,l,i)}else{const l=At(n);s=dH(t.serverSyncTree_,o,l,i)}else if(r){const l=xp(n,u=>At(u));s=cH(t.serverSyncTree_,o,l)}else{const l=At(n);s=Wg(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Kg(t,o)),Ui(t.eventQueue_,a,s)}function oP(t,e){Q1(t,"connected",e),e===!1&&zH(t)}function UH(t,e){_n(e,(n,r)=>{Q1(t,n,r)})}function Q1(t,e,n){const r=new He("/.info/"+e),i=At(n);t.infoData_.updateSnapshot(r,i);const o=Wg(t.infoSyncTree_,r,i);Ui(t.eventQueue_,r,o)}function Bj(t){return t.nextWriteId_++}function BH(t,e,n,r,i){X1(t,"set",{path:e.toString(),value:n,priority:r});const o=Y1(t),s=At(n,r),a=$1(t.serverSyncTree_,e),l=Rj(s,a,o),u=Bj(t),f=Cj(t.serverSyncTree_,e,l,u,!0);K1(t.eventQueue_,f),t.server_.put(e.toString(),s.val(!0),(d,p)=>{const m=d==="ok";m||Vn("set at "+e+" failed: "+d);const g=ms(t.serverSyncTree_,u,!m);Ui(t.eventQueue_,e,g),bl(t,i,d,p)});const c=qj(t,e);Kg(t,c),Ui(t.eventQueue_,c,[])}function zH(t){X1(t,"onDisconnectEvents");const e=Y1(t),n=zp();Y_(t.onDisconnect_,Be(),(i,o)=>{const s=xH(i,o,t.serverSyncTree_,e);tu(n,i,s)});let r=[];Y_(n,Be(),(i,o)=>{r=r.concat(Wg(t.serverSyncTree_,i,o));const s=qj(t,i);Kg(t,s)}),t.onDisconnect_=zp(),Ui(t.eventQueue_,Be(),r)}function WH(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&K_(t.onDisconnect_,e),bl(t,n,r,i)})}function sP(t,e,n,r){const i=At(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&tu(t.onDisconnect_,e,i),bl(t,r,o,s)})}function GH(t,e,n,r,i){const o=At(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&tu(t.onDisconnect_,e,o),bl(t,i,s,a)})}function HH(t,e,n,r){if(bp(n)){Xt("onDisconnect().update() called with empty data.  Don't do anything."),bl(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{i==="ok"&&_n(n,(s,a)=>{const l=At(a);tu(t.onDisconnect_,xt(e,s),l)}),bl(t,r,i,o)})}function qH(t,e,n){let r;Ae(e._path)===".info"?r=nP(t.infoSyncTree_,e,n):r=nP(t.serverSyncTree_,e,n),Vj(t.eventQueue_,e._path,r)}function aP(t,e,n){let r;Ae(e._path)===".info"?r=tw(t.infoSyncTree_,e,n):r=tw(t.serverSyncTree_,e,n),Vj(t.eventQueue_,e._path,r)}function KH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(jH)}function X1(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xt(n,...e)}function bl(t,e,n,r){e&&eu(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}function zj(t,e,n){return $1(t.serverSyncTree_,e,n)||ve.EMPTY_NODE}function J1(t,e=t.transactionQueueTree_){if(e||Yg(t,e),nu(e)){const n=Gj(t,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&YH(t,ph(e),n)}else Dj(e)&&Hg(e,n=>{J1(t,n)})}function YH(t,e,n){const r=n.map(u=>u.currentWriteId),i=zj(t,e,r);let o=i;const s=i.hash();for(let u=0;u<n.length;u++){const f=n[u];ne(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const c=Rn(e,f.path);o=o.updateChild(c,f.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,u=>{X1(t,"transaction put response",{path:l.toString(),status:u});let f=[];if(u==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,f=f.concat(ms(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Yg(t,H1(t.transactionQueueTree_,e)),J1(t,t.transactionQueueTree_),Ui(t.eventQueue_,e,f);for(let d=0;d<c.length;d++)eu(c[d])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{Vn("transaction at "+l.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}Kg(t,e)}},s)}function Kg(t,e){const n=Wj(t,e),r=ph(n),i=Gj(t,n);return QH(t,i,r),r}function QH(t,e,n){if(e.length===0)return;const r=[];let i=[];const s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Rn(n,l.path);let f=!1,c;if(ne(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)f=!0,c=l.abortReason,i=i.concat(ms(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=LH)f=!0,c="maxretry",i=i.concat(ms(t.serverSyncTree_,l.currentWriteId,!0));else{const d=zj(t,l.path,s);l.currentInputSnapshot=d;const p=e[a].update(d.val());if(p!==void 0){qg("transaction failed: Data returned ",p,l.path);let m=At(p);typeof p=="object"&&p!=null&&ii(p,".priority")||(m=m.updatePriority(d.getPriority()));const v=l.currentWriteId,_=Y1(t),w=Rj(m,d,_);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=w,l.currentWriteId=Bj(t),s.splice(s.indexOf(v),1),i=i.concat(Cj(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),i=i.concat(ms(t.serverSyncTree_,v,!0))}else f=!0,c="nodata",i=i.concat(ms(t.serverSyncTree_,l.currentWriteId,!0))}Ui(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(c==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(c),!1,null))))}Yg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)eu(r[a]);J1(t,t.transactionQueueTree_)}function Wj(t,e){let n,r=t.transactionQueueTree_;for(n=Ae(e);n!==null&&nu(r)===void 0;)r=H1(r,n),e=Qe(e),n=Ae(e);return r}function Gj(t,e){const n=[];return Hj(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Hj(t,e,n){const r=nu(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Hg(e,i=>{Hj(t,i,n)})}function Yg(t,e){const n=nu(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Mj(e,n.length>0?n:void 0)}Hg(e,r=>{Yg(t,r)})}function qj(t,e){const n=ph(Wj(t,e)),r=H1(t.transactionQueueTree_,e);return SH(r,i=>{Kv(t,i)}),Kv(t,r),jj(r,i=>{Kv(t,i)}),n}function Kv(t,e){const n=nu(e);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(ne(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(ne(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(ms(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Mj(e,void 0):n.length=o+1,Ui(t.eventQueue_,ph(e),i);for(let s=0;s<r.length;s++)eu(r[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function JH(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vn(`Invalid query segment '${n}' in query '${t}'`)}return e}const lP=function(t,e){const n=ZH(t),r=n.namespace;n.domain==="firebase.com"&&Vi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||a8();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ZD(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new He(n.pathString)}},ZH=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(f,c)),f<c&&(i=XH(t.substring(f,c)));const d=JH(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zt(this.snapshot.exportVal())}}class Yj{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new di;return WH(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ra("OnDisconnect.remove",this._path);const e=new di;return sP(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ra("OnDisconnect.set",this._path),rw("OnDisconnect.set",e,this._path,!1);const n=new di;return sP(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Ra("OnDisconnect.setWithPriority",this._path),rw("OnDisconnect.setWithPriority",e,this._path,!1),kH("OnDisconnect.setWithPriority",n,!1);const r=new di;return GH(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Ra("OnDisconnect.update",this._path),OH("OnDisconnect.update",e,this._path,!1);const n=new di;return HH(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Pe(this._path)?null:T1(this._path)}get ref(){return new qi(this._repo,this._path)}get _queryIdentifier(){const e=WI(this._queryParams),n=b1(e);return n==="{}"?"default":n}get _queryObject(){return WI(this._queryParams)}isEqual(e){if(e=mt(e),!(e instanceof Z1))return!1;const n=this._repo===e._repo,r=A1(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+W8(this._path)}}class qi extends Z1{constructor(e,n){super(e,n,new O1,!1)}get parent(){const e=lj(this._path);return e===null?null:new qi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class hf{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new He(e),r=Xp(this.ref,e);return new hf(this._node.getChild(n),r,ht)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new hf(i,Xp(this.ref,r),ht)))}hasChild(e){const n=new He(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Qg(t,e){return t=mt(t),t._checkNotDeleted("ref"),e!==void 0?Xp(t._root,e):t._root}function Xp(t,e){return t=mt(t),Ae(t._path)===null?NH("child","path",e,!1):Fj("child","path",e,!1),new qi(t._repo,xt(t._path,e))}function n7(t){return t=mt(t),new t7(t._repo,t._path)}function r7(t){return Ra("remove",t._path),eE(t,null)}function eE(t,e){t=mt(t),Ra("set",t._path),rw("set",e,t._path,!1);const n=new di;return BH(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class tE{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Kj("value",this,new hf(e.snapshotNode,new qi(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Yj(this,e,n):null}matches(e){return e instanceof tE?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class nE{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Yj(this,e,n):null}createEvent(e,n){ne(e.childName!=null,"Child events should have a childName.");const r=Xp(new qi(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Kj(e.type,this,new hf(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof nE?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function i7(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){const l=n,u=(f,c)=>{aP(t._repo,t,a),l(f,c)};u.userCallback=n.userCallback,u.context=n.context,n=u}const s=new e7(n,o||void 0),a=e==="value"?new tE(s):new nE(e,s);return qH(t._repo,t,a),()=>aP(t._repo,t,a)}function o7(t,e,n,r){return i7(t,"value",e,n,r)}tH(qi);aH(qi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7="FIREBASE_DATABASE_EMULATOR_HOST",iw={};let a7=!1;function l7(t,e,n,r){t.repoInfo_=new ZD(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function u7(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Vi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=lP(o,i),a=s.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[s7]),u?(l=!0,o=`http://${u}?ns=${a.namespace}`,s=lP(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const f=i&&l?new Ka(Ka.OWNER):new v8(t.name,t.options,e);RH("Invalid Firebase Database URL",s),Pe(s.path)||Vi("Database URL must point to the root of a Firebase Database (not including a child path).");const c=f7(a,t,f,new y8(t.name,n));return new h7(c,t)}function c7(t,e){const n=iw[e];(!n||n[t.key]!==t)&&Vi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),KH(t),delete n[t.key]}function f7(t,e,n,r){let i=iw[e.name];i||(i={},iw[e.name]=i);let o=i[t.toURLString()];return o&&Vi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new $H(t,a7,n,r),i[t.toURLString()]=o,o}class h7{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(FH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qi(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(c7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vi("Cannot call "+e+" on a deleted database.")}}function d7(t=Ix(),e){const n=_g(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=k2("database");r&&p7(n,...r)}return n}function p7(t,e,n,r={}){t=mt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Vi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ka(Ka.OWNER);else if(r.mockUserToken){const s=typeof r.mockUserToken=="string"?r.mockUserToken:M2(r.mockUserToken,t.app.options.projectId);o=new Ka(s)}l7(i,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(t){n8(Ys),Rs(new Ro("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return u7(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Kr(II,PI,t),Kr(II,PI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7={".sv":"timestamp"};function y7(){return g7}Ii.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ii.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};m7();const v7={apiKey:"AIzaSyCR6PTJ8tfCJy9qZWcp8dW-9UH4ko0yL4M",authDomain:"sahil-stats-tracker.firebaseapp.com",projectId:"sahil-stats-tracker",storageBucket:"sahil-stats-tracker.appspot.com",messagingSenderId:"203118165866",appId:"1:203118165866:web:8524979c64e4dfdad32f13",measurementId:"G-R14NR52088"},rE=V2(v7),yt=B9(rE),Yv=e8(rE),_7=new pi,Xg=d7(rE);function w7({teams:t=[],stats:e=[],onSubmit:n}){const[r,i]=j.useState({teamName:"",opponent:"",gameFormat:localStorage.getItem("gameFormat")||"periods",periodLength:parseInt(localStorage.getItem("periodLength"))||10,numPeriods:4,date:new Date().toISOString().split("T")[0],time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})}),[o,s]=j.useState(""),a=j.useMemo(()=>{const m=new Map;for(const g of t)g&&g.id&&!m.has(g.name.toLowerCase())&&m.set(g.name.toLowerCase(),g);return Array.from(m.values())},[t]),l=j.useMemo(()=>[...new Set(e.map(g=>g.opponent).filter(Boolean))],[e]);j.useEffect(()=>{a.length>0&&!r.teamName&&i(m=>({...m,teamName:a[0].name}))},[a,r.teamName]);const u=m=>{const g=m.target.value;i(v=>({...v,opponent:g}))},f=l.some(m=>m.toLowerCase()===r.opponent.toLowerCase()),c=l.find(m=>r.opponent.length>=2&&m.toLowerCase().includes(r.opponent.toLowerCase())&&m.toLowerCase()!==r.opponent.toLowerCase()),d=m=>{const{name:g,value:v}=m.target;i(_=>({..._,[g]:v}))},p=m=>{if(!r.teamName||!r.opponent){s("Please select a team and enter an opponent name.");return}s("");const g=new Date(`${r.date}T${r.time}`).toISOString();typeof n=="function"?n({...r,timestamp:g},m):s("Internal error: Game submit not available.")};return x.jsxs("div",{className:"max-w-xl mx-auto bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[x.jsx("div",{className:"flex items-center justify-center mb-6",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-gray-700 rounded-lg px-2 py-1 border border-gray-300 dark:border-gray-600",children:[x.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[x.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),x.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),x.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),x.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),x.jsx("input",{type:"date",name:"date",value:r.date,onChange:d,className:"bg-transparent text-gray-900 dark:text-white text-sm outline-none appearance-none w-24"})]}),x.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-gray-700 rounded-lg px-2 py-1 border border-gray-300 dark:border-gray-600",children:[x.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx("polyline",{points:"12,6 12,12 16,14"})]}),x.jsx("input",{type:"time",name:"time",value:r.time,onChange:d,className:"bg-transparent text-gray-900 dark:text-white text-sm outline-none appearance-none w-24"})]})]})}),o&&x.jsx("p",{className:"text-red-500 bg-red-100 dark:bg-red-900/50 p-3 rounded-md mb-4 text-center",children:o}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sahil's Team"}),x.jsxs("select",{name:"teamName",value:r.teamName,onChange:d,className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-400 border border-gray-300 dark:border-gray-600 rounded p-3 focus:ring-orange-500 focus:ring-2 outline-none w-full appearance-none",children:[x.jsx("option",{value:"",disabled:!0,children:"Select Team"}),a.map(m=>x.jsx("option",{value:m.name,children:m.name},m.id))]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Opponent's Team"}),x.jsx("input",{type:"text",name:"opponent",placeholder:"e.g., Oakland Soldiers",value:r.opponent,onChange:u,className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-400 border border-gray-300 dark:border-gray-600 rounded p-3 focus:ring-orange-500 focus:ring-2 outline-none w-full",required:!0,autoComplete:"off",autoCorrect:"off",spellCheck:"false"}),r.opponent&&x.jsx("div",{className:"mt-2 text-sm",children:f?x.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[x.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Played before"]}):c?x.jsxs("div",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[x.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Did you mean:",x.jsx("button",{type:"button",onClick:()=>i(m=>({...m,opponent:c})),className:"ml-1 text-blue-600 dark:text-blue-400 underline hover:text-blue-800 dark:hover:text-blue-300",children:c}),"?"]}):x.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[x.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New opponent"]})})]}),x.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6 space-y-4",children:[x.jsx("button",{onClick:()=>p("live"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center text-lg",children:"Start Live Game & Track Stats"}),x.jsx("button",{onClick:()=>p("final"),className:"w-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center text-lg border border-gray-300 dark:border-gray-600",children:"Enter Final Stats Only"})]})]})]})}function Qj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Qj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Le(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Qj(t))&&(r&&(r+=" "),r+=e);return r}var b7=Array.isArray,Un=b7,x7=typeof Bh=="object"&&Bh&&Bh.Object===Object&&Bh,Xj=x7,E7=Xj,S7=typeof self=="object"&&self&&self.Object===Object&&self,T7=E7||S7||Function("return this")(),oi=T7,A7=oi,I7=A7.Symbol,mh=I7,uP=mh,Jj=Object.prototype,P7=Jj.hasOwnProperty,C7=Jj.toString,zu=uP?uP.toStringTag:void 0;function O7(t){var e=P7.call(t,zu),n=t[zu];try{t[zu]=void 0;var r=!0}catch{}var i=C7.call(t);return r&&(e?t[zu]=n:delete t[zu]),i}var k7=O7,N7=Object.prototype,R7=N7.toString;function M7(t){return R7.call(t)}var D7=M7,cP=mh,j7=k7,L7=D7,$7="[object Null]",F7="[object Undefined]",fP=cP?cP.toStringTag:void 0;function V7(t){return t==null?t===void 0?F7:$7:fP&&fP in Object(t)?j7(t):L7(t)}var Ki=V7;function U7(t){return t!=null&&typeof t=="object"}var Yi=U7,B7=Ki,z7=Yi,W7="[object Symbol]";function G7(t){return typeof t=="symbol"||z7(t)&&B7(t)==W7}var ru=G7,H7=Un,q7=ru,K7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y7=/^\w*$/;function Q7(t,e){if(H7(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||q7(t)?!0:Y7.test(t)||!K7.test(t)||e!=null&&t in Object(e)}var iE=Q7;function X7(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Wo=X7;const iu=Je(Wo);var J7=Ki,Z7=Wo,eq="[object AsyncFunction]",tq="[object Function]",nq="[object GeneratorFunction]",rq="[object Proxy]";function iq(t){if(!Z7(t))return!1;var e=J7(t);return e==tq||e==nq||e==eq||e==rq}var oE=iq;const Te=Je(oE);var oq=oi,sq=oq["__core-js_shared__"],aq=sq,Qv=aq,hP=function(){var t=/[^.]+$/.exec(Qv&&Qv.keys&&Qv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function lq(t){return!!hP&&hP in t}var uq=lq,cq=Function.prototype,fq=cq.toString;function hq(t){if(t!=null){try{return fq.call(t)}catch{}try{return t+""}catch{}}return""}var Zj=hq,dq=oE,pq=uq,mq=Wo,gq=Zj,yq=/[\\^$.*+?()[\]{}|]/g,vq=/^\[object .+?Constructor\]$/,_q=Function.prototype,wq=Object.prototype,bq=_q.toString,xq=wq.hasOwnProperty,Eq=RegExp("^"+bq.call(xq).replace(yq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sq(t){if(!mq(t)||pq(t))return!1;var e=dq(t)?Eq:vq;return e.test(gq(t))}var Tq=Sq;function Aq(t,e){return t==null?void 0:t[e]}var Iq=Aq,Pq=Tq,Cq=Iq;function Oq(t,e){var n=Cq(t,e);return Pq(n)?n:void 0}var ea=Oq,kq=ea,Nq=kq(Object,"create"),Jg=Nq,dP=Jg;function Rq(){this.__data__=dP?dP(null):{},this.size=0}var Mq=Rq;function Dq(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var jq=Dq,Lq=Jg,$q="__lodash_hash_undefined__",Fq=Object.prototype,Vq=Fq.hasOwnProperty;function Uq(t){var e=this.__data__;if(Lq){var n=e[t];return n===$q?void 0:n}return Vq.call(e,t)?e[t]:void 0}var Bq=Uq,zq=Jg,Wq=Object.prototype,Gq=Wq.hasOwnProperty;function Hq(t){var e=this.__data__;return zq?e[t]!==void 0:Gq.call(e,t)}var qq=Hq,Kq=Jg,Yq="__lodash_hash_undefined__";function Qq(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Kq&&e===void 0?Yq:e,this}var Xq=Qq,Jq=Mq,Zq=jq,eK=Bq,tK=qq,nK=Xq;function ou(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ou.prototype.clear=Jq;ou.prototype.delete=Zq;ou.prototype.get=eK;ou.prototype.has=tK;ou.prototype.set=nK;var rK=ou;function iK(){this.__data__=[],this.size=0}var oK=iK;function sK(t,e){return t===e||t!==t&&e!==e}var sE=sK,aK=sE;function lK(t,e){for(var n=t.length;n--;)if(aK(t[n][0],e))return n;return-1}var Zg=lK,uK=Zg,cK=Array.prototype,fK=cK.splice;function hK(t){var e=this.__data__,n=uK(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():fK.call(e,n,1),--this.size,!0}var dK=hK,pK=Zg;function mK(t){var e=this.__data__,n=pK(e,t);return n<0?void 0:e[n][1]}var gK=mK,yK=Zg;function vK(t){return yK(this.__data__,t)>-1}var _K=vK,wK=Zg;function bK(t,e){var n=this.__data__,r=wK(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var xK=bK,EK=oK,SK=dK,TK=gK,AK=_K,IK=xK;function su(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}su.prototype.clear=EK;su.prototype.delete=SK;su.prototype.get=TK;su.prototype.has=AK;su.prototype.set=IK;var ey=su,PK=ea,CK=oi,OK=PK(CK,"Map"),aE=OK,pP=rK,kK=ey,NK=aE;function RK(){this.size=0,this.__data__={hash:new pP,map:new(NK||kK),string:new pP}}var MK=RK;function DK(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var jK=DK,LK=jK;function $K(t,e){var n=t.__data__;return LK(e)?n[typeof e=="string"?"string":"hash"]:n.map}var ty=$K,FK=ty;function VK(t){var e=FK(this,t).delete(t);return this.size-=e?1:0,e}var UK=VK,BK=ty;function zK(t){return BK(this,t).get(t)}var WK=zK,GK=ty;function HK(t){return GK(this,t).has(t)}var qK=HK,KK=ty;function YK(t,e){var n=KK(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var QK=YK,XK=MK,JK=UK,ZK=WK,eY=qK,tY=QK;function au(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}au.prototype.clear=XK;au.prototype.delete=JK;au.prototype.get=ZK;au.prototype.has=eY;au.prototype.set=tY;var lE=au,eL=lE,nY="Expected a function";function uE(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(nY);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(uE.Cache||eL),n}uE.Cache=eL;var tL=uE;const rY=Je(tL);var iY=tL,oY=500;function sY(t){var e=iY(t,function(r){return n.size===oY&&n.clear(),r}),n=e.cache;return e}var aY=sY,lY=aY,uY=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cY=/\\(\\)?/g,fY=lY(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(uY,function(n,r,i,o){e.push(i?o.replace(cY,"$1"):r||n)}),e}),hY=fY;function dY(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var cE=dY,mP=mh,pY=cE,mY=Un,gY=ru,yY=1/0,gP=mP?mP.prototype:void 0,yP=gP?gP.toString:void 0;function nL(t){if(typeof t=="string")return t;if(mY(t))return pY(t,nL)+"";if(gY(t))return yP?yP.call(t):"";var e=t+"";return e=="0"&&1/t==-yY?"-0":e}var vY=nL,_Y=vY;function wY(t){return t==null?"":_Y(t)}var rL=wY,bY=Un,xY=iE,EY=hY,SY=rL;function TY(t,e){return bY(t)?t:xY(t,e)?[t]:EY(SY(t))}var iL=TY,AY=ru,IY=1/0;function PY(t){if(typeof t=="string"||AY(t))return t;var e=t+"";return e=="0"&&1/t==-IY?"-0":e}var ny=PY,CY=iL,OY=ny;function kY(t,e){e=CY(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[OY(e[n++])];return n&&n==r?t:void 0}var fE=kY,NY=fE;function RY(t,e,n){var r=t==null?void 0:NY(t,e);return r===void 0?n:r}var oL=RY;const fr=Je(oL);function MY(t){return t==null}var DY=MY;const Oe=Je(DY);var jY=Ki,LY=Un,$Y=Yi,FY="[object String]";function VY(t){return typeof t=="string"||!LY(t)&&$Y(t)&&jY(t)==FY}var UY=VY;const Bs=Je(UY);var sL={exports:{}},qe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=Symbol.for("react.element"),dE=Symbol.for("react.portal"),ry=Symbol.for("react.fragment"),iy=Symbol.for("react.strict_mode"),oy=Symbol.for("react.profiler"),sy=Symbol.for("react.provider"),ay=Symbol.for("react.context"),BY=Symbol.for("react.server_context"),ly=Symbol.for("react.forward_ref"),uy=Symbol.for("react.suspense"),cy=Symbol.for("react.suspense_list"),fy=Symbol.for("react.memo"),hy=Symbol.for("react.lazy"),zY=Symbol.for("react.offscreen"),aL;aL=Symbol.for("react.module.reference");function gr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hE:switch(t=t.type,t){case ry:case oy:case iy:case uy:case cy:return t;default:switch(t=t&&t.$$typeof,t){case BY:case ay:case ly:case hy:case fy:case sy:return t;default:return e}}case dE:return e}}}qe.ContextConsumer=ay;qe.ContextProvider=sy;qe.Element=hE;qe.ForwardRef=ly;qe.Fragment=ry;qe.Lazy=hy;qe.Memo=fy;qe.Portal=dE;qe.Profiler=oy;qe.StrictMode=iy;qe.Suspense=uy;qe.SuspenseList=cy;qe.isAsyncMode=function(){return!1};qe.isConcurrentMode=function(){return!1};qe.isContextConsumer=function(t){return gr(t)===ay};qe.isContextProvider=function(t){return gr(t)===sy};qe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hE};qe.isForwardRef=function(t){return gr(t)===ly};qe.isFragment=function(t){return gr(t)===ry};qe.isLazy=function(t){return gr(t)===hy};qe.isMemo=function(t){return gr(t)===fy};qe.isPortal=function(t){return gr(t)===dE};qe.isProfiler=function(t){return gr(t)===oy};qe.isStrictMode=function(t){return gr(t)===iy};qe.isSuspense=function(t){return gr(t)===uy};qe.isSuspenseList=function(t){return gr(t)===cy};qe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ry||t===oy||t===iy||t===uy||t===cy||t===zY||typeof t=="object"&&t!==null&&(t.$$typeof===hy||t.$$typeof===fy||t.$$typeof===sy||t.$$typeof===ay||t.$$typeof===ly||t.$$typeof===aL||t.getModuleId!==void 0)};qe.typeOf=gr;sL.exports=qe;var WY=sL.exports,GY=Ki,HY=Yi,qY="[object Number]";function KY(t){return typeof t=="number"||HY(t)&&GY(t)==qY}var lL=KY;const YY=Je(lL);var QY=lL;function XY(t){return QY(t)&&t!=+t}var JY=XY;const gh=Je(JY);var Nr=function(e){return e===0?0:e>0?1:-1},gs=function(e){return Bs(e)&&e.indexOf("%")===e.length-1},oe=function(e){return YY(e)&&!gh(e)},ZY=function(e){return Oe(e)},Dt=function(e){return oe(e)||Bs(e)},eQ=0,yh=function(e){var n=++eQ;return"".concat(e||"").concat(n)},zs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!oe(e)&&!Bs(e))return r;var o;if(gs(e)){var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return gh(o)&&(o=r),i&&o>n&&(o=n),o},co=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},tQ=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Pr=function(e,n){return oe(e)&&oe(n)?function(r){return e+r*(n-e)}:function(){return n}};function Jp(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):fr(r,e))===n})}var nQ=function(e,n){return oe(e)&&oe(n)?e-n:Bs(e)&&Bs(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Xa(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function ow(t){"@babel/helpers - typeof";return ow=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ow(t)}var rQ=["viewBox","children"],iQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],vP=["points","pathLength"],Xv={svg:rQ,polygon:vP,polyline:vP},pE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Zp=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(j.isValidElement(e)&&(r=e.props),!iu(r))return null;var i={};return Object.keys(r).forEach(function(o){pE.includes(o)&&(i[o]=n||function(s){return r[o](r,s)})}),i},oQ=function(e,n,r){return function(i){return e(n,r,i),null}},em=function(e,n,r){if(!iu(e)||ow(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];pE.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=oQ(s,n,r))}),i},sQ=["children"],aQ=["children"];function _P(t,e){if(t==null)return{};var n=lQ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sw(t){"@babel/helpers - typeof";return sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(t)}var wP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pi=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},bP=null,Jv=null,mE=function t(e){if(e===bP&&Array.isArray(Jv))return Jv;var n=[];return j.Children.forEach(e,function(r){Oe(r)||(WY.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Jv=n,bP=e,n};function hr(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Pi(i)}):r=[Pi(e)],mE(t).forEach(function(i){var o=fr(i,"type.displayName")||fr(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function Hn(t,e){var n=hr(t,e);return n&&n[0]}var xP=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!oe(r)||r<=0||!oe(i)||i<=0)},uQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],cQ=function(e){return e&&e.type&&Bs(e.type)&&uQ.indexOf(e.type)>=0},fQ=function(e){return e&&sw(e)==="object"&&"clipDot"in e},hQ=function(e,n,r,i){var o,s=(o=Xv==null?void 0:Xv[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!Te(e)&&(i&&s.includes(n)||iQ.includes(n))||r&&pE.includes(n)},Me=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(j.isValidElement(e)&&(i=e.props),!iu(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;hQ((a=i)===null||a===void 0?void 0:a[s],s,n,r)&&(o[s]=i[s])}),o},aw=function t(e,n){if(e===n)return!0;var r=j.Children.count(e);if(r!==j.Children.count(n))return!1;if(r===0)return!0;if(r===1)return EP(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],s=n[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!EP(o,s))return!1}return!0},EP=function(e,n){if(Oe(e)&&Oe(n))return!0;if(!Oe(e)&&!Oe(n)){var r=e.props||{},i=r.children,o=_P(r,sQ),s=n.props||{},a=s.children,l=_P(s,aQ);return i&&a?Xa(o,l)&&aw(i,a):!i&&!a?Xa(o,l):!1}return!1},SP=function(e,n){var r=[],i={};return mE(e).forEach(function(o,s){if(cQ(o))r.push(o);else if(o){var a=Pi(o.type),l=n[a]||{},u=l.handler,f=l.once;if(u&&(!f||!i[a])){var c=u(o,a,s);r.push(c),i[a]=!0}}}),r},dQ=function(e){var n=e&&e.type;return n&&wP[n]?wP[n]:null},pQ=function(e,n){return mE(n).indexOf(e)},mQ=["children","width","height","viewBox","className","style","title","desc"];function lw(){return lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lw.apply(this,arguments)}function gQ(t,e){if(t==null)return{};var n=yQ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uw(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,u=gQ(t,mQ),f=i||{width:n,height:r,x:0,y:0},c=Le("recharts-surface",o);return D.createElement("svg",lw({},Me(u,!0,"svg"),{className:c,width:n,height:r,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),D.createElement("title",null,a),D.createElement("desc",null,l),e)}var vQ=["children","className"];function cw(){return cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cw.apply(this,arguments)}function _Q(t,e){if(t==null)return{};var n=wQ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Et=D.forwardRef(function(t,e){var n=t.children,r=t.className,i=_Q(t,vQ),o=Le("recharts-layer",r);return D.createElement("g",cw({className:o},Me(i,!0),{ref:e}),n)}),Ci=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function bQ(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var xQ=bQ,EQ=xQ;function SQ(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:EQ(t,e,n)}var TQ=SQ,AQ="\\ud800-\\udfff",IQ="\\u0300-\\u036f",PQ="\\ufe20-\\ufe2f",CQ="\\u20d0-\\u20ff",OQ=IQ+PQ+CQ,kQ="\\ufe0e\\ufe0f",NQ="\\u200d",RQ=RegExp("["+NQ+AQ+OQ+kQ+"]");function MQ(t){return RQ.test(t)}var uL=MQ;function DQ(t){return t.split("")}var jQ=DQ,cL="\\ud800-\\udfff",LQ="\\u0300-\\u036f",$Q="\\ufe20-\\ufe2f",FQ="\\u20d0-\\u20ff",VQ=LQ+$Q+FQ,UQ="\\ufe0e\\ufe0f",BQ="["+cL+"]",fw="["+VQ+"]",hw="\\ud83c[\\udffb-\\udfff]",zQ="(?:"+fw+"|"+hw+")",fL="[^"+cL+"]",hL="(?:\\ud83c[\\udde6-\\uddff]){2}",dL="[\\ud800-\\udbff][\\udc00-\\udfff]",WQ="\\u200d",pL=zQ+"?",mL="["+UQ+"]?",GQ="(?:"+WQ+"(?:"+[fL,hL,dL].join("|")+")"+mL+pL+")*",HQ=mL+pL+GQ,qQ="(?:"+[fL+fw+"?",fw,hL,dL,BQ].join("|")+")",KQ=RegExp(hw+"(?="+hw+")|"+qQ+HQ,"g");function YQ(t){return t.match(KQ)||[]}var QQ=YQ,XQ=jQ,JQ=uL,ZQ=QQ;function eX(t){return JQ(t)?ZQ(t):XQ(t)}var tX=eX,nX=TQ,rX=uL,iX=tX,oX=rL;function sX(t){return function(e){e=oX(e);var n=rX(e)?iX(e):void 0,r=n?n[0]:e.charAt(0),i=n?nX(n,1).join(""):e.slice(1);return r[t]()+i}}var aX=sX,lX=aX,uX=lX("toUpperCase"),cX=uX;const dy=Je(cX);function Ze(t){return function(){return t}}const gL=Math.cos,tm=Math.sin,Fr=Math.sqrt,nm=Math.PI,py=2*nm,dw=Math.PI,pw=2*dw,ss=1e-6,fX=pw-ss;function yL(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function hX(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yL;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class dX{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yL:hX(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,u=i-n,f=s-e,c=a-n,d=f*f+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>ss)if(!(Math.abs(c*l-u*f)>ss)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-s,m=i-a,g=l*l+u*u,v=p*p+m*m,_=Math.sqrt(g),w=Math.sqrt(d),E=o*Math.tan((dw-Math.acos((g+d-v)/(2*_*w)))/2),C=E/w,T=E/_;Math.abs(C-1)>ss&&this._append`L${e+C*f},${n+C*c}`,this._append`A${o},${o},0,0,${+(c*p>f*m)},${this._x1=e+T*l},${this._y1=n+T*u}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,f=n+l,c=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ss||Math.abs(this._y1-f)>ss)&&this._append`L${u},${f}`,r&&(d<0&&(d=d%pw+pw),d>fX?this._append`A${r},${r},0,1,${c},${e-a},${n-l}A${r},${r},0,1,${c},${this._x1=u},${this._y1=f}`:d>ss&&this._append`A${r},${r},0,${+(d>=dw)},${c},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function gE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new dX(e)}function yE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vL(t){this._context=t}vL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function my(t){return new vL(t)}function _L(t){return t[0]}function wL(t){return t[1]}function bL(t,e){var n=Ze(!0),r=null,i=my,o=null,s=gE(a);t=typeof t=="function"?t:t===void 0?_L:Ze(t),e=typeof e=="function"?e:e===void 0?wL:Ze(e);function a(l){var u,f=(l=yE(l)).length,c,d=!1,p;for(r==null&&(o=i(p=s())),u=0;u<=f;++u)!(u<f&&n(c=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(c,u,l),+e(c,u,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Ze(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Ze(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Ze(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function pd(t,e,n){var r=null,i=Ze(!0),o=null,s=my,a=null,l=gE(u);t=typeof t=="function"?t:t===void 0?_L:Ze(+t),e=typeof e=="function"?e:Ze(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?wL:Ze(+n);function u(c){var d,p,m,g=(c=yE(c)).length,v,_=!1,w,E=new Array(g),C=new Array(g);for(o==null&&(a=s(w=l())),d=0;d<=g;++d){if(!(d<g&&i(v=c[d],d,c))===_)if(_=!_)p=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=d-1;m>=p;--m)a.point(E[m],C[m]);a.lineEnd(),a.areaEnd()}_&&(E[d]=+t(v,d,c),C[d]=+e(v,d,c),a.point(r?+r(v,d,c):E[d],n?+n(v,d,c):C[d]))}if(w)return a=null,w+""||null}function f(){return bL().defined(i).curve(s).context(o)}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ze(+c),r=null,u):t},u.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Ze(+c),u):t},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Ze(+c),u):r},u.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ze(+c),n=null,u):e},u.y0=function(c){return arguments.length?(e=typeof c=="function"?c:Ze(+c),u):e},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Ze(+c),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:Ze(!!c),u):i},u.curve=function(c){return arguments.length?(s=c,o!=null&&(a=s(o)),u):s},u.context=function(c){return arguments.length?(c==null?o=a=null:a=s(o=c),u):o},u}class xL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function pX(t){return new xL(t,!0)}function mX(t){return new xL(t,!1)}const vE={draw(t,e){const n=Fr(e/nm);t.moveTo(n,0),t.arc(0,0,n,0,py)}},gX={draw(t,e){const n=Fr(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},EL=Fr(1/3),yX=EL*2,vX={draw(t,e){const n=Fr(e/yX),r=n*EL;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},_X={draw(t,e){const n=Fr(e),r=-n/2;t.rect(r,r,n,n)}},wX=.8908130915292852,SL=tm(nm/10)/tm(7*nm/10),bX=tm(py/10)*SL,xX=-gL(py/10)*SL,EX={draw(t,e){const n=Fr(e*wX),r=bX*n,i=xX*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=py*o/5,a=gL(s),l=tm(s);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},Zv=Fr(3),SX={draw(t,e){const n=-Fr(e/(Zv*3));t.moveTo(0,n*2),t.lineTo(-Zv*n,-n),t.lineTo(Zv*n,-n),t.closePath()}},tr=-.5,nr=Fr(3)/2,mw=1/Fr(12),TX=(mw/2+1)*3,AX={draw(t,e){const n=Fr(e/TX),r=n/2,i=n*mw,o=r,s=n*mw+n,a=-o,l=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(tr*r-nr*i,nr*r+tr*i),t.lineTo(tr*o-nr*s,nr*o+tr*s),t.lineTo(tr*a-nr*l,nr*a+tr*l),t.lineTo(tr*r+nr*i,tr*i-nr*r),t.lineTo(tr*o+nr*s,tr*s-nr*o),t.lineTo(tr*a+nr*l,tr*l-nr*a),t.closePath()}};function IX(t,e){let n=null,r=gE(i);t=typeof t=="function"?t:Ze(t||vE),e=typeof e=="function"?e:Ze(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Ze(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Ze(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function rm(){}function im(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function TL(t){this._context=t}TL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:im(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:im(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PX(t){return new TL(t)}function AL(t){this._context=t}AL.prototype={areaStart:rm,areaEnd:rm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:im(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function CX(t){return new AL(t)}function IL(t){this._context=t}IL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:im(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function OX(t){return new IL(t)}function PL(t){this._context=t}PL.prototype={areaStart:rm,areaEnd:rm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kX(t){return new PL(t)}function TP(t){return t<0?-1:1}function AP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(TP(o)+TP(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function IP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function e0(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function om(t){this._context=t}om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:e0(this,this._t0,IP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,e0(this,IP(this,n=AP(this,t,e)),n);break;default:e0(this,this._t0,n=AP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function CL(t){this._context=new OL(t)}(CL.prototype=Object.create(om.prototype)).point=function(t,e){om.prototype.point.call(this,e,t)};function OL(t){this._context=t}OL.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function NX(t){return new om(t)}function RX(t){return new CL(t)}function kL(t){this._context=t}kL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=PP(t),i=PP(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function PP(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function MX(t){return new kL(t)}function gy(t,e){this._context=t,this._t=e}gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function DX(t){return new gy(t,.5)}function jX(t){return new gy(t,0)}function LX(t){return new gy(t,1)}function xl(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function gw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function $X(t,e){return t[e]}function FX(t){const e=[];return e.key=t,e}function VX(){var t=Ze([]),e=gw,n=xl,r=$X;function i(o){var s=Array.from(t.apply(this,arguments),FX),a,l=s.length,u=-1,f;for(const c of o)for(a=0,++u;a<l;++a)(s[a][u]=[0,+r(c,s[a].key,u,o)]).data=c;for(a=0,f=yE(e(s));a<l;++a)s[f[a]].index=a;return n(s,f),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Ze(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Ze(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?gw:typeof o=="function"?o:Ze(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??xl,i):n},i}function UX(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}xl(t,e)}}function BX(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}xl(t,e)}}function zX(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,l=0,u=0;a<s;++a){for(var f=t[e[a]],c=f[r][1]||0,d=f[r-1][1]||0,p=(c-d)/2,m=0;m<a;++m){var g=t[e[m]],v=g[r][1]||0,_=g[r-1][1]||0;p+=v-_}l+=c,u+=p*c}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,xl(t,e)}}function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}var WX=["type","size","sizeType"];function yw(){return yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yw.apply(this,arguments)}function CP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(n),!0).forEach(function(r){GX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GX(t,e,n){return e=HX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HX(t){var e=qX(t,"string");return df(e)=="symbol"?e:e+""}function qX(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KX(t,e){if(t==null)return{};var n=YX(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var NL={symbolCircle:vE,symbolCross:gX,symbolDiamond:vX,symbolSquare:_X,symbolStar:EX,symbolTriangle:SX,symbolWye:AX},QX=Math.PI/180,XX=function(e){var n="symbol".concat(dy(e));return NL[n]||vE},JX=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*QX;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ZX=function(e,n){NL["symbol".concat(dy(e))]=n},_E=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=KX(e,WX),u=OP(OP({},l),{},{type:r,size:o,sizeType:a}),f=function(){var v=XX(r),_=IX().type(v).size(JX(o,a,r));return _()},c=u.className,d=u.cx,p=u.cy,m=Me(u,!0);return d===+d&&p===+p&&o===+o?D.createElement("path",yw({},m,{className:Le("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(p,")"),d:f()})):null};_E.registerSymbol=ZX;function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function vw(){return vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vw.apply(this,arguments)}function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(r){pf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ML(r.key),r)}}function nJ(t,e,n){return e&&NP(t.prototype,e),n&&NP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rJ(t,e,n){return e=sm(e),iJ(t,RL()?Reflect.construct(e,n||[],sm(t).constructor):e.apply(t,n))}function iJ(t,e){if(e&&(El(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oJ(t)}function oJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RL=function(){return!!t})()}function sm(t){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sm(t)}function sJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_w(t,e)}function _w(t,e){return _w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_w(t,e)}function pf(t,e,n){return e=ML(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ML(t){var e=aJ(t,"string");return El(e)=="symbol"?e:e+""}function aJ(t,e){if(El(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(El(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rr=32,wE=function(t){function e(){return tJ(this,e),rJ(this,e,arguments)}return sJ(e,t),nJ(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=rr/2,s=rr/6,a=rr/3,l=r.inactive?i:r.color;if(r.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:rr,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(rr,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return D.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(rr/8,"h").concat(rr,"v").concat(rr*3/4,"h").concat(-rr,"z"),className:"recharts-legend-icon"});if(D.isValidElement(r.legendIcon)){var u=eJ({},r);return delete u.legendIcon,D.cloneElement(r.legendIcon,u)}return D.createElement(_E,{fill:l,cx:o,cy:o,size:rr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,s=i.iconSize,a=i.layout,l=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:rr,height:rr},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,m){var g=p.formatter||l,v=Le(pf(pf({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var _=Te(p.value)?null:p.value;Ci(!Te(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return D.createElement("li",vw({className:v,style:c,key:"legend-item-".concat(m)},em(r.props,p,m)),D.createElement(uw,{width:s,height:s,viewBox:f,style:d},r.renderIcon(p)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},g?g(_,p,m):_))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,s=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(j.PureComponent);pf(wE,"displayName","Legend");pf(wE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var lJ=ey;function uJ(){this.__data__=new lJ,this.size=0}var cJ=uJ;function fJ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var hJ=fJ;function dJ(t){return this.__data__.get(t)}var pJ=dJ;function mJ(t){return this.__data__.has(t)}var gJ=mJ,yJ=ey,vJ=aE,_J=lE,wJ=200;function bJ(t,e){var n=this.__data__;if(n instanceof yJ){var r=n.__data__;if(!vJ||r.length<wJ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new _J(r)}return n.set(t,e),this.size=n.size,this}var xJ=bJ,EJ=ey,SJ=cJ,TJ=hJ,AJ=pJ,IJ=gJ,PJ=xJ;function lu(t){var e=this.__data__=new EJ(t);this.size=e.size}lu.prototype.clear=SJ;lu.prototype.delete=TJ;lu.prototype.get=AJ;lu.prototype.has=IJ;lu.prototype.set=PJ;var DL=lu,CJ="__lodash_hash_undefined__";function OJ(t){return this.__data__.set(t,CJ),this}var kJ=OJ;function NJ(t){return this.__data__.has(t)}var RJ=NJ,MJ=lE,DJ=kJ,jJ=RJ;function am(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new MJ;++e<n;)this.add(t[e])}am.prototype.add=am.prototype.push=DJ;am.prototype.has=jJ;var jL=am;function LJ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var LL=LJ;function $J(t,e){return t.has(e)}var $L=$J,FJ=jL,VJ=LL,UJ=$L,BJ=1,zJ=2;function WJ(t,e,n,r,i,o){var s=n&BJ,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t),f=o.get(e);if(u&&f)return u==e&&f==t;var c=-1,d=!0,p=n&zJ?new FJ:void 0;for(o.set(t,e),o.set(e,t);++c<a;){var m=t[c],g=e[c];if(r)var v=s?r(g,m,c,e,t,o):r(m,g,c,t,e,o);if(v!==void 0){if(v)continue;d=!1;break}if(p){if(!VJ(e,function(_,w){if(!UJ(p,w)&&(m===_||i(m,_,n,r,o)))return p.push(w)})){d=!1;break}}else if(!(m===g||i(m,g,n,r,o))){d=!1;break}}return o.delete(t),o.delete(e),d}var FL=WJ,GJ=oi,HJ=GJ.Uint8Array,qJ=HJ;function KJ(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var YJ=KJ;function QJ(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var bE=QJ,RP=mh,MP=qJ,XJ=sE,JJ=FL,ZJ=YJ,eZ=bE,tZ=1,nZ=2,rZ="[object Boolean]",iZ="[object Date]",oZ="[object Error]",sZ="[object Map]",aZ="[object Number]",lZ="[object RegExp]",uZ="[object Set]",cZ="[object String]",fZ="[object Symbol]",hZ="[object ArrayBuffer]",dZ="[object DataView]",DP=RP?RP.prototype:void 0,t0=DP?DP.valueOf:void 0;function pZ(t,e,n,r,i,o,s){switch(n){case dZ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case hZ:return!(t.byteLength!=e.byteLength||!o(new MP(t),new MP(e)));case rZ:case iZ:case aZ:return XJ(+t,+e);case oZ:return t.name==e.name&&t.message==e.message;case lZ:case cZ:return t==e+"";case sZ:var a=ZJ;case uZ:var l=r&tZ;if(a||(a=eZ),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=nZ,s.set(t,e);var f=JJ(a(t),a(e),r,i,o,s);return s.delete(t),f;case fZ:if(t0)return t0.call(t)==t0.call(e)}return!1}var mZ=pZ;function gZ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var VL=gZ,yZ=VL,vZ=Un;function _Z(t,e,n){var r=e(t);return vZ(t)?r:yZ(r,n(t))}var wZ=_Z;function bZ(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var xZ=bZ;function EZ(){return[]}var SZ=EZ,TZ=xZ,AZ=SZ,IZ=Object.prototype,PZ=IZ.propertyIsEnumerable,jP=Object.getOwnPropertySymbols,CZ=jP?function(t){return t==null?[]:(t=Object(t),TZ(jP(t),function(e){return PZ.call(t,e)}))}:AZ,OZ=CZ;function kZ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var NZ=kZ,RZ=Ki,MZ=Yi,DZ="[object Arguments]";function jZ(t){return MZ(t)&&RZ(t)==DZ}var LZ=jZ,LP=LZ,$Z=Yi,UL=Object.prototype,FZ=UL.hasOwnProperty,VZ=UL.propertyIsEnumerable,UZ=LP(function(){return arguments}())?LP:function(t){return $Z(t)&&FZ.call(t,"callee")&&!VZ.call(t,"callee")},xE=UZ,lm={exports:{}};function BZ(){return!1}var zZ=BZ;lm.exports;(function(t,e){var n=oi,r=zZ,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(lm,lm.exports);var BL=lm.exports,WZ=9007199254740991,GZ=/^(?:0|[1-9]\d*)$/;function HZ(t,e){var n=typeof t;return e=e??WZ,!!e&&(n=="number"||n!="symbol"&&GZ.test(t))&&t>-1&&t%1==0&&t<e}var EE=HZ,qZ=9007199254740991;function KZ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=qZ}var SE=KZ,YZ=Ki,QZ=SE,XZ=Yi,JZ="[object Arguments]",ZZ="[object Array]",eee="[object Boolean]",tee="[object Date]",nee="[object Error]",ree="[object Function]",iee="[object Map]",oee="[object Number]",see="[object Object]",aee="[object RegExp]",lee="[object Set]",uee="[object String]",cee="[object WeakMap]",fee="[object ArrayBuffer]",hee="[object DataView]",dee="[object Float32Array]",pee="[object Float64Array]",mee="[object Int8Array]",gee="[object Int16Array]",yee="[object Int32Array]",vee="[object Uint8Array]",_ee="[object Uint8ClampedArray]",wee="[object Uint16Array]",bee="[object Uint32Array]",rt={};rt[dee]=rt[pee]=rt[mee]=rt[gee]=rt[yee]=rt[vee]=rt[_ee]=rt[wee]=rt[bee]=!0;rt[JZ]=rt[ZZ]=rt[fee]=rt[eee]=rt[hee]=rt[tee]=rt[nee]=rt[ree]=rt[iee]=rt[oee]=rt[see]=rt[aee]=rt[lee]=rt[uee]=rt[cee]=!1;function xee(t){return XZ(t)&&QZ(t.length)&&!!rt[YZ(t)]}var Eee=xee;function See(t){return function(e){return t(e)}}var zL=See,um={exports:{}};um.exports;(function(t,e){var n=Xj,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(um,um.exports);var Tee=um.exports,Aee=Eee,Iee=zL,$P=Tee,FP=$P&&$P.isTypedArray,Pee=FP?Iee(FP):Aee,WL=Pee,Cee=NZ,Oee=xE,kee=Un,Nee=BL,Ree=EE,Mee=WL,Dee=Object.prototype,jee=Dee.hasOwnProperty;function Lee(t,e){var n=kee(t),r=!n&&Oee(t),i=!n&&!r&&Nee(t),o=!n&&!r&&!i&&Mee(t),s=n||r||i||o,a=s?Cee(t.length,String):[],l=a.length;for(var u in t)(e||jee.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ree(u,l)))&&a.push(u);return a}var $ee=Lee,Fee=Object.prototype;function Vee(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Fee;return t===n}var Uee=Vee;function Bee(t,e){return function(n){return t(e(n))}}var GL=Bee,zee=GL,Wee=zee(Object.keys,Object),Gee=Wee,Hee=Uee,qee=Gee,Kee=Object.prototype,Yee=Kee.hasOwnProperty;function Qee(t){if(!Hee(t))return qee(t);var e=[];for(var n in Object(t))Yee.call(t,n)&&n!="constructor"&&e.push(n);return e}var Xee=Qee,Jee=oE,Zee=SE;function ete(t){return t!=null&&Zee(t.length)&&!Jee(t)}var vh=ete,tte=$ee,nte=Xee,rte=vh;function ite(t){return rte(t)?tte(t):nte(t)}var yy=ite,ote=wZ,ste=OZ,ate=yy;function lte(t){return ote(t,ate,ste)}var ute=lte,VP=ute,cte=1,fte=Object.prototype,hte=fte.hasOwnProperty;function dte(t,e,n,r,i,o){var s=n&cte,a=VP(t),l=a.length,u=VP(e),f=u.length;if(l!=f&&!s)return!1;for(var c=l;c--;){var d=a[c];if(!(s?d in e:hte.call(e,d)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var g=!0;o.set(t,e),o.set(e,t);for(var v=s;++c<l;){d=a[c];var _=t[d],w=e[d];if(r)var E=s?r(w,_,d,e,t,o):r(_,w,d,t,e,o);if(!(E===void 0?_===w||i(_,w,n,r,o):E)){g=!1;break}v||(v=d=="constructor")}if(g&&!v){var C=t.constructor,T=e.constructor;C!=T&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof T=="function"&&T instanceof T)&&(g=!1)}return o.delete(t),o.delete(e),g}var pte=dte,mte=ea,gte=oi,yte=mte(gte,"DataView"),vte=yte,_te=ea,wte=oi,bte=_te(wte,"Promise"),xte=bte,Ete=ea,Ste=oi,Tte=Ete(Ste,"Set"),HL=Tte,Ate=ea,Ite=oi,Pte=Ate(Ite,"WeakMap"),Cte=Pte,ww=vte,bw=aE,xw=xte,Ew=HL,Sw=Cte,qL=Ki,uu=Zj,UP="[object Map]",Ote="[object Object]",BP="[object Promise]",zP="[object Set]",WP="[object WeakMap]",GP="[object DataView]",kte=uu(ww),Nte=uu(bw),Rte=uu(xw),Mte=uu(Ew),Dte=uu(Sw),as=qL;(ww&&as(new ww(new ArrayBuffer(1)))!=GP||bw&&as(new bw)!=UP||xw&&as(xw.resolve())!=BP||Ew&&as(new Ew)!=zP||Sw&&as(new Sw)!=WP)&&(as=function(t){var e=qL(t),n=e==Ote?t.constructor:void 0,r=n?uu(n):"";if(r)switch(r){case kte:return GP;case Nte:return UP;case Rte:return BP;case Mte:return zP;case Dte:return WP}return e});var jte=as,n0=DL,Lte=FL,$te=mZ,Fte=pte,HP=jte,qP=Un,KP=BL,Vte=WL,Ute=1,YP="[object Arguments]",QP="[object Array]",md="[object Object]",Bte=Object.prototype,XP=Bte.hasOwnProperty;function zte(t,e,n,r,i,o){var s=qP(t),a=qP(e),l=s?QP:HP(t),u=a?QP:HP(e);l=l==YP?md:l,u=u==YP?md:u;var f=l==md,c=u==md,d=l==u;if(d&&KP(t)){if(!KP(e))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new n0),s||Vte(t)?Lte(t,e,n,r,i,o):$te(t,e,l,n,r,i,o);if(!(n&Ute)){var p=f&&XP.call(t,"__wrapped__"),m=c&&XP.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,v=m?e.value():e;return o||(o=new n0),i(g,v,n,r,o)}}return d?(o||(o=new n0),Fte(t,e,n,r,i,o)):!1}var Wte=zte,Gte=Wte,JP=Yi;function KL(t,e,n,r,i){return t===e?!0:t==null||e==null||!JP(t)&&!JP(e)?t!==t&&e!==e:Gte(t,e,n,r,KL,i)}var TE=KL,Hte=DL,qte=TE,Kte=1,Yte=2;function Qte(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var l=a[0],u=t[l],f=a[1];if(s&&a[2]){if(u===void 0&&!(l in t))return!1}else{var c=new Hte;if(r)var d=r(u,f,l,t,e,c);if(!(d===void 0?qte(f,u,Kte|Yte,r,c):d))return!1}}return!0}var Xte=Qte,Jte=Wo;function Zte(t){return t===t&&!Jte(t)}var YL=Zte,ene=YL,tne=yy;function nne(t){for(var e=tne(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ene(i)]}return e}var rne=nne;function ine(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var QL=ine,one=Xte,sne=rne,ane=QL;function lne(t){var e=sne(t);return e.length==1&&e[0][2]?ane(e[0][0],e[0][1]):function(n){return n===t||one(n,t,e)}}var une=lne;function cne(t,e){return t!=null&&e in Object(t)}var fne=cne,hne=iL,dne=xE,pne=Un,mne=EE,gne=SE,yne=ny;function vne(t,e,n){e=hne(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=yne(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&gne(i)&&mne(s,i)&&(pne(t)||dne(t)))}var _ne=vne,wne=fne,bne=_ne;function xne(t,e){return t!=null&&bne(t,e,wne)}var Ene=xne,Sne=TE,Tne=oL,Ane=Ene,Ine=iE,Pne=YL,Cne=QL,One=ny,kne=1,Nne=2;function Rne(t,e){return Ine(t)&&Pne(e)?Cne(One(t),e):function(n){var r=Tne(n,t);return r===void 0&&r===e?Ane(n,t):Sne(e,r,kne|Nne)}}var Mne=Rne;function Dne(t){return t}var cu=Dne;function jne(t){return function(e){return e==null?void 0:e[t]}}var Lne=jne,$ne=fE;function Fne(t){return function(e){return $ne(e,t)}}var Vne=Fne,Une=Lne,Bne=Vne,zne=iE,Wne=ny;function Gne(t){return zne(t)?Une(Wne(t)):Bne(t)}var Hne=Gne,qne=une,Kne=Mne,Yne=cu,Qne=Un,Xne=Hne;function Jne(t){return typeof t=="function"?t:t==null?Yne:typeof t=="object"?Qne(t)?Kne(t[0],t[1]):qne(t):Xne(t)}var Go=Jne;function Zne(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var XL=Zne;function ere(t){return t!==t}var tre=ere;function nre(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var rre=nre,ire=XL,ore=tre,sre=rre;function are(t,e,n){return e===e?sre(t,e,n):ire(t,ore,n)}var lre=are,ure=lre;function cre(t,e){var n=t==null?0:t.length;return!!n&&ure(t,e,0)>-1}var fre=cre;function hre(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var dre=hre;function pre(){}var mre=pre,r0=HL,gre=mre,yre=bE,vre=1/0,_re=r0&&1/yre(new r0([,-0]))[1]==vre?function(t){return new r0(t)}:gre,wre=_re,bre=jL,xre=fre,Ere=dre,Sre=$L,Tre=wre,Are=bE,Ire=200;function Pre(t,e,n){var r=-1,i=xre,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=Ere;else if(o>=Ire){var u=e?null:Tre(t);if(u)return Are(u);s=!1,i=Sre,l=new bre}else l=e?[]:a;e:for(;++r<o;){var f=t[r],c=e?e(f):f;if(f=n||f!==0?f:0,s&&c===c){for(var d=l.length;d--;)if(l[d]===c)continue e;e&&l.push(c),a.push(f)}else i(l,c,n)||(l!==a&&l.push(c),a.push(f))}return a}var Cre=Pre,Ore=Go,kre=Cre;function Nre(t,e){return t&&t.length?kre(t,Ore(e)):[]}var Rre=Nre;const ZP=Je(Rre);function JL(t,e,n){return e===!0?ZP(t,n):Te(e)?ZP(t,e):t}function Sl(t){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(t)}var Mre=["ref"];function eC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eC(Object(n),!0).forEach(function(r){vy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e$(r.key),r)}}function jre(t,e,n){return e&&tC(t.prototype,e),n&&tC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lre(t,e,n){return e=cm(e),$re(t,ZL()?Reflect.construct(e,n||[],cm(t).constructor):e.apply(t,n))}function $re(t,e){if(e&&(Sl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fre(t)}function Fre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZL=function(){return!!t})()}function cm(t){return cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cm(t)}function Vre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tw(t,e)}function Tw(t,e){return Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tw(t,e)}function vy(t,e,n){return e=e$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e$(t){var e=Ure(t,"string");return Sl(e)=="symbol"?e:e+""}function Ure(t,e){if(Sl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bre(t,e){if(t==null)return{};var n=zre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Wre(t){return t.value}function Gre(t,e){if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return D.createElement(t,e);e.ref;var n=Bre(e,Mre);return D.createElement(wE,n)}var nC=1,Ts=function(t){function e(){var n;Dre(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Lre(this,e,[].concat(i)),vy(n,"lastBoundingBox",{width:-1,height:-1}),n}return Vre(e,t),jre(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>nC||Math.abs(i.height-this.lastBoundingBox.height)>nC)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ui({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,s=i.align,a=i.verticalAlign,l=i.margin,u=i.chartWidth,f=i.chartHeight,c,d;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();c={left:((u||0)-p.width)/2}}else c=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var m=this.getBBoxSnapshot();d={top:((f||0)-m.height)/2}}else d=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ui(ui({},c),d)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,s=i.width,a=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,c=ui(ui({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return D.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(p){r.wrapperNode=p}},Gre(o,ui(ui({},this.props),{},{payload:JL(f,u,Wre)})))}}],[{key:"getWithHeight",value:function(r,i){var o=ui(ui({},this.defaultProps),r.props),s=o.layout;return s==="vertical"&&oe(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(j.PureComponent);vy(Ts,"displayName","Legend");vy(Ts,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var rC=mh,Hre=xE,qre=Un,iC=rC?rC.isConcatSpreadable:void 0;function Kre(t){return qre(t)||Hre(t)||!!(iC&&t&&t[iC])}var Yre=Kre,Qre=VL,Xre=Yre;function t$(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=Xre),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?t$(a,e-1,n,r,i):Qre(i,a):r||(i[i.length]=a)}return i}var n$=t$;function Jre(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(n(o[l],l,o)===!1)break}return e}}var Zre=Jre,eie=Zre,tie=eie(),nie=tie,rie=nie,iie=yy;function oie(t,e){return t&&rie(t,e,iie)}var r$=oie,sie=vh;function aie(t,e){return function(n,r){if(n==null)return n;if(!sie(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var lie=aie,uie=r$,cie=lie,fie=cie(uie),AE=fie,hie=AE,die=vh;function pie(t,e){var n=-1,r=die(t)?Array(t.length):[];return hie(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var i$=pie;function mie(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var gie=mie,oC=ru;function yie(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=oC(t),s=e!==void 0,a=e===null,l=e===e,u=oC(e);if(!a&&!u&&!o&&t>e||o&&s&&l&&!a&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}var vie=yie,_ie=vie;function wie(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=_ie(i[r],o[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var bie=wie,i0=cE,xie=fE,Eie=Go,Sie=i$,Tie=gie,Aie=zL,Iie=bie,Pie=cu,Cie=Un;function Oie(t,e,n){e.length?e=i0(e,function(o){return Cie(o)?function(s){return xie(s,o.length===1?o[0]:o)}:o}):e=[Pie];var r=-1;e=i0(e,Aie(Eie));var i=Sie(t,function(o,s,a){var l=i0(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return Tie(i,function(o,s){return Iie(o,s,n)})}var kie=Oie;function Nie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Rie=Nie,Mie=Rie,sC=Math.max;function Die(t,e,n){return e=sC(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=sC(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),Mie(t,this,a)}}var jie=Die;function Lie(t){return function(){return t}}var $ie=Lie,Fie=ea,Vie=function(){try{var t=Fie(Object,"defineProperty");return t({},"",{}),t}catch{}}(),o$=Vie,Uie=$ie,aC=o$,Bie=cu,zie=aC?function(t,e){return aC(t,"toString",{configurable:!0,enumerable:!1,value:Uie(e),writable:!0})}:Bie,Wie=zie,Gie=800,Hie=16,qie=Date.now;function Kie(t){var e=0,n=0;return function(){var r=qie(),i=Hie-(r-n);if(n=r,i>0){if(++e>=Gie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Yie=Kie,Qie=Wie,Xie=Yie,Jie=Xie(Qie),Zie=Jie,eoe=cu,toe=jie,noe=Zie;function roe(t,e){return noe(toe(t,e,eoe),t+"")}var ioe=roe,ooe=sE,soe=vh,aoe=EE,loe=Wo;function uoe(t,e,n){if(!loe(n))return!1;var r=typeof e;return(r=="number"?soe(n)&&aoe(e,n.length):r=="string"&&e in n)?ooe(n[e],t):!1}var _y=uoe,coe=n$,foe=kie,hoe=ioe,lC=_y,doe=hoe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&lC(t,e[0],e[1])?e=[]:n>2&&lC(e[0],e[1],e[2])&&(e=[e[0]]),foe(t,coe(e,1),[])}),poe=doe;const IE=Je(poe);function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function Aw(){return Aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aw.apply(this,arguments)}function moe(t,e){return _oe(t)||voe(t,e)||yoe(t,e)||goe()}function goe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yoe(t,e){if(t){if(typeof t=="string")return uC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uC(t,e)}}function uC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function voe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function _oe(t){if(Array.isArray(t))return t}function cC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cC(Object(n),!0).forEach(function(r){woe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function woe(t,e,n){return e=boe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function boe(t){var e=xoe(t,"string");return mf(e)=="symbol"?e:e+""}function xoe(t,e){if(mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eoe(t){return Array.isArray(t)&&Dt(t[0])&&Dt(t[1])?t.join(" ~ "):t}var Soe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,f=e.payload,c=e.formatter,d=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,g=e.label,v=e.labelFormatter,_=e.accessibilityLayer,w=_===void 0?!1:_,E=function(){if(f&&f.length){var M={padding:0,margin:0},N=(d?IE(f,d):f).map(function(V,z){if(V.type==="none")return null;var q=o0({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},a),K=V.formatter||c||Eoe,F=V.value,W=V.name,Q=F,re=W;if(K&&Q!=null&&re!=null){var U=K(F,W,V,z,f);if(Array.isArray(U)){var X=moe(U,2);Q=X[0],re=X[1]}else Q=U}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:q},Dt(re)?D.createElement("span",{className:"recharts-tooltip-item-name"},re):null,Dt(re)?D.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,D.createElement("span",{className:"recharts-tooltip-item-value"},Q),D.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:M},N)}return null},C=o0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),T=o0({margin:0},u),I=!Oe(g),b=I?g:"",S=Le("recharts-default-tooltip",p),P=Le("recharts-tooltip-label",m);I&&v&&f!==void 0&&f!==null&&(b=v(g,f));var O=w?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",Aw({className:S,style:C},O),D.createElement("p",{className:P,style:T},D.isValidElement(b)?b:"".concat(b)),E())};function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function gd(t,e,n){return e=Toe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Toe(t){var e=Aoe(t,"string");return gf(e)=="symbol"?e:e+""}function Aoe(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wu="recharts-tooltip-wrapper",Ioe={visibility:"hidden"};function Poe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Le(Wu,gd(gd(gd(gd({},"".concat(Wu,"-right"),oe(n)&&e&&oe(e.x)&&n>=e.x),"".concat(Wu,"-left"),oe(n)&&e&&oe(e.x)&&n<e.x),"".concat(Wu,"-bottom"),oe(r)&&e&&oe(e.y)&&r>=e.y),"".concat(Wu,"-top"),oe(r)&&e&&oe(e.y)&&r<e.y))}function fC(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(o&&oe(o[r]))return o[r];var f=n[r]-a-i,c=n[r]+i;if(e[r])return s[r]?f:c;if(s[r]){var d=f,p=l[r];return d<p?Math.max(c,l[r]):Math.max(f,l[r])}var m=c+a,g=l[r]+u;return m>g?Math.max(f,l[r]):Math.max(c,l[r])}function Coe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Ooe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,f,c;return s.height>0&&s.width>0&&n?(f=fC({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),c=fC({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=Coe({translateX:f,translateY:c,useTranslate3d:a})):u=Ioe,{cssProperties:u,cssClasses:Poe({translateX:f,translateY:c,coordinate:n})}}function Tl(t){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(t)}function hC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hC(Object(n),!0).forEach(function(r){Pw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function koe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a$(r.key),r)}}function Noe(t,e,n){return e&&pC(t.prototype,e),n&&pC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Roe(t,e,n){return e=fm(e),Moe(t,s$()?Reflect.construct(e,n||[],fm(t).constructor):e.apply(t,n))}function Moe(t,e){if(e&&(Tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Doe(t)}function Doe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s$=function(){return!!t})()}function fm(t){return fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fm(t)}function joe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iw(t,e)}function Iw(t,e){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Iw(t,e)}function Pw(t,e,n){return e=a$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a$(t){var e=Loe(t,"string");return Tl(e)=="symbol"?e:e+""}function Loe(t,e){if(Tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mC=1,$oe=function(t){function e(){var n;koe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Roe(this,e,[].concat(i)),Pw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Pw(n,"handleKeyDown",function(s){if(s.key==="Escape"){var a,l,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return joe(e,t),Noe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>mC||Math.abs(r.height-this.state.lastBoundingBox.height)>mC)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.children,f=i.coordinate,c=i.hasPayload,d=i.isAnimationActive,p=i.offset,m=i.position,g=i.reverseDirection,v=i.useTranslate3d,_=i.viewBox,w=i.wrapperStyle,E=Ooe({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:_}),C=E.cssClasses,T=E.cssProperties,I=dC(dC({transition:d&&o?"transform ".concat(a,"ms ").concat(l):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&c?"visible":"hidden",position:"absolute",top:0,left:0},w);return D.createElement("div",{tabIndex:-1,className:C,style:I,ref:function(S){r.wrapperNode=S}},u)}}])}(j.PureComponent),Foe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Oi={isSsr:Foe(),get:function(e){return Oi[e]},set:function(e,n){if(typeof e=="string")Oi[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){Oi[i]=e[i]})}}};function Al(t){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Al(t)}function gC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gC(Object(n),!0).forEach(function(r){PE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Voe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u$(r.key),r)}}function Uoe(t,e,n){return e&&vC(t.prototype,e),n&&vC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Boe(t,e,n){return e=hm(e),zoe(t,l$()?Reflect.construct(e,n||[],hm(t).constructor):e.apply(t,n))}function zoe(t,e){if(e&&(Al(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Woe(t)}function Woe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l$=function(){return!!t})()}function hm(t){return hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hm(t)}function Goe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cw(t,e)}function Cw(t,e){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cw(t,e)}function PE(t,e,n){return e=u$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u$(t){var e=Hoe(t,"string");return Al(e)=="symbol"?e:e+""}function Hoe(t,e){if(Al(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Al(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qoe(t){return t.dataKey}function Koe(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(Soe,e)}var zr=function(t){function e(){return Voe(this,e),Boe(this,e,arguments)}return Goe(e,t),Uoe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.content,f=i.coordinate,c=i.filterNull,d=i.isAnimationActive,p=i.offset,m=i.payload,g=i.payloadUniqBy,v=i.position,_=i.reverseDirection,w=i.useTranslate3d,E=i.viewBox,C=i.wrapperStyle,T=m??[];c&&T.length&&(T=JL(m.filter(function(b){return b.value!=null&&(b.hide!==!0||r.props.includeHidden)}),g,qoe));var I=T.length>0;return D.createElement($oe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:d,active:o,coordinate:f,hasPayload:I,offset:p,position:v,reverseDirection:_,useTranslate3d:w,viewBox:E,wrapperStyle:C},Koe(u,yC(yC({},this.props),{},{payload:T})))}}])}(j.PureComponent);PE(zr,"displayName","Tooltip");PE(zr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Oi.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Yoe=oi,Qoe=function(){return Yoe.Date.now()},Xoe=Qoe,Joe=/\s/;function Zoe(t){for(var e=t.length;e--&&Joe.test(t.charAt(e)););return e}var ese=Zoe,tse=ese,nse=/^\s+/;function rse(t){return t&&t.slice(0,tse(t)+1).replace(nse,"")}var ise=rse,ose=ise,_C=Wo,sse=ru,wC=0/0,ase=/^[-+]0x[0-9a-f]+$/i,lse=/^0b[01]+$/i,use=/^0o[0-7]+$/i,cse=parseInt;function fse(t){if(typeof t=="number")return t;if(sse(t))return wC;if(_C(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=_C(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ose(t);var n=lse.test(t);return n||use.test(t)?cse(t.slice(2),n?2:8):ase.test(t)?wC:+t}var c$=fse,hse=Wo,s0=Xoe,bC=c$,dse="Expected a function",pse=Math.max,mse=Math.min;function gse(t,e,n){var r,i,o,s,a,l,u=0,f=!1,c=!1,d=!0;if(typeof t!="function")throw new TypeError(dse);e=bC(e)||0,hse(n)&&(f=!!n.leading,c="maxWait"in n,o=c?pse(bC(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d);function p(I){var b=r,S=i;return r=i=void 0,u=I,s=t.apply(S,b),s}function m(I){return u=I,a=setTimeout(_,e),f?p(I):s}function g(I){var b=I-l,S=I-u,P=e-b;return c?mse(P,o-S):P}function v(I){var b=I-l,S=I-u;return l===void 0||b>=e||b<0||c&&S>=o}function _(){var I=s0();if(v(I))return w(I);a=setTimeout(_,g(I))}function w(I){return a=void 0,d&&r?p(I):(r=i=void 0,s)}function E(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function C(){return a===void 0?s:w(s0())}function T(){var I=s0(),b=v(I);if(r=arguments,i=this,l=I,b){if(a===void 0)return m(l);if(c)return clearTimeout(a),a=setTimeout(_,e),p(l)}return a===void 0&&(a=setTimeout(_,e)),s}return T.cancel=E,T.flush=C,T}var yse=gse,vse=yse,_se=Wo,wse="Expected a function";function bse(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(wse);return _se(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),vse(t,e,{leading:r,maxWait:e,trailing:i})}var xse=bse;const f$=Je(xse);function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function xC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xC(Object(n),!0).forEach(function(r){Ese(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ese(t,e,n){return e=Sse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sse(t){var e=Tse(t,"string");return yf(e)=="symbol"?e:e+""}function Tse(t,e){if(yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ase(t,e){return Ose(t)||Cse(t,e)||Pse(t,e)||Ise()}function Ise(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pse(t,e){if(t){if(typeof t=="string")return EC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EC(t,e)}}function EC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cse(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Ose(t){if(Array.isArray(t))return t}var kse=j.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,f=u===void 0?0:u,c=t.minHeight,d=t.maxHeight,p=t.children,m=t.debounce,g=m===void 0?0:m,v=t.id,_=t.className,w=t.onResize,E=t.style,C=E===void 0?{}:E,T=j.useRef(null),I=j.useRef();I.current=w,j.useImperativeHandle(e,function(){return Object.defineProperty(T.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),T.current},configurable:!0})});var b=j.useState({containerWidth:i.width,containerHeight:i.height}),S=Ase(b,2),P=S[0],O=S[1],k=j.useCallback(function(N,V){O(function(z){var q=Math.round(N),K=Math.round(V);return z.containerWidth===q&&z.containerHeight===K?z:{containerWidth:q,containerHeight:K}})},[]);j.useEffect(function(){var N=function(W){var Q,re=W[0].contentRect,U=re.width,X=re.height;k(U,X),(Q=I.current)===null||Q===void 0||Q.call(I,U,X)};g>0&&(N=f$(N,g,{trailing:!0,leading:!1}));var V=new ResizeObserver(N),z=T.current.getBoundingClientRect(),q=z.width,K=z.height;return k(q,K),V.observe(T.current),function(){V.disconnect()}},[k,g]);var M=j.useMemo(function(){var N=P.containerWidth,V=P.containerHeight;if(N<0||V<0)return null;Ci(gs(s)||gs(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),Ci(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=gs(s)?N:s,q=gs(l)?V:l;n&&n>0&&(z?q=z/n:q&&(z=q*n),d&&q>d&&(q=d)),Ci(z>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,q,s,l,f,c,n);var K=!Array.isArray(p)&&Pi(p.type).endsWith("Chart");return D.Children.map(p,function(F){return D.isValidElement(F)?j.cloneElement(F,yd({width:z,height:q},K?{style:yd({height:"100%",width:"100%",maxHeight:q,maxWidth:z},F.props.style)}:{})):F})},[n,p,l,d,c,f,P,s]);return D.createElement("div",{id:v?"".concat(v):void 0,className:Le("recharts-responsive-container",_),style:yd(yd({},C),{},{width:s,height:l,minWidth:f,minHeight:c,maxHeight:d}),ref:T},M)}),h$=function(e){return null};h$.displayName="Cell";function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function SC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ow(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SC(Object(n),!0).forEach(function(r){Nse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nse(t,e,n){return e=Rse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rse(t){var e=Mse(t,"string");return vf(e)=="symbol"?e:e+""}function Mse(t,e){if(vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ha={widthCache:{},cacheCount:0},Dse=2e3,jse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TC="recharts_measurement_span";function Lse(t){var e=Ow({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Ac=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Oi.isSsr)return{width:0,height:0};var r=Lse(n),i=JSON.stringify({text:e,copyStyle:r});if(ha.widthCache[i])return ha.widthCache[i];try{var o=document.getElementById(TC);o||(o=document.createElement("span"),o.setAttribute("id",TC),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=Ow(Ow({},jse),r);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return ha.widthCache[i]=l,++ha.cacheCount>Dse&&(ha.cacheCount=0,ha.widthCache={}),l}catch{return{width:0,height:0}}},$se=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function dm(t,e){return Bse(t)||Use(t,e)||Vse(t,e)||Fse()}function Fse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vse(t,e){if(t){if(typeof t=="string")return AC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AC(t,e)}}function AC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Use(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Bse(t){if(Array.isArray(t))return t}function zse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gse(r.key),r)}}function Wse(t,e,n){return e&&IC(t.prototype,e),n&&IC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gse(t){var e=Hse(t,"string");return _f(e)=="symbol"?e:e+""}function Hse(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qse=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Kse=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,d$={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Yse=Object.keys(d$),Ma="NaN";function Qse(t,e){return t*d$[e]}var vd=function(){function t(e,n){zse(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!qse.test(n)&&(this.num=NaN,this.unit=""),Yse.includes(n)&&(this.num=Qse(e,n),this.unit="px")}return Wse(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Kse.exec(n))!==null&&r!==void 0?r:[],o=dm(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}])}();function p$(t){if(t.includes(Ma))return Ma;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=PC.exec(e))!==null&&n!==void 0?n:[],i=dm(r,4),o=i[1],s=i[2],a=i[3],l=vd.parse(o??""),u=vd.parse(a??""),f=s==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return Ma;e=e.replace(PC,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,d=(c=CC.exec(e))!==null&&c!==void 0?c:[],p=dm(d,4),m=p[1],g=p[2],v=p[3],_=vd.parse(m??""),w=vd.parse(v??""),E=g==="+"?_.add(w):_.subtract(w);if(E.isNaN())return Ma;e=e.replace(CC,E.toString())}return e}var OC=/\(([^()]*)\)/;function Xse(t){for(var e=t;e.includes("(");){var n=OC.exec(e),r=dm(n,2),i=r[1];e=e.replace(OC,p$(i))}return e}function Jse(t){var e=t.replace(/\s+/g,"");return e=Xse(e),e=p$(e),e}function Zse(t){try{return Jse(t)}catch{return Ma}}function a0(t){var e=Zse(t.slice(5,-1));return e===Ma?"":e}var eae=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],tae=["dx","dy","angle","className","breakAll"];function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kw.apply(this,arguments)}function kC(t,e){if(t==null)return{};var n=nae(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function NC(t,e){return sae(t)||oae(t,e)||iae(t,e)||rae()}function rae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iae(t,e){if(t){if(typeof t=="string")return RC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RC(t,e)}}function RC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function sae(t){if(Array.isArray(t))return t}var m$=/[ \f\n\r\t\v\u2028\u2029]+/,g$=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];Oe(n)||(r?o=n.toString().split(""):o=n.toString().split(m$));var s=o.map(function(l){return{word:l,width:Ac(l,i).width}}),a=r?0:Ac(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},aae=function(e,n,r,i,o){var s=e.maxLines,a=e.children,l=e.style,u=e.breakAll,f=oe(s),c=a,d=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(q,K){var F=K.word,W=K.width,Q=q[q.length-1];if(Q&&(i==null||o||Q.width+W+r<Number(i)))Q.words.push(F),Q.width+=W+r;else{var re={words:[F],width:W};q.push(re)}return q},[])},p=d(n),m=function(z){return z.reduce(function(q,K){return q.width>K.width?q:K})};if(!f)return p;for(var g="…",v=function(z){var q=c.slice(0,z),K=g$({breakAll:u,style:l,children:q+g}).wordsWithComputedWidth,F=d(K),W=F.length>s||m(F).width>Number(i);return[W,F]},_=0,w=c.length-1,E=0,C;_<=w&&E<=c.length-1;){var T=Math.floor((_+w)/2),I=T-1,b=v(I),S=NC(b,2),P=S[0],O=S[1],k=v(T),M=NC(k,1),N=M[0];if(!P&&!N&&(_=T+1),P&&N&&(w=T-1),!P&&N){C=O;break}E++}return C||p},MC=function(e){var n=Oe(e)?[]:e.toString().split(m$);return[{words:n}]},lae=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((n||r)&&!Oi.isSsr){var l,u,f=g$({breakAll:s,children:i,style:o});if(f){var c=f.wordsWithComputedWidth,d=f.spaceWidth;l=c,u=d}else return MC(i);return aae({breakAll:s,children:i,maxLines:a,style:o},l,u,n,r)}return MC(i)},DC="#808080",pm=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,f=e.scaleToFit,c=f===void 0?!1:f,d=e.textAnchor,p=d===void 0?"start":d,m=e.verticalAnchor,g=m===void 0?"end":m,v=e.fill,_=v===void 0?DC:v,w=kC(e,eae),E=j.useMemo(function(){return lae({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:c,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,c,w.style,w.width]),C=w.dx,T=w.dy,I=w.angle,b=w.className,S=w.breakAll,P=kC(w,tae);if(!Dt(r)||!Dt(o))return null;var O=r+(oe(C)?C:0),k=o+(oe(T)?T:0),M;switch(g){case"start":M=a0("calc(".concat(u,")"));break;case"middle":M=a0("calc(".concat((E.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:M=a0("calc(".concat(E.length-1," * -").concat(a,")"));break}var N=[];if(c){var V=E[0].width,z=w.width;N.push("scale(".concat((oe(z)?z/V:1)/V,")"))}return I&&N.push("rotate(".concat(I,", ").concat(O,", ").concat(k,")")),N.length&&(P.transform=N.join(" ")),D.createElement("text",kw({},Me(P,!0),{x:O,y:k,className:Le("recharts-text",b),textAnchor:p,fill:_.includes("url")?DC:_}),E.map(function(q,K){var F=q.words.join(S?"":" ");return D.createElement("tspan",{x:O,dy:K===0?M:a,key:"".concat(F,"-").concat(K)},F)}))};function Co(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function CE(t){let e,n,r;t.length!==2?(e=Co,n=(a,l)=>Co(t(a),l),r=(a,l)=>t(a)-l):(e=t===Co||t===uae?t:cae,n=t,r=t);function i(a,l,u=0,f=a.length){if(u<f){if(e(l,l)!==0)return f;do{const c=u+f>>>1;n(a[c],l)<0?u=c+1:f=c}while(u<f)}return u}function o(a,l,u=0,f=a.length){if(u<f){if(e(l,l)!==0)return f;do{const c=u+f>>>1;n(a[c],l)<=0?u=c+1:f=c}while(u<f)}return u}function s(a,l,u=0,f=a.length){const c=i(a,l,u,f-1);return c>u&&r(a[c-1],l)>-r(a[c],l)?c-1:c}return{left:i,center:s,right:o}}function cae(){return 0}function y$(t){return t===null?NaN:+t}function*fae(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const hae=CE(Co),dae=hae.right;CE(y$).center;const _h=dae;class jC extends Map{constructor(e,n=gae){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(LC(this,e))}has(e){return super.has(LC(this,e))}set(e,n){return super.set(pae(this,e),n)}delete(e){return super.delete(mae(this,e))}}function LC({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function pae({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function mae({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function gae(t){return t!==null&&typeof t=="object"?t.valueOf():t}function yae(t=Co){if(t===Co)return v$;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function v$(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const vae=Math.sqrt(50),_ae=Math.sqrt(10),wae=Math.sqrt(2);function mm(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=vae?10:o>=_ae?5:o>=wae?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?mm(t,e,n*2):[a,l,u]}function Nw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?mm(e,t,n):mm(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function Rw(t,e,n){return e=+e,t=+t,n=+n,mm(t,e,n)[2]}function Mw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Rw(e,t,n):Rw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function $C(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function FC(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function _$(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?v$:yae(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,f=Math.log(l),c=.5*Math.exp(2*f/3),d=.5*Math.sqrt(f*c*(l-c)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(e-u*c/l+d)),m=Math.min(r,Math.floor(e+(l-u)*c/l+d));_$(t,e,p,m,i)}const o=t[e];let s=n,a=r;for(Gu(t,n,e),i(t[r],o)>0&&Gu(t,n,r);s<a;){for(Gu(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?Gu(t,n,a):(++a,Gu(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Gu(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function bae(t,e,n){if(t=Float64Array.from(fae(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return FC(t);if(e>=1)return $C(t);var r,i=(r-1)*e,o=Math.floor(i),s=$C(_$(t,o).subarray(0,o+1)),a=FC(t.subarray(o+1));return s+(a-s)*(i-o)}}function xae(t,e,n=y$){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function Eae(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function yr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Dw=Symbol("implicit");function OE(){var t=new jC,e=[],n=[],r=Dw;function i(o){let s=t.get(o);if(s===void 0){if(r!==Dw)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new jC;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return OE(e,n).unknown(r)},yr.apply(i,arguments),i}function wf(){var t=OE().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,l=0,u=0,f=.5;delete t.unknown;function c(){var d=e().length,p=i<r,m=p?i:r,g=p?r:i;o=(g-m)/Math.max(1,d-l+u*2),a&&(o=Math.floor(o)),m+=(g-m-o*(d-l))*f,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var v=Eae(d).map(function(_){return m+o*_});return n(p?v.reverse():v)}return t.domain=function(d){return arguments.length?(e(d),c()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,c()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,c()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(d){return arguments.length?(a=!!d,c()):a},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),c()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),c()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,c()):u},t.align=function(d){return arguments.length?(f=Math.max(0,Math.min(1,d)),c()):f},t.copy=function(){return wf(e(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(f)},yr.apply(c(),arguments)}function w$(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return w$(e())},t}function Ic(){return w$(wf.apply(null,arguments).paddingInner(1))}function kE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function b$(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wh(){}var bf=.7,gm=1/bf,Ja="\\s*([+-]?\\d+)\\s*",xf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sae=/^#([0-9a-f]{3,8})$/,Tae=new RegExp(`^rgb\\(${Ja},${Ja},${Ja}\\)$`),Aae=new RegExp(`^rgb\\(${Jr},${Jr},${Jr}\\)$`),Iae=new RegExp(`^rgba\\(${Ja},${Ja},${Ja},${xf}\\)$`),Pae=new RegExp(`^rgba\\(${Jr},${Jr},${Jr},${xf}\\)$`),Cae=new RegExp(`^hsl\\(${xf},${Jr},${Jr}\\)$`),Oae=new RegExp(`^hsla\\(${xf},${Jr},${Jr},${xf}\\)$`),VC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kE(wh,Ef,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:UC,formatHex:UC,formatHex8:kae,formatHsl:Nae,formatRgb:BC,toString:BC});function UC(){return this.rgb().formatHex()}function kae(){return this.rgb().formatHex8()}function Nae(){return x$(this).formatHsl()}function BC(){return this.rgb().formatRgb()}function Ef(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sae.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?zC(e):n===3?new Dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_d(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_d(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tae.exec(t))?new Dn(e[1],e[2],e[3],1):(e=Aae.exec(t))?new Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Iae.exec(t))?_d(e[1],e[2],e[3],e[4]):(e=Pae.exec(t))?_d(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cae.exec(t))?HC(e[1],e[2]/100,e[3]/100,1):(e=Oae.exec(t))?HC(e[1],e[2]/100,e[3]/100,e[4]):VC.hasOwnProperty(t)?zC(VC[t]):t==="transparent"?new Dn(NaN,NaN,NaN,0):null}function zC(t){return new Dn(t>>16&255,t>>8&255,t&255,1)}function _d(t,e,n,r){return r<=0&&(t=e=n=NaN),new Dn(t,e,n,r)}function Rae(t){return t instanceof wh||(t=Ef(t)),t?(t=t.rgb(),new Dn(t.r,t.g,t.b,t.opacity)):new Dn}function jw(t,e,n,r){return arguments.length===1?Rae(t):new Dn(t,e,n,r??1)}function Dn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}kE(Dn,jw,b$(wh,{brighter(t){return t=t==null?gm:Math.pow(gm,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bf:Math.pow(bf,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dn(As(this.r),As(this.g),As(this.b),ym(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WC,formatHex:WC,formatHex8:Mae,formatRgb:GC,toString:GC}));function WC(){return`#${ys(this.r)}${ys(this.g)}${ys(this.b)}`}function Mae(){return`#${ys(this.r)}${ys(this.g)}${ys(this.b)}${ys((isNaN(this.opacity)?1:this.opacity)*255)}`}function GC(){const t=ym(this.opacity);return`${t===1?"rgb(":"rgba("}${As(this.r)}, ${As(this.g)}, ${As(this.b)}${t===1?")":`, ${t})`}`}function ym(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function As(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ys(t){return t=As(t),(t<16?"0":"")+t.toString(16)}function HC(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Or(t,e,n,r)}function x$(t){if(t instanceof Or)return new Or(t.h,t.s,t.l,t.opacity);if(t instanceof wh||(t=Ef(t)),!t)return new Or;if(t instanceof Or)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Or(s,a,l,t.opacity)}function Dae(t,e,n,r){return arguments.length===1?x$(t):new Or(t,e,n,r??1)}function Or(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}kE(Or,Dae,b$(wh,{brighter(t){return t=t==null?gm:Math.pow(gm,t),new Or(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bf:Math.pow(bf,t),new Or(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Dn(l0(t>=240?t-240:t+120,i,r),l0(t,i,r),l0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Or(qC(this.h),wd(this.s),wd(this.l),ym(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ym(this.opacity);return`${t===1?"hsl(":"hsla("}${qC(this.h)}, ${wd(this.s)*100}%, ${wd(this.l)*100}%${t===1?")":`, ${t})`}`}}));function qC(t){return t=(t||0)%360,t<0?t+360:t}function wd(t){return Math.max(0,Math.min(1,t||0))}function l0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const NE=t=>()=>t;function jae(t,e){return function(n){return t+n*e}}function Lae(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function $ae(t){return(t=+t)==1?E$:function(e,n){return n-e?Lae(e,n,t):NE(isNaN(e)?n:e)}}function E$(t,e){var n=e-t;return n?jae(t,n):NE(isNaN(t)?e:t)}const KC=function t(e){var n=$ae(e);function r(i,o){var s=n((i=jw(i)).r,(o=jw(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=E$(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function Fae(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Vae(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Uae(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=fu(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Bae(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vm(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function zae(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=fu(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Lw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,u0=new RegExp(Lw.source,"g");function Wae(t){return function(){return t}}function Gae(t){return function(e){return t(e)+""}}function Hae(t,e){var n=Lw.lastIndex=u0.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Lw.exec(t))&&(i=u0.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:vm(r,i)})),n=u0.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Gae(l[0].x):Wae(e):(e=l.length,function(u){for(var f=0,c;f<e;++f)a[(c=l[f]).i]=c.x(u);return a.join("")})}function fu(t,e){var n=typeof e,r;return e==null||n==="boolean"?NE(e):(n==="number"?vm:n==="string"?(r=Ef(e))?(e=r,KC):Hae:e instanceof Ef?KC:e instanceof Date?Bae:Vae(e)?Fae:Array.isArray(e)?Uae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zae:vm)(t,e)}function RE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function qae(t,e){e===void 0&&(e=t,t=fu);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Kae(t){return function(){return t}}function _m(t){return+t}var YC=[0,1];function Sn(t){return t}function $w(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Kae(isNaN(e)?NaN:.5)}function Yae(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Qae(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=$w(i,r),o=n(s,o)):(r=$w(r,i),o=n(o,s)),function(a){return o(r(a))}}function Xae(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=$w(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=_h(t,a,1,r)-1;return o[l](i[l](a))}}function bh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wy(){var t=YC,e=YC,n=fu,r,i,o,s=Sn,a,l,u;function f(){var d=Math.min(t.length,e.length);return s!==Sn&&(s=Yae(t[0],t[d-1])),a=d>2?Xae:Qae,l=u=null,c}function c(d){return d==null||isNaN(d=+d)?o:(l||(l=a(t.map(r),e,n)))(r(s(d)))}return c.invert=function(d){return s(i((u||(u=a(e,t.map(r),vm)))(d)))},c.domain=function(d){return arguments.length?(t=Array.from(d,_m),f()):t.slice()},c.range=function(d){return arguments.length?(e=Array.from(d),f()):e.slice()},c.rangeRound=function(d){return e=Array.from(d),n=RE,f()},c.clamp=function(d){return arguments.length?(s=d?!0:Sn,f()):s!==Sn},c.interpolate=function(d){return arguments.length?(n=d,f()):n},c.unknown=function(d){return arguments.length?(o=d,c):o},function(d,p){return r=d,i=p,f()}}function ME(){return wy()(Sn,Sn)}function Jae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function wm(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Il(t){return t=wm(Math.abs(t)),t?t[1]:NaN}function Zae(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function ele(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var tle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sf(t){if(!(e=tle.exec(t)))throw new Error("invalid format: "+t);var e;return new DE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Sf.prototype=DE.prototype;function DE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}DE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nle(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var S$;function rle(t,e){var n=wm(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(S$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wm(t,Math.max(0,e+o-1))[0]}function QC(t,e){var n=wm(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const XC={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Jae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>QC(t*100,e),r:QC,s:rle,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function JC(t){return t}var ZC=Array.prototype.map,eO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ile(t){var e=t.grouping===void 0||t.thousands===void 0?JC:Zae(ZC.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?JC:ele(ZC.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(c){c=Sf(c);var d=c.fill,p=c.align,m=c.sign,g=c.symbol,v=c.zero,_=c.width,w=c.comma,E=c.precision,C=c.trim,T=c.type;T==="n"?(w=!0,T="g"):XC[T]||(E===void 0&&(E=12),C=!0,T="g"),(v||d==="0"&&p==="=")&&(v=!0,d="0",p="=");var I=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",b=g==="$"?r:/[%p]/.test(T)?s:"",S=XC[T],P=/[defgprs%]/.test(T);E=E===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function O(k){var M=I,N=b,V,z,q;if(T==="c")N=S(k)+N,k="";else{k=+k;var K=k<0||1/k<0;if(k=isNaN(k)?l:S(Math.abs(k),E),C&&(k=nle(k)),K&&+k==0&&m!=="+"&&(K=!1),M=(K?m==="("?m:a:m==="-"||m==="("?"":m)+M,N=(T==="s"?eO[8+S$/3]:"")+N+(K&&m==="("?")":""),P){for(V=-1,z=k.length;++V<z;)if(q=k.charCodeAt(V),48>q||q>57){N=(q===46?i+k.slice(V+1):k.slice(V))+N,k=k.slice(0,V);break}}}w&&!v&&(k=e(k,1/0));var F=M.length+k.length+N.length,W=F<_?new Array(_-F+1).join(d):"";switch(w&&v&&(k=e(W+k,W.length?_-N.length:1/0),W=""),p){case"<":k=M+k+N+W;break;case"=":k=M+W+k+N;break;case"^":k=W.slice(0,F=W.length>>1)+M+k+N+W.slice(F);break;default:k=W+M+k+N;break}return o(k)}return O.toString=function(){return c+""},O}function f(c,d){var p=u((c=Sf(c),c.type="f",c)),m=Math.max(-8,Math.min(8,Math.floor(Il(d)/3)))*3,g=Math.pow(10,-m),v=eO[8+m/3];return function(_){return p(g*_)+v}}return{format:u,formatPrefix:f}}var bd,jE,T$;ole({thousands:",",grouping:[3],currency:["$",""]});function ole(t){return bd=ile(t),jE=bd.format,T$=bd.formatPrefix,bd}function sle(t){return Math.max(0,-Il(Math.abs(t)))}function ale(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Il(e)/3)))*3-Il(Math.abs(t)))}function lle(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Il(e)-Il(t))+1}function A$(t,e,n,r){var i=Mw(t,e,n),o;switch(r=Sf(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=ale(i,s))&&(r.precision=o),T$(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=lle(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=sle(i))&&(r.precision=o-(r.type==="%")*2);break}}return jE(r)}function Ho(t){var e=t.domain;return t.ticks=function(n){var r=e();return Nw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return A$(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,f=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);f-- >0;){if(u=Rw(s,a,n),u===l)return r[i]=s,r[o]=a,e(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function bm(){var t=ME();return t.copy=function(){return bh(t,bm())},yr.apply(t,arguments),Ho(t)}function I$(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,_m),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return I$(t).unknown(e)},t=arguments.length?Array.from(t,_m):[0,1],Ho(n)}function P$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function tO(t){return Math.log(t)}function nO(t){return Math.exp(t)}function ule(t){return-Math.log(-t)}function cle(t){return-Math.exp(-t)}function fle(t){return isFinite(t)?+("1e"+t):t<0?0:t}function hle(t){return t===10?fle:t===Math.E?Math.exp:e=>Math.pow(t,e)}function dle(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function rO(t){return(e,n)=>-t(-e,n)}function LE(t){const e=t(tO,nO),n=e.domain;let r=10,i,o;function s(){return i=dle(r),o=hle(r),n()[0]<0?(i=rO(i),o=rO(o),t(ule,cle)):t(tO,nO),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let u=l[0],f=l[l.length-1];const c=f<u;c&&([u,f]=[f,u]);let d=i(u),p=i(f),m,g;const v=a==null?10:+a;let _=[];if(!(r%1)&&p-d<v){if(d=Math.floor(d),p=Math.ceil(p),u>0){for(;d<=p;++d)for(m=1;m<r;++m)if(g=d<0?m/o(-d):m*o(d),!(g<u)){if(g>f)break;_.push(g)}}else for(;d<=p;++d)for(m=r-1;m>=1;--m)if(g=d>0?m/o(-d):m*o(d),!(g<u)){if(g>f)break;_.push(g)}_.length*2<v&&(_=Nw(u,f,v))}else _=Nw(d,p,Math.min(p-d,v)).map(o);return c?_.reverse():_},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Sf(l)).precision==null&&(l.trim=!0),l=jE(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return f=>{let c=f/o(Math.round(i(f)));return c*r<r-.5&&(c*=r),c<=u?l(f):""}},e.nice=()=>n(P$(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function C$(){const t=LE(wy()).domain([1,10]);return t.copy=()=>bh(t,C$()).base(t.base()),yr.apply(t,arguments),t}function iO(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function oO(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function $E(t){var e=1,n=t(iO(e),oO(e));return n.constant=function(r){return arguments.length?t(iO(e=+r),oO(e)):e},Ho(n)}function O$(){var t=$E(wy());return t.copy=function(){return bh(t,O$()).constant(t.constant())},yr.apply(t,arguments)}function sO(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ple(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function mle(t){return t<0?-t*t:t*t}function FE(t){var e=t(Sn,Sn),n=1;function r(){return n===1?t(Sn,Sn):n===.5?t(ple,mle):t(sO(n),sO(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ho(e)}function VE(){var t=FE(wy());return t.copy=function(){return bh(t,VE()).exponent(t.exponent())},yr.apply(t,arguments),t}function gle(){return VE.apply(null,arguments).exponent(.5)}function aO(t){return Math.sign(t)*t*t}function yle(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function k$(){var t=ME(),e=[0,1],n=!1,r;function i(o){var s=yle(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(aO(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,_m)).map(aO)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return k$(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},yr.apply(i,arguments),Ho(i)}function N$(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=xae(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[_h(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Co),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return N$().domain(t).range(e).unknown(r)},yr.apply(o,arguments)}function R$(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[_h(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return R$().domain([t,e]).range(i).unknown(o)},yr.apply(Ho(s),arguments)}function M$(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[_h(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return M$().domain(t).range(e).unknown(n)},yr.apply(i,arguments)}const c0=new Date,f0=new Date;function Lt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),e(o,a),t(o);while(u<o&&o<s);return l},i.filter=o=>Lt(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(c0.setTime(+o),f0.setTime(+s),t(c0),t(f0),Math.floor(n(c0,f0))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const xm=Lt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);xm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Lt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):xm);xm.range;const xi=1e3,lr=xi*60,Ei=lr*60,Bi=Ei*24,UE=Bi*7,lO=Bi*30,h0=Bi*365,vs=Lt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*xi)},(t,e)=>(e-t)/xi,t=>t.getUTCSeconds());vs.range;const BE=Lt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xi)},(t,e)=>{t.setTime(+t+e*lr)},(t,e)=>(e-t)/lr,t=>t.getMinutes());BE.range;const zE=Lt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*lr)},(t,e)=>(e-t)/lr,t=>t.getUTCMinutes());zE.range;const WE=Lt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xi-t.getMinutes()*lr)},(t,e)=>{t.setTime(+t+e*Ei)},(t,e)=>(e-t)/Ei,t=>t.getHours());WE.range;const GE=Lt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ei)},(t,e)=>(e-t)/Ei,t=>t.getUTCHours());GE.range;const xh=Lt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*lr)/Bi,t=>t.getDate()-1);xh.range;const by=Lt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bi,t=>t.getUTCDate()-1);by.range;const D$=Lt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bi,t=>Math.floor(t/Bi));D$.range;function ta(t){return Lt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*lr)/UE)}const xy=ta(0),Em=ta(1),vle=ta(2),_le=ta(3),Pl=ta(4),wle=ta(5),ble=ta(6);xy.range;Em.range;vle.range;_le.range;Pl.range;wle.range;ble.range;function na(t){return Lt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/UE)}const Ey=na(0),Sm=na(1),xle=na(2),Ele=na(3),Cl=na(4),Sle=na(5),Tle=na(6);Ey.range;Sm.range;xle.range;Ele.range;Cl.range;Sle.range;Tle.range;const HE=Lt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());HE.range;const qE=Lt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());qE.range;const zi=Lt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());zi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});zi.range;const Wi=Lt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Wi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Wi.range;function j$(t,e,n,r,i,o){const s=[[vs,1,xi],[vs,5,5*xi],[vs,15,15*xi],[vs,30,30*xi],[o,1,lr],[o,5,5*lr],[o,15,15*lr],[o,30,30*lr],[i,1,Ei],[i,3,3*Ei],[i,6,6*Ei],[i,12,12*Ei],[r,1,Bi],[r,2,2*Bi],[n,1,UE],[e,1,lO],[e,3,3*lO],[t,1,h0]];function a(u,f,c){const d=f<u;d&&([u,f]=[f,u]);const p=c&&typeof c.range=="function"?c:l(u,f,c),m=p?p.range(u,+f+1):[];return d?m.reverse():m}function l(u,f,c){const d=Math.abs(f-u)/c,p=CE(([,,v])=>v).right(s,d);if(p===s.length)return t.every(Mw(u/h0,f/h0,c));if(p===0)return xm.every(Math.max(Mw(u,f,c),1));const[m,g]=s[d/s[p-1][2]<s[p][2]/d?p-1:p];return m.every(g)}return[a,l]}const[Ale,Ile]=j$(Wi,qE,Ey,D$,GE,zE),[Ple,Cle]=j$(zi,HE,xy,xh,WE,BE);function d0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function p0(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Hu(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ole(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,u=qu(i),f=Ku(i),c=qu(o),d=Ku(o),p=qu(s),m=Ku(s),g=qu(a),v=Ku(a),_=qu(l),w=Ku(l),E={a:K,A:F,b:W,B:Q,c:null,d:pO,e:pO,f:Zle,g:uue,G:fue,H:Qle,I:Xle,j:Jle,L:L$,m:eue,M:tue,p:re,q:U,Q:yO,s:vO,S:nue,u:rue,U:iue,V:oue,w:sue,W:aue,x:null,X:null,y:lue,Y:cue,Z:hue,"%":gO},C={a:X,A:ue,b:de,B:me,c:null,d:mO,e:mO,f:gue,g:Aue,G:Pue,H:due,I:pue,j:mue,L:F$,m:yue,M:vue,p:xe,q:ae,Q:yO,s:vO,S:_ue,u:wue,U:bue,V:xue,w:Eue,W:Sue,x:null,X:null,y:Tue,Y:Iue,Z:Cue,"%":gO},T={a:O,A:k,b:M,B:N,c:V,d:hO,e:hO,f:Hle,g:fO,G:cO,H:dO,I:dO,j:Ble,L:Gle,m:Ule,M:zle,p:P,q:Vle,Q:Kle,s:Yle,S:Wle,u:Dle,U:jle,V:Lle,w:Mle,W:$le,x:z,X:q,y:fO,Y:cO,Z:Fle,"%":qle};E.x=I(n,E),E.X=I(r,E),E.c=I(e,E),C.x=I(n,C),C.X=I(r,C),C.c=I(e,C);function I(Y,te){return function(le){var G=[],_e=-1,$=0,se=Y.length,Ie,$e,Ht;for(le instanceof Date||(le=new Date(+le));++_e<se;)Y.charCodeAt(_e)===37&&(G.push(Y.slice($,_e)),($e=uO[Ie=Y.charAt(++_e)])!=null?Ie=Y.charAt(++_e):$e=Ie==="e"?" ":"0",(Ht=te[Ie])&&(Ie=Ht(le,$e)),G.push(Ie),$=_e+1);return G.push(Y.slice($,_e)),G.join("")}}function b(Y,te){return function(le){var G=Hu(1900,void 0,1),_e=S(G,Y,le+="",0),$,se;if(_e!=le.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(te&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?($=p0(Hu(G.y,0,1)),se=$.getUTCDay(),$=se>4||se===0?Sm.ceil($):Sm($),$=by.offset($,(G.V-1)*7),G.y=$.getUTCFullYear(),G.m=$.getUTCMonth(),G.d=$.getUTCDate()+(G.w+6)%7):($=d0(Hu(G.y,0,1)),se=$.getDay(),$=se>4||se===0?Em.ceil($):Em($),$=xh.offset($,(G.V-1)*7),G.y=$.getFullYear(),G.m=$.getMonth(),G.d=$.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),se="Z"in G?p0(Hu(G.y,0,1)).getUTCDay():d0(Hu(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(se+5)%7:G.w+G.U*7-(se+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,p0(G)):d0(G)}}function S(Y,te,le,G){for(var _e=0,$=te.length,se=le.length,Ie,$e;_e<$;){if(G>=se)return-1;if(Ie=te.charCodeAt(_e++),Ie===37){if(Ie=te.charAt(_e++),$e=T[Ie in uO?te.charAt(_e++):Ie],!$e||(G=$e(Y,le,G))<0)return-1}else if(Ie!=le.charCodeAt(G++))return-1}return G}function P(Y,te,le){var G=u.exec(te.slice(le));return G?(Y.p=f.get(G[0].toLowerCase()),le+G[0].length):-1}function O(Y,te,le){var G=p.exec(te.slice(le));return G?(Y.w=m.get(G[0].toLowerCase()),le+G[0].length):-1}function k(Y,te,le){var G=c.exec(te.slice(le));return G?(Y.w=d.get(G[0].toLowerCase()),le+G[0].length):-1}function M(Y,te,le){var G=_.exec(te.slice(le));return G?(Y.m=w.get(G[0].toLowerCase()),le+G[0].length):-1}function N(Y,te,le){var G=g.exec(te.slice(le));return G?(Y.m=v.get(G[0].toLowerCase()),le+G[0].length):-1}function V(Y,te,le){return S(Y,e,te,le)}function z(Y,te,le){return S(Y,n,te,le)}function q(Y,te,le){return S(Y,r,te,le)}function K(Y){return s[Y.getDay()]}function F(Y){return o[Y.getDay()]}function W(Y){return l[Y.getMonth()]}function Q(Y){return a[Y.getMonth()]}function re(Y){return i[+(Y.getHours()>=12)]}function U(Y){return 1+~~(Y.getMonth()/3)}function X(Y){return s[Y.getUTCDay()]}function ue(Y){return o[Y.getUTCDay()]}function de(Y){return l[Y.getUTCMonth()]}function me(Y){return a[Y.getUTCMonth()]}function xe(Y){return i[+(Y.getUTCHours()>=12)]}function ae(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var te=I(Y+="",E);return te.toString=function(){return Y},te},parse:function(Y){var te=b(Y+="",!1);return te.toString=function(){return Y},te},utcFormat:function(Y){var te=I(Y+="",C);return te.toString=function(){return Y},te},utcParse:function(Y){var te=b(Y+="",!0);return te.toString=function(){return Y},te}}}var uO={"-":"",_:" ",0:"0"},Gt=/^\s*\d+/,kle=/^%/,Nle=/[\\^$*+?|[\]().{}]/g;function Ue(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Rle(t){return t.replace(Nle,"\\$&")}function qu(t){return new RegExp("^(?:"+t.map(Rle).join("|")+")","i")}function Ku(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Mle(t,e,n){var r=Gt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Dle(t,e,n){var r=Gt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function jle(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Lle(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function $le(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function cO(t,e,n){var r=Gt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function fO(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Fle(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Vle(t,e,n){var r=Gt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ule(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function hO(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ble(t,e,n){var r=Gt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function dO(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function zle(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wle(t,e,n){var r=Gt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Gle(t,e,n){var r=Gt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Hle(t,e,n){var r=Gt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qle(t,e,n){var r=kle.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Kle(t,e,n){var r=Gt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Yle(t,e,n){var r=Gt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function pO(t,e){return Ue(t.getDate(),e,2)}function Qle(t,e){return Ue(t.getHours(),e,2)}function Xle(t,e){return Ue(t.getHours()%12||12,e,2)}function Jle(t,e){return Ue(1+xh.count(zi(t),t),e,3)}function L$(t,e){return Ue(t.getMilliseconds(),e,3)}function Zle(t,e){return L$(t,e)+"000"}function eue(t,e){return Ue(t.getMonth()+1,e,2)}function tue(t,e){return Ue(t.getMinutes(),e,2)}function nue(t,e){return Ue(t.getSeconds(),e,2)}function rue(t){var e=t.getDay();return e===0?7:e}function iue(t,e){return Ue(xy.count(zi(t)-1,t),e,2)}function $$(t){var e=t.getDay();return e>=4||e===0?Pl(t):Pl.ceil(t)}function oue(t,e){return t=$$(t),Ue(Pl.count(zi(t),t)+(zi(t).getDay()===4),e,2)}function sue(t){return t.getDay()}function aue(t,e){return Ue(Em.count(zi(t)-1,t),e,2)}function lue(t,e){return Ue(t.getFullYear()%100,e,2)}function uue(t,e){return t=$$(t),Ue(t.getFullYear()%100,e,2)}function cue(t,e){return Ue(t.getFullYear()%1e4,e,4)}function fue(t,e){var n=t.getDay();return t=n>=4||n===0?Pl(t):Pl.ceil(t),Ue(t.getFullYear()%1e4,e,4)}function hue(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ue(e/60|0,"0",2)+Ue(e%60,"0",2)}function mO(t,e){return Ue(t.getUTCDate(),e,2)}function due(t,e){return Ue(t.getUTCHours(),e,2)}function pue(t,e){return Ue(t.getUTCHours()%12||12,e,2)}function mue(t,e){return Ue(1+by.count(Wi(t),t),e,3)}function F$(t,e){return Ue(t.getUTCMilliseconds(),e,3)}function gue(t,e){return F$(t,e)+"000"}function yue(t,e){return Ue(t.getUTCMonth()+1,e,2)}function vue(t,e){return Ue(t.getUTCMinutes(),e,2)}function _ue(t,e){return Ue(t.getUTCSeconds(),e,2)}function wue(t){var e=t.getUTCDay();return e===0?7:e}function bue(t,e){return Ue(Ey.count(Wi(t)-1,t),e,2)}function V$(t){var e=t.getUTCDay();return e>=4||e===0?Cl(t):Cl.ceil(t)}function xue(t,e){return t=V$(t),Ue(Cl.count(Wi(t),t)+(Wi(t).getUTCDay()===4),e,2)}function Eue(t){return t.getUTCDay()}function Sue(t,e){return Ue(Sm.count(Wi(t)-1,t),e,2)}function Tue(t,e){return Ue(t.getUTCFullYear()%100,e,2)}function Aue(t,e){return t=V$(t),Ue(t.getUTCFullYear()%100,e,2)}function Iue(t,e){return Ue(t.getUTCFullYear()%1e4,e,4)}function Pue(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cl(t):Cl.ceil(t),Ue(t.getUTCFullYear()%1e4,e,4)}function Cue(){return"+0000"}function gO(){return"%"}function yO(t){return+t}function vO(t){return Math.floor(+t/1e3)}var da,U$,B$;Oue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Oue(t){return da=Ole(t),U$=da.format,da.parse,B$=da.utcFormat,da.utcParse,da}function kue(t){return new Date(t)}function Nue(t){return t instanceof Date?+t:+new Date(+t)}function KE(t,e,n,r,i,o,s,a,l,u){var f=ME(),c=f.invert,d=f.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),_=u("%a %d"),w=u("%b %d"),E=u("%B"),C=u("%Y");function T(I){return(l(I)<I?p:a(I)<I?m:s(I)<I?g:o(I)<I?v:r(I)<I?i(I)<I?_:w:n(I)<I?E:C)(I)}return f.invert=function(I){return new Date(c(I))},f.domain=function(I){return arguments.length?d(Array.from(I,Nue)):d().map(kue)},f.ticks=function(I){var b=d();return t(b[0],b[b.length-1],I??10)},f.tickFormat=function(I,b){return b==null?T:u(b)},f.nice=function(I){var b=d();return(!I||typeof I.range!="function")&&(I=e(b[0],b[b.length-1],I??10)),I?d(P$(b,I)):f},f.copy=function(){return bh(f,KE(t,e,n,r,i,o,s,a,l,u))},f}function Rue(){return yr.apply(KE(Ple,Cle,zi,HE,xy,xh,WE,BE,vs,U$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mue(){return yr.apply(KE(Ale,Ile,Wi,qE,Ey,by,GE,zE,vs,B$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sy(){var t=0,e=1,n,r,i,o,s=Sn,a=!1,l;function u(c){return c==null||isNaN(c=+c)?l:s(i===0?.5:(c=(o(c)-n)*i,a?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([t,e]=c,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(c){return arguments.length?(a=!!c,u):a},u.interpolator=function(c){return arguments.length?(s=c,u):s};function f(c){return function(d){var p,m;return arguments.length?([p,m]=d,s=c(p,m),u):[s(0),s(1)]}}return u.range=f(fu),u.rangeRound=f(RE),u.unknown=function(c){return arguments.length?(l=c,u):l},function(c){return o=c,n=c(t),r=c(e),i=n===r?0:1/(r-n),u}}function qo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function z$(){var t=Ho(Sy()(Sn));return t.copy=function(){return qo(t,z$())},Qi.apply(t,arguments)}function W$(){var t=LE(Sy()).domain([1,10]);return t.copy=function(){return qo(t,W$()).base(t.base())},Qi.apply(t,arguments)}function G$(){var t=$E(Sy());return t.copy=function(){return qo(t,G$()).constant(t.constant())},Qi.apply(t,arguments)}function YE(){var t=FE(Sy());return t.copy=function(){return qo(t,YE()).exponent(t.exponent())},Qi.apply(t,arguments)}function Due(){return YE.apply(null,arguments).exponent(.5)}function H$(){var t=[],e=Sn;function n(r){if(r!=null&&!isNaN(r=+r))return e((_h(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Co),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>bae(t,o/r))},n.copy=function(){return H$(e).domain(t)},Qi.apply(n,arguments)}function Ty(){var t=0,e=.5,n=1,r=1,i,o,s,a,l,u=Sn,f,c=!1,d;function p(g){return isNaN(g=+g)?d:(g=.5+((g=+f(g))-o)*(r*g<r*o?a:l),u(c?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,n]=g,i=f(t=+t),o=f(e=+e),s=f(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,p):[t,e,n]},p.clamp=function(g){return arguments.length?(c=!!g,p):c},p.interpolator=function(g){return arguments.length?(u=g,p):u};function m(g){return function(v){var _,w,E;return arguments.length?([_,w,E]=v,u=qae(g,[_,w,E]),p):[u(0),u(.5),u(1)]}}return p.range=m(fu),p.rangeRound=m(RE),p.unknown=function(g){return arguments.length?(d=g,p):d},function(g){return f=g,i=g(t),o=g(e),s=g(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,p}}function q$(){var t=Ho(Ty()(Sn));return t.copy=function(){return qo(t,q$())},Qi.apply(t,arguments)}function K$(){var t=LE(Ty()).domain([.1,1,10]);return t.copy=function(){return qo(t,K$()).base(t.base())},Qi.apply(t,arguments)}function Y$(){var t=$E(Ty());return t.copy=function(){return qo(t,Y$()).constant(t.constant())},Qi.apply(t,arguments)}function QE(){var t=FE(Ty());return t.copy=function(){return qo(t,QE()).exponent(t.exponent())},Qi.apply(t,arguments)}function jue(){return QE.apply(null,arguments).exponent(.5)}const _O=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:wf,scaleDiverging:q$,scaleDivergingLog:K$,scaleDivergingPow:QE,scaleDivergingSqrt:jue,scaleDivergingSymlog:Y$,scaleIdentity:I$,scaleImplicit:Dw,scaleLinear:bm,scaleLog:C$,scaleOrdinal:OE,scalePoint:Ic,scalePow:VE,scaleQuantile:N$,scaleQuantize:R$,scaleRadial:k$,scaleSequential:z$,scaleSequentialLog:W$,scaleSequentialPow:YE,scaleSequentialQuantile:H$,scaleSequentialSqrt:Due,scaleSequentialSymlog:G$,scaleSqrt:gle,scaleSymlog:O$,scaleThreshold:M$,scaleTime:Rue,scaleUtc:Mue,tickFormat:A$},Symbol.toStringTag,{value:"Module"}));var Lue=ru;function $ue(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!Lue(s):n(s,a)))var a=s,l=o}return l}var Q$=$ue;function Fue(t,e){return t>e}var Vue=Fue,Uue=Q$,Bue=Vue,zue=cu;function Wue(t){return t&&t.length?Uue(t,zue,Bue):void 0}var Gue=Wue;const Ay=Je(Gue);function Hue(t,e){return t<e}var que=Hue,Kue=Q$,Yue=que,Que=cu;function Xue(t){return t&&t.length?Kue(t,Que,Yue):void 0}var Jue=Xue;const Iy=Je(Jue);var Zue=cE,ece=Go,tce=i$,nce=Un;function rce(t,e){var n=nce(t)?Zue:tce;return n(t,ece(e))}var ice=rce,oce=n$,sce=ice;function ace(t,e){return oce(sce(t,e),1)}var lce=ace;const uce=Je(lce);var cce=TE;function fce(t,e){return cce(t,e)}var hce=fce;const Py=Je(hce);var hu=1e9,dce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JE,ct=!0,mr="[DecimalError] ",Is=mr+"Invalid argument: ",XE=mr+"Exponent out of range: ",du=Math.floor,ls=Math.pow,pce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,qn,Vt=1e7,ot=7,X$=9007199254740991,Tm=du(X$/ot),fe={};fe.absoluteValue=fe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};fe.comparedTo=fe.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};fe.decimalPlaces=fe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*ot;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};fe.dividedBy=fe.div=function(t){return ki(this,new this.constructor(t))};fe.dividedToIntegerBy=fe.idiv=function(t){var e=this,n=e.constructor;return Xe(ki(e,new n(t),0,1),n.precision)};fe.equals=fe.eq=function(t){return!this.cmp(t)};fe.exponent=function(){return Pt(this)};fe.greaterThan=fe.gt=function(t){return this.cmp(t)>0};fe.greaterThanOrEqualTo=fe.gte=function(t){return this.cmp(t)>=0};fe.isInteger=fe.isint=function(){return this.e>this.d.length-2};fe.isNegative=fe.isneg=function(){return this.s<0};fe.isPositive=fe.ispos=function(){return this.s>0};fe.isZero=function(){return this.s===0};fe.lessThan=fe.lt=function(t){return this.cmp(t)<0};fe.lessThanOrEqualTo=fe.lte=function(t){return this.cmp(t)<1};fe.logarithm=fe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(qn))throw Error(mr+"NaN");if(n.s<1)throw Error(mr+(n.s?"NaN":"-Infinity"));return n.eq(qn)?new r(0):(ct=!1,e=ki(Tf(n,o),Tf(t,o),o),ct=!0,Xe(e,i))};fe.minus=fe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?eF(e,t):J$(e,(t.s=-t.s,t))};fe.modulo=fe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(mr+"NaN");return n.s?(ct=!1,e=ki(n,t,0,1).times(t),ct=!0,n.minus(e)):Xe(new r(n),i)};fe.naturalExponential=fe.exp=function(){return Z$(this)};fe.naturalLogarithm=fe.ln=function(){return Tf(this)};fe.negated=fe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};fe.plus=fe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?J$(e,t):eF(e,(t.s=-t.s,t))};fe.precision=fe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Is+t);if(e=Pt(i)+1,r=i.d.length-1,n=r*ot+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};fe.squareRoot=fe.sqrt=function(){var t,e,n,r,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(mr+"NaN")}for(t=Pt(a),ct=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Gr(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=du((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(o=r,r=o.plus(ki(a,o,s+2)).times(.5),Gr(o.d).slice(0,s)===(e=Gr(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Xe(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return ct=!0,Xe(r,n)};fe.times=fe.mul=function(t){var e,n,r,i,o,s,a,l,u,f=this,c=f.constructor,d=f.d,p=(t=new c(t)).d;if(!f.s||!t.s)return new c(0);for(t.s*=f.s,n=f.e+t.e,l=d.length,u=p.length,l<u&&(o=d,d=p,p=o,s=l,l=u,u=s),o=[],s=l+u,r=s;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+p[r]*d[i-r-1]+e,o[i--]=a%Vt|0,e=a/Vt|0;o[i]=(o[i]+e)%Vt|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,ct?Xe(t,c.precision):t};fe.toDecimalPlaces=fe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ri(t,0,hu),e===void 0?e=r.rounding:ri(e,0,8),Xe(n,t+Pt(n)+1,e))};fe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ws(r,!0):(ri(t,0,hu),e===void 0?e=i.rounding:ri(e,0,8),r=Xe(new i(r),t+1,e),n=Ws(r,!0,t+1)),n};fe.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Ws(i):(ri(t,0,hu),e===void 0?e=o.rounding:ri(e,0,8),r=Xe(new o(i),t+Pt(i)+1,e),n=Ws(r.abs(),!1,t+Pt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};fe.toInteger=fe.toint=function(){var t=this,e=t.constructor;return Xe(new e(t),Pt(t)+1,e.rounding)};fe.toNumber=function(){return+this};fe.toPower=fe.pow=function(t){var e,n,r,i,o,s,a=this,l=a.constructor,u=12,f=+(t=new l(t));if(!t.s)return new l(qn);if(a=new l(a),!a.s){if(t.s<1)throw Error(mr+"Infinity");return a}if(a.eq(qn))return a;if(r=l.precision,t.eq(qn))return Xe(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=f<0?-f:f)<=X$){for(i=new l(qn),e=Math.ceil(r/ot+4),ct=!1;n%2&&(i=i.times(a),bO(i.d,e)),n=du(n/2),n!==0;)a=a.times(a),bO(a.d,e);return ct=!0,t.s<0?new l(qn).div(i):Xe(i,r)}}else if(o<0)throw Error(mr+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,ct=!1,i=t.times(Tf(a,r+u)),ct=!0,i=Z$(i),i.s=o,i};fe.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Pt(i),r=Ws(i,n<=o.toExpNeg||n>=o.toExpPos)):(ri(t,1,hu),e===void 0?e=o.rounding:ri(e,0,8),i=Xe(new o(i),t,e),n=Pt(i),r=Ws(i,t<=n||n<=o.toExpNeg,t)),r};fe.toSignificantDigits=fe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ri(t,1,hu),e===void 0?e=r.rounding:ri(e,0,8)),Xe(new r(n),t,e)};fe.toString=fe.valueOf=fe.val=fe.toJSON=fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Pt(t),n=t.constructor;return Ws(t,e<=n.toExpNeg||e>=n.toExpPos)};function J$(t,e){var n,r,i,o,s,a,l,u,f=t.constructor,c=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),ct?Xe(e,c):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(r=l,o=-o,a=u.length):(r=u,i=s,a=l.length),s=Math.ceil(c/ot),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=l.length,o=u.length,a-o<0&&(o=a,r=u,u=l,l=r),n=0;o;)n=(l[--o]=l[o]+u[o]+n)/Vt|0,l[o]%=Vt;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,ct?Xe(e,c):e}function ri(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Is+t)}function Gr(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=ot-r.length,n&&(o+=io(n)),o+=r;s=t[e],r=s+"",n=ot-r.length,n&&(o+=io(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var ki=function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%Vt|0,s=o/Vt|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Vt+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,l,u,f,c,d,p,m,g,v,_,w,E,C,T,I,b,S,P=r.constructor,O=r.s==i.s?1:-1,k=r.d,M=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(mr+"Division by zero");for(l=r.e-i.e,b=M.length,T=k.length,p=new P(O),m=p.d=[],u=0;M[u]==(k[u]||0);)++u;if(M[u]>(k[u]||0)&&--l,o==null?w=o=P.precision:s?w=o+(Pt(r)-Pt(i))+1:w=o,w<0)return new P(0);if(w=w/ot+2|0,u=0,b==1)for(f=0,M=M[0],w++;(u<T||f)&&w--;u++)E=f*Vt+(k[u]||0),m[u]=E/M|0,f=E%M|0;else{for(f=Vt/(M[0]+1)|0,f>1&&(M=t(M,f),k=t(k,f),b=M.length,T=k.length),C=b,g=k.slice(0,b),v=g.length;v<b;)g[v++]=0;S=M.slice(),S.unshift(0),I=M[0],M[1]>=Vt/2&&++I;do f=0,a=e(M,g,b,v),a<0?(_=g[0],b!=v&&(_=_*Vt+(g[1]||0)),f=_/I|0,f>1?(f>=Vt&&(f=Vt-1),c=t(M,f),d=c.length,v=g.length,a=e(c,g,d,v),a==1&&(f--,n(c,b<d?S:M,d))):(f==0&&(a=f=1),c=M.slice()),d=c.length,d<v&&c.unshift(0),n(g,c,v),a==-1&&(v=g.length,a=e(M,g,b,v),a<1&&(f++,n(g,b<v?S:M,v))),v=g.length):a===0&&(f++,g=[0]),m[u++]=f,a&&g[0]?g[v++]=k[C]||0:(g=[k[C]],v=1);while((C++<T||g[0]!==void 0)&&w--)}return m[0]||m.shift(),p.e=l,Xe(p,s?o+Pt(p)+1:o)}}();function Z$(t,e){var n,r,i,o,s,a,l=0,u=0,f=t.constructor,c=f.precision;if(Pt(t)>16)throw Error(XE+Pt(t));if(!t.s)return new f(qn);for(e==null?(ct=!1,a=c):a=e,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(ls(2,u))/Math.LN10*2+5|0,a+=r,n=i=o=new f(qn),f.precision=a;;){if(i=Xe(i.times(t),a),n=n.times(++l),s=o.plus(ki(i,n,a)),Gr(s.d).slice(0,a)===Gr(o.d).slice(0,a)){for(;u--;)o=Xe(o.times(o),a);return f.precision=c,e==null?(ct=!0,Xe(o,c)):o}o=s}}function Pt(t){for(var e=t.e*ot,n=t.d[0];n>=10;n/=10)e++;return e}function m0(t,e,n){if(e>t.LN10.sd())throw ct=!0,n&&(t.precision=n),Error(mr+"LN10 precision limit exceeded");return Xe(new t(t.LN10),e)}function io(t){for(var e="";t--;)e+="0";return e}function Tf(t,e){var n,r,i,o,s,a,l,u,f,c=1,d=10,p=t,m=p.d,g=p.constructor,v=g.precision;if(p.s<1)throw Error(mr+(p.s?"NaN":"-Infinity"));if(p.eq(qn))return new g(0);if(e==null?(ct=!1,u=v):u=e,p.eq(10))return e==null&&(ct=!0),m0(g,u);if(u+=d,g.precision=u,n=Gr(m),r=n.charAt(0),o=Pt(p),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Gr(p.d),r=n.charAt(0),c++;o=Pt(p),r>1?(p=new g("0."+n),o++):p=new g(r+"."+n.slice(1))}else return l=m0(g,u+2,v).times(o+""),p=Tf(new g(r+"."+n.slice(1)),u-d).plus(l),g.precision=v,e==null?(ct=!0,Xe(p,v)):p;for(a=s=p=ki(p.minus(qn),p.plus(qn),u),f=Xe(p.times(p),u),i=3;;){if(s=Xe(s.times(f),u),l=a.plus(ki(s,new g(i),u)),Gr(l.d).slice(0,u)===Gr(a.d).slice(0,u))return a=a.times(2),o!==0&&(a=a.plus(m0(g,u+2,v).times(o+""))),a=ki(a,new g(c),u),g.precision=v,e==null?(ct=!0,Xe(a,v)):a;a=l,i+=2}}function wO(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=du(n/ot),t.d=[],r=(n+1)%ot,n<0&&(r+=ot),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=ot;r<i;)t.d.push(+e.slice(r,r+=ot));e=e.slice(r),r=ot-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),ct&&(t.e>Tm||t.e<-Tm))throw Error(XE+n)}else t.s=0,t.e=0,t.d=[0];return t}function Xe(t,e,n){var r,i,o,s,a,l,u,f,c=t.d;for(s=1,o=c[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=ot,i=e,u=c[f=0];else{if(f=Math.ceil((r+1)/ot),o=c.length,f>=o)return t;for(u=o=c[f],s=1;o>=10;o/=10)s++;r%=ot,i=r-ot+s}if(n!==void 0&&(o=ls(10,s-i-1),a=u/o%10|0,l=e<0||c[f+1]!==void 0||u%o,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?u/ls(10,s-i):0:c[f-1])%10&1||n==(t.s<0?8:7))),e<1||!c[0])return l?(o=Pt(t),c.length=1,e=e-o-1,c[0]=ls(10,(ot-e%ot)%ot),t.e=du(-e/ot)||0):(c.length=1,c[0]=t.e=t.s=0),t;if(r==0?(c.length=f,o=1,f--):(c.length=f+1,o=ls(10,ot-r),c[f]=i>0?(u/ls(10,s-i)%ls(10,i)|0)*o:0),l)for(;;)if(f==0){(c[0]+=o)==Vt&&(c[0]=1,++t.e);break}else{if(c[f]+=o,c[f]!=Vt)break;c[f--]=0,o=1}for(r=c.length;c[--r]===0;)c.pop();if(ct&&(t.e>Tm||t.e<-Tm))throw Error(XE+Pt(t));return t}function eF(t,e){var n,r,i,o,s,a,l,u,f,c,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),ct?Xe(e,p):e;if(l=t.d,c=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(f=s<0,f?(n=l,s=-s,a=c.length):(n=c,r=u,a=l.length),i=Math.max(Math.ceil(p/ot),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=c.length,f=i<a,f&&(a=i),i=0;i<a;i++)if(l[i]!=c[i]){f=l[i]<c[i];break}s=0}for(f&&(n=l,l=c,c=n,e.s=-e.s),a=l.length,i=c.length-a;i>0;--i)l[a++]=0;for(i=c.length;i>s;){if(l[--i]<c[i]){for(o=i;o&&l[--o]===0;)l[o]=Vt-1;--l[o],l[i]+=Vt}l[i]-=c[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,ct?Xe(e,p):e):new d(0)}function Ws(t,e,n){var r,i=Pt(t),o=Gr(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+io(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+io(-i-1)+o,n&&(r=n-s)>0&&(o+=io(r))):i>=s?(o+=io(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+io(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=io(r))),t.s<0?"-"+o:o}function bO(t,e){if(t.length>e)return t.length=e,!0}function tF(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Is+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return wO(s,o.toString())}else if(typeof o!="string")throw Error(Is+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,pce.test(o))wO(s,o);else throw Error(Is+o)}if(i.prototype=fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=tF,i.config=i.set=mce,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function mce(t){if(!t||typeof t!="object")throw Error(mr+"Object expected");var e,n,r,i=["precision",1,hu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(du(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Is+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Is+n+": "+r);return this}var JE=tF(dce);qn=new JE(1);const Ke=JE;function gce(t){return wce(t)||_ce(t)||vce(t)||yce()}function yce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vce(t,e){if(t){if(typeof t=="string")return Fw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fw(t,e)}}function _ce(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function wce(t){if(Array.isArray(t))return Fw(t)}function Fw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var bce=function(e){return e},nF={"@@functional/placeholder":!0},rF=function(e){return e===nF},xO=function(e){return function n(){return arguments.length===0||arguments.length===1&&rF(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},xce=function t(e,n){return e===1?n:xO(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==nF}).length;return s>=e?n.apply(void 0,i):t(e-s,xO(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var f=i.map(function(c){return rF(c)?l.shift():c});return n.apply(void 0,gce(f).concat(l))}))})},Cy=function(e){return xce(e.length,e)},Vw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Ece=Cy(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Sce=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return bce;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},Uw=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},iF=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n&&o.every(function(a,l){return a===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function Tce(t){var e;return t===0?e=1:e=Math.floor(new Ke(t).abs().log(10).toNumber())+1,e}function Ace(t,e,n){for(var r=new Ke(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var Ice=Cy(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Pce=Cy(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Cce=Cy(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Oy={rangeStep:Ace,getDigitCount:Tce,interpolateNumber:Ice,uninterpolateNumber:Pce,uninterpolateTruncation:Cce};function Bw(t){return Nce(t)||kce(t)||oF(t)||Oce()}function Oce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kce(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Nce(t){if(Array.isArray(t))return zw(t)}function Af(t,e){return Dce(t)||Mce(t,e)||oF(t,e)||Rce()}function Rce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oF(t,e){if(t){if(typeof t=="string")return zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zw(t,e)}}function zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mce(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function Dce(t){if(Array.isArray(t))return t}function sF(t){var e=Af(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function aF(t,e,n){if(t.lte(0))return new Ke(0);var r=Oy.getDigitCount(t.toNumber()),i=new Ke(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new Ke(Math.ceil(o.div(s).toNumber())).add(n).mul(s),l=a.mul(i);return e?l:new Ke(Math.ceil(l))}function jce(t,e,n){var r=1,i=new Ke(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ke(10).pow(Oy.getDigitCount(t)-1),i=new Ke(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ke(Math.floor(t)))}else t===0?i=new Ke(Math.floor((e-1)/2)):n||(i=new Ke(Math.floor(t)));var s=Math.floor((e-1)/2),a=Sce(Ece(function(l){return i.add(new Ke(l-s).mul(r)).toNumber()}),Vw);return a(0,e)}function lF(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ke(0),tickMin:new Ke(0),tickMax:new Ke(0)};var o=aF(new Ke(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Ke(0):(s=new Ke(t).add(e).div(2),s=s.sub(new Ke(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new Ke(e).sub(s).div(o).toNumber()),u=a+l+1;return u>n?lF(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:o,tickMin:s.sub(new Ke(a).mul(o)),tickMax:s.add(new Ke(l).mul(o))})}function Lce(t){var e=Af(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=sF([n,r]),l=Af(a,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var c=f===1/0?[u].concat(Bw(Vw(0,i-1).map(function(){return 1/0}))):[].concat(Bw(Vw(0,i-1).map(function(){return-1/0})),[f]);return n>r?Uw(c):c}if(u===f)return jce(u,i,o);var d=lF(u,f,s,o),p=d.step,m=d.tickMin,g=d.tickMax,v=Oy.rangeStep(m,g.add(new Ke(.1).mul(p)),p);return n>r?Uw(v):v}function $ce(t,e){var n=Af(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=sF([r,i]),a=Af(s,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var f=Math.max(e,2),c=aF(new Ke(u).sub(l).div(f-1),o,0),d=[].concat(Bw(Oy.rangeStep(new Ke(l),new Ke(u).sub(new Ke(.99).mul(c)),c)),[u]);return r>i?Uw(d):d}var Fce=iF(Lce),Vce=iF($ce),Uce=!0,g0="Invariant failed";function Gs(t,e){if(!t){if(Uce)throw new Error(g0);var n=typeof e=="function"?e():e,r=n?"".concat(g0,": ").concat(n):g0;throw new Error(r)}}var Bce=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ol(t){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(t)}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Am.apply(this,arguments)}function zce(t,e){return qce(t)||Hce(t,e)||Gce(t,e)||Wce()}function Wce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gce(t,e){if(t){if(typeof t=="string")return EO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EO(t,e)}}function EO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function qce(t){if(Array.isArray(t))return t}function Kce(t,e){if(t==null)return{};var n=Yce(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fF(r.key),r)}}function Xce(t,e,n){return e&&SO(t.prototype,e),n&&SO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jce(t,e,n){return e=Im(e),Zce(t,uF()?Reflect.construct(e,n||[],Im(t).constructor):e.apply(t,n))}function Zce(t,e){if(e&&(Ol(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return efe(t)}function efe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uF=function(){return!!t})()}function Im(t){return Im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Im(t)}function tfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ww(t,e)}function Ww(t,e){return Ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ww(t,e)}function cF(t,e,n){return e=fF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fF(t){var e=nfe(t,"string");return Ol(e)=="symbol"?e:e+""}function nfe(t,e){if(Ol(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ol(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eh=function(t){function e(){return Qce(this,e),Jce(this,e,arguments)}return tfe(e,t),Xce(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,s=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,f=r.xAxis,c=r.yAxis,d=Kce(r,Bce),p=Me(d,!1);this.props.direction==="x"&&f.type!=="number"&&Gs(!1);var m=l.map(function(g){var v=u(g,a),_=v.x,w=v.y,E=v.value,C=v.errorVal;if(!C)return null;var T=[],I,b;if(Array.isArray(C)){var S=zce(C,2);I=S[0],b=S[1]}else I=b=C;if(o==="vertical"){var P=f.scale,O=w+i,k=O+s,M=O-s,N=P(E-I),V=P(E+b);T.push({x1:V,y1:k,x2:V,y2:M}),T.push({x1:N,y1:O,x2:V,y2:O}),T.push({x1:N,y1:k,x2:N,y2:M})}else if(o==="horizontal"){var z=c.scale,q=_+i,K=q-s,F=q+s,W=z(E-I),Q=z(E+b);T.push({x1:K,y1:Q,x2:F,y2:Q}),T.push({x1:q,y1:W,x2:q,y2:Q}),T.push({x1:K,y1:W,x2:F,y2:W})}return D.createElement(Et,Am({className:"recharts-errorBar",key:"bar-".concat(T.map(function(re){return"".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))},p),T.map(function(re){return D.createElement("line",Am({},re,{key:"line-".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))}))});return D.createElement(Et,{className:"recharts-errorBars"},m)}}])}(D.Component);cF(Eh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});cF(Eh,"displayName","ErrorBar");function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function TO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TO(Object(n),!0).forEach(function(r){rfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rfe(t,e,n){return e=ife(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ife(t){var e=ofe(t,"string");return If(e)=="symbol"?e:e+""}function ofe(t,e){if(If(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hF=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=Hn(n,Ts);if(!s)return null;var a=Ts.defaultProps,l=a!==void 0?es(es({},a),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:o==="children"?u=(r||[]).reduce(function(f,c){var d=c.item,p=c.props,m=p.sectors||p.data||[];return f.concat(m.map(function(g){return{type:s.props.iconType||d.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(f){var c=f.item,d=c.type.defaultProps,p=d!==void 0?es(es({},d),c.props):{},m=p.dataKey,g=p.name,v=p.legendType,_=p.hide;return{inactive:_,dataKey:m,type:l.iconType||v||"square",color:ZE(c),value:g||m,payload:p}}),es(es(es({},l),Ts.getWithHeight(s,i)),{},{payload:u,item:s})};function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function AO(t){return ufe(t)||lfe(t)||afe(t)||sfe()}function sfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function afe(t,e){if(t){if(typeof t=="string")return Gw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gw(t,e)}}function lfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ufe(t){if(Array.isArray(t))return Gw(t)}function Gw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IO(Object(n),!0).forEach(function(r){Za(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Za(t,e,n){return e=cfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cfe(t){var e=ffe(t,"string");return Pf(e)=="symbol"?e:e+""}function ffe(t,e){if(Pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jn(t,e,n){return Oe(t)||Oe(e)?n:Dt(e)?fr(t,e,n):Te(e)?e(t):n}function Pc(t,e,n,r){var i=uce(t,function(a){return Jn(a,e)});if(n==="number"){var o=i.filter(function(a){return oe(a)||parseFloat(a)});return o.length?[Iy(o),Ay(o)]:[1/0,-1/0]}var s=r?i.filter(function(a){return!Oe(a)}):i;return s.map(function(a){return Dt(a)||a instanceof Date?a:""})}var hfe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<a;u++){var f=u>0?i[u-1].coordinate:i[a-1].coordinate,c=i[u].coordinate,d=u>=a-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Nr(c-f)!==Nr(d-c)){var m=[];if(Nr(d-c)===Nr(l[1]-l[0])){p=d;var g=c+l[1]-l[0];m[0]=Math.min(g,(g+f)/2),m[1]=Math.max(g,(g+f)/2)}else{p=f;var v=d+l[1]-l[0];m[0]=Math.min(c,(v+c)/2),m[1]=Math.max(c,(v+c)/2)}var _=[Math.min(c,(p+c)/2),Math.max(c,(p+c)/2)];if(e>_[0]&&e<=_[1]||e>=m[0]&&e<=m[1]){s=i[u].index;break}}else{var w=Math.min(f,d),E=Math.max(f,d);if(e>(w+c)/2&&e<=(E+c)/2){s=i[u].index;break}}}else for(var C=0;C<a;C++)if(C===0&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C>0&&C<a-1&&e>(r[C].coordinate+r[C-1].coordinate)/2&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C===a-1&&e>(r[C].coordinate+r[C-1].coordinate)/2){s=r[C].index;break}return s},ZE=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?_t(_t({},e.type.defaultProps),e.props):e.props,s=o.stroke,a=o.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:a;break;default:l=a;break}return l},dfe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var s={},a=Object.keys(o),l=0,u=a.length;l<u;l++)for(var f=o[a[l]].stackGroups,c=Object.keys(f),d=0,p=c.length;d<p;d++){var m=f[c[d]],g=m.items,v=m.cateAxisId,_=g.filter(function(b){return Pi(b.type).indexOf("Bar")>=0});if(_&&_.length){var w=_[0].type.defaultProps,E=w!==void 0?_t(_t({},w),_[0].props):_[0].props,C=E.barSize,T=E[v];s[T]||(s[T]=[]);var I=Oe(C)?n:C;s[T].push({item:_[0],stackList:_.slice(1),barSize:Oe(I)?void 0:zs(I,r,0)})}}return s},pfe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var u=zs(n,i,0,!0),f,c=[];if(s[0].barSize===+s[0].barSize){var d=!1,p=i/l,m=s.reduce(function(C,T){return C+T.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&p>0&&(d=!0,p*=.9,m=l*p);var g=(i-m)/2>>0,v={offset:g-u,size:0};f=s.reduce(function(C,T){var I={item:T.item,position:{offset:v.offset+v.size+u,size:d?p:T.barSize}},b=[].concat(AO(C),[I]);return v=b[b.length-1].position,T.stackList&&T.stackList.length&&T.stackList.forEach(function(S){b.push({item:S,position:v})}),b},c)}else{var _=zs(r,i,0,!0);i-2*_-(l-1)*u<=0&&(u=0);var w=(i-2*_-(l-1)*u)/l;w>1&&(w>>=0);var E=a===+a?Math.min(w,a):w;f=s.reduce(function(C,T,I){var b=[].concat(AO(C),[{item:T.item,position:{offset:_+(w+u)*I+(w-E)/2,size:E}}]);return T.stackList&&T.stackList.length&&T.stackList.forEach(function(S){b.push({item:S,position:b[b.length-1].position})}),b},c)}return f},mfe=function(e,n,r,i){var o=r.children,s=r.width,a=r.margin,l=s-(a.left||0)-(a.right||0),u=hF({children:o,legendWidth:l});if(u){var f=i||{},c=f.width,d=f.height,p=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&oe(e[p]))return _t(_t({},e),{},Za({},p,e[p]+(c||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&oe(e[m]))return _t(_t({},e),{},Za({},m,e[m]+(d||0)))}return e},gfe=function(e,n,r){return Oe(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},dF=function(e,n,r,i,o){var s=n.props.children,a=hr(s,Eh).filter(function(u){return gfe(i,o,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,f){var c=Jn(f,r);if(Oe(c))return u;var d=Array.isArray(c)?[Iy(c),Ay(c)]:[c,c],p=l.reduce(function(m,g){var v=Jn(f,g,0),_=d[0]-Math.abs(Array.isArray(v)?v[0]:v),w=d[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(_,m[0]),Math.max(w,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},yfe=function(e,n,r,i,o){var s=n.map(function(a){return dF(e,a,r,o,i)}).filter(function(a){return!Oe(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},pF=function(e,n,r,i,o){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&dF(e,l,u,i)||Pc(e,u,r,o)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,u){for(var f=0,c=u.length;f<c;f++)a[u[f]]||(a[u[f]]=!0,l.push(u[f]));return l},[])},mF=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},gF=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(s=!0),l.coordinate});return o||a.push(n),s||a.push(r),a},Si=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Nr(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(c){var d=o?o.indexOf(c):c;return{coordinate:i(d)+u,value:c,offset:u}});return f.filter(function(c){return!gh(c.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(c,d){return{coordinate:i(c)+u,value:c,index:d,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(c){return{coordinate:i(c)+u,value:c,offset:u}}):i.domain().map(function(c,d){return{coordinate:i(c)+u,value:o?o[c]:c,index:d,offset:u}})},y0=new WeakMap,xd=function(e,n){if(typeof n!="function")return e;y0.has(e)||y0.set(e,new WeakMap);var r=y0.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},vfe=function(e,n,r){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:wf(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:bm(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ic(),realScaleType:"point"}:o==="category"?{scale:wf(),realScaleType:"band"}:{scale:bm(),realScaleType:"linear"};if(Bs(i)){var l="scale".concat(dy(i));return{scale:(_O[l]||Ic)(),realScaleType:_O[l]?l:"point"}}return Te(i)?{scale:i}:{scale:Ic(),realScaleType:"point"}},PO=1e-4,_fe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-PO,s=Math.max(i[0],i[1])+PO,a=e(n[0]),l=e(n[r-1]);(a<o||a>s||l<o||l>s)&&e.domain([n[0],n[r-1]])}},wfe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},bfe=function(e,n){if(!n||n.length!==2||!oe(n[0])||!oe(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!oe(e[0])||e[0]<r)&&(o[0]=r),(!oe(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},xfe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0,a=0;a<n;++a){var l=gh(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1])}},Efe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0;s<n;++s){var a=gh(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=o,e[s][r][1]=o+a,o=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Sfe={sign:xfe,expand:UX,none:xl,silhouette:BX,wiggle:zX,positive:Efe},Tfe=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),o=Sfe[r],s=VX().keys(i).value(function(a,l){return+Jn(a,l,0)}).order(gw).offset(o);return s(e)},Afe=function(e,n,r,i,o,s){if(!e)return null;var a=s?n.reverse():n,l={},u=a.reduce(function(c,d){var p,m=(p=d.type)!==null&&p!==void 0&&p.defaultProps?_t(_t({},d.type.defaultProps),d.props):d.props,g=m.stackId,v=m.hide;if(v)return c;var _=m[r],w=c[_]||{hasStack:!1,stackGroups:{}};if(Dt(g)){var E=w.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};E.items.push(d),w.hasStack=!0,w.stackGroups[g]=E}else w.stackGroups[yh("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[d]};return _t(_t({},c),{},Za({},_,w))},l),f={};return Object.keys(u).reduce(function(c,d){var p=u[d];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,v){var _=p.stackGroups[v];return _t(_t({},g),{},Za({},v,{numericAxisId:r,cateAxisId:i,items:_.items,stackedData:Tfe(e,_.items,o)}))},m)}return _t(_t({},c),{},Za({},d,p))},f)},Ife=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,s=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var f=Fce(u,o,a);return e.domain([Iy(f),Ay(f)]),{niceTicks:f}}if(o&&i==="number"){var c=e.domain(),d=Vce(c,o,a);return{niceTicks:d}}return null};function CO(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Oe(i[e.dataKey])){var a=Jp(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=Jn(i,Oe(s)?e.dataKey:s);return Oe(l)?null:e.scale(l)}var OO=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=Jn(s,n.dataKey,n.domain[a]);return Oe(l)?null:n.scale(l)-o/2+i},Pfe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},Cfe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?_t(_t({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(Dt(o)){var s=n[o];if(s){var a=s.items.indexOf(e);return a>=0?s.stackedData[a]:null}}return null},Ofe=function(e){return e.reduce(function(n,r){return[Iy(r.concat([n[0]]).filter(oe)),Ay(r.concat([n[1]]).filter(oe))]},[1/0,-1/0])},yF=function(e,n,r){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(u,f){var c=Ofe(f.slice(n,r+1));return[Math.min(u[0],c[0]),Math.max(u[1],c[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},kO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hw=function(e,n,r){if(Te(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(oe(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(kO.test(e[0])){var o=+kO.exec(e[0])[1];i[0]=n[0]-o}else Te(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(oe(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(NO.test(e[1])){var s=+NO.exec(e[1])[1];i[1]=n[1]+s}else Te(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Pm=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=IE(n,function(c){return c.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var u=o[a],f=o[a-1];s=Math.min((u.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},RO=function(e,n,r){return!e||!e.length||Py(e,fr(r,"type.defaultProps.domain"))?n:e},vF=function(e,n){var r=e.type.defaultProps?_t(_t({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,s=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,f=r.hide;return _t(_t({},Me(e,!1)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:ZE(e),value:Jn(n,i),type:l,payload:n,chartType:u,hide:f})};function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function MO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MO(Object(n),!0).forEach(function(r){kfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kfe(t,e,n){return e=Nfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nfe(t){var e=Rfe(t,"string");return Cf(e)=="symbol"?e:e+""}function Rfe(t,e){if(Cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cm=Math.PI/180,Mfe=function(e){return e*180/Math.PI},Zt=function(e,n,r,i){return{x:e+Math.cos(-Cm*i)*r,y:n+Math.sin(-Cm*i)*r}},Dfe=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))},jfe=function(e,n){var r=e.x,i=e.y,o=n.cx,s=n.cy,a=Dfe({x:r,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(r-o)/a,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:a,angle:Mfe(u),angleInRadian:u}},Lfe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:n-s*360,endAngle:r-s*360}},$fe=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},jO=function(e,n){var r=e.x,i=e.y,o=jfe({x:r,y:i},n),s=o.radius,a=o.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var f=Lfe(n),c=f.startAngle,d=f.endAngle,p=a,m;if(c<=d){for(;p>d;)p-=360;for(;p<c;)p+=360;m=p>=c&&p<=d}else{for(;p>c;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=c}return m?DO(DO({},n),{},{radius:s,angle:$fe(p,n)}):null};function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}var Ffe=["offset"];function Vfe(t){return Wfe(t)||zfe(t)||Bfe(t)||Ufe()}function Ufe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bfe(t,e){if(t){if(typeof t=="string")return qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qw(t,e)}}function zfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wfe(t){if(Array.isArray(t))return qw(t)}function qw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gfe(t,e){if(t==null)return{};var n=Hfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(r){qfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qfe(t,e,n){return e=Kfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kfe(t){var e=Yfe(t,"string");return Of(e)=="symbol"?e:e+""}function Yfe(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kf(){return kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kf.apply(this,arguments)}var Qfe=function(e){var n=e.value,r=e.formatter,i=Oe(e.children)?n:e.children;return Te(r)?r(i):i},Xfe=function(e,n){var r=Nr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Jfe=function(e,n,r){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,u=l.cx,f=l.cy,c=l.innerRadius,d=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,v=(c+d)/2,_=Xfe(p,m),w=_>=0?1:-1,E,C;i==="insideStart"?(E=p+w*s,C=g):i==="insideEnd"?(E=m-w*s,C=!g):i==="end"&&(E=m+w*s,C=g),C=_<=0?C:!C;var T=Zt(u,f,v,E),I=Zt(u,f,v,E+(C?1:-1)*359),b="M".concat(T.x,",").concat(T.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(I.x,",").concat(I.y),S=Oe(e.id)?yh("recharts-radial-line-"):e.id;return D.createElement("text",kf({},r,{dominantBaseline:"central",className:Le("recharts-radial-bar-label",a)}),D.createElement("defs",null,D.createElement("path",{id:S,d:b})),D.createElement("textPath",{xlinkHref:"#".concat(S)},n))},Zfe=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,s=o.cx,a=o.cy,l=o.innerRadius,u=o.outerRadius,f=o.startAngle,c=o.endAngle,d=(f+c)/2;if(i==="outside"){var p=Zt(s,a,u+r,d),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,_=Zt(s,a,v,d),w=_.x,E=_.y;return{x:w,y:E,textAnchor:"middle",verticalAnchor:"middle"}},ehe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,s=n,a=s.x,l=s.y,u=s.width,f=s.height,c=f>=0?1:-1,d=c*i,p=c>0?"end":"start",m=c>0?"start":"end",g=u>=0?1:-1,v=g*i,_=g>0?"end":"start",w=g>0?"start":"end";if(o==="top"){var E={x:a+u/2,y:l-c*i,textAnchor:"middle",verticalAnchor:p};return kt(kt({},E),r?{height:Math.max(l-r.y,0),width:u}:{})}if(o==="bottom"){var C={x:a+u/2,y:l+f+d,textAnchor:"middle",verticalAnchor:m};return kt(kt({},C),r?{height:Math.max(r.y+r.height-(l+f),0),width:u}:{})}if(o==="left"){var T={x:a-v,y:l+f/2,textAnchor:_,verticalAnchor:"middle"};return kt(kt({},T),r?{width:Math.max(T.x-r.x,0),height:f}:{})}if(o==="right"){var I={x:a+u+v,y:l+f/2,textAnchor:w,verticalAnchor:"middle"};return kt(kt({},I),r?{width:Math.max(r.x+r.width-I.x,0),height:f}:{})}var b=r?{width:u,height:f}:{};return o==="insideLeft"?kt({x:a+v,y:l+f/2,textAnchor:w,verticalAnchor:"middle"},b):o==="insideRight"?kt({x:a+u-v,y:l+f/2,textAnchor:_,verticalAnchor:"middle"},b):o==="insideTop"?kt({x:a+u/2,y:l+d,textAnchor:"middle",verticalAnchor:m},b):o==="insideBottom"?kt({x:a+u/2,y:l+f-d,textAnchor:"middle",verticalAnchor:p},b):o==="insideTopLeft"?kt({x:a+v,y:l+d,textAnchor:w,verticalAnchor:m},b):o==="insideTopRight"?kt({x:a+u-v,y:l+d,textAnchor:_,verticalAnchor:m},b):o==="insideBottomLeft"?kt({x:a+v,y:l+f-d,textAnchor:w,verticalAnchor:p},b):o==="insideBottomRight"?kt({x:a+u-v,y:l+f-d,textAnchor:_,verticalAnchor:p},b):iu(o)&&(oe(o.x)||gs(o.x))&&(oe(o.y)||gs(o.y))?kt({x:a+zs(o.x,u),y:l+zs(o.y,f),textAnchor:"end",verticalAnchor:"end"},b):kt({x:a+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},b)},the=function(e){return"cx"in e&&oe(e.cx)};function mn(t){var e=t.offset,n=e===void 0?5:e,r=Gfe(t,Ffe),i=kt({offset:n},r),o=i.viewBox,s=i.position,a=i.value,l=i.children,u=i.content,f=i.className,c=f===void 0?"":f,d=i.textBreakAll;if(!o||Oe(a)&&Oe(l)&&!j.isValidElement(u)&&!Te(u))return null;if(j.isValidElement(u))return j.cloneElement(u,i);var p;if(Te(u)){if(p=j.createElement(u,i),j.isValidElement(p))return p}else p=Qfe(i);var m=the(o),g=Me(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Jfe(i,p,g);var v=m?Zfe(i):ehe(i);return D.createElement(pm,kf({className:Le("recharts-label",c)},g,v,{breakAll:d}),p)}mn.displayName="Label";var _F=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,f=e.outerRadius,c=e.x,d=e.y,p=e.top,m=e.left,g=e.width,v=e.height,_=e.clockWise,w=e.labelViewBox;if(w)return w;if(oe(g)&&oe(v)){if(oe(c)&&oe(d))return{x:c,y:d,width:g,height:v};if(oe(p)&&oe(m))return{x:p,y:m,width:g,height:v}}return oe(c)&&oe(d)?{x:c,y:d,width:0,height:0}:oe(n)&&oe(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:f||l||a||0,clockWise:_}:e.viewBox?e.viewBox:{}},nhe=function(e,n){return e?e===!0?D.createElement(mn,{key:"label-implicit",viewBox:n}):Dt(e)?D.createElement(mn,{key:"label-implicit",viewBox:n,value:e}):j.isValidElement(e)?e.type===mn?j.cloneElement(e,{key:"label-implicit",viewBox:n}):D.createElement(mn,{key:"label-implicit",content:e,viewBox:n}):Te(e)?D.createElement(mn,{key:"label-implicit",content:e,viewBox:n}):iu(e)?D.createElement(mn,kf({viewBox:n},e,{key:"label-implicit"})):null:null},rhe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=_F(e),s=hr(i,mn).map(function(l,u){return j.cloneElement(l,{viewBox:n||o,key:"label-".concat(u)})});if(!r)return s;var a=nhe(e.label,n||o);return[a].concat(Vfe(s))};mn.parseViewBox=_F;mn.renderCallByParent=rhe;function ihe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var ohe=ihe;const she=Je(ohe);function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}var ahe=["valueAccessor"],lhe=["data","dataKey","clockWise","id","textBreakAll"];function uhe(t){return dhe(t)||hhe(t)||fhe(t)||che()}function che(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fhe(t,e){if(t){if(typeof t=="string")return Kw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kw(t,e)}}function hhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dhe(t){if(Array.isArray(t))return Kw(t)}function Kw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Om.apply(this,arguments)}function $O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(n),!0).forEach(function(r){phe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function phe(t,e,n){return e=mhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mhe(t){var e=ghe(t,"string");return Nf(e)=="symbol"?e:e+""}function ghe(t,e){if(Nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VO(t,e){if(t==null)return{};var n=yhe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vhe=function(e){return Array.isArray(e.value)?she(e.value):e.value};function Oo(t){var e=t.valueAccessor,n=e===void 0?vhe:e,r=VO(t,ahe),i=r.data,o=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,u=VO(r,lhe);return!i||!i.length?null:D.createElement(Et,{className:"recharts-label-list"},i.map(function(f,c){var d=Oe(o)?n(f,c):Jn(f&&f.payload,o),p=Oe(a)?{}:{id:"".concat(a,"-").concat(c)};return D.createElement(mn,Om({},Me(f,!0),u,p,{parentViewBox:f.parentViewBox,value:d,textBreakAll:l,viewBox:mn.parseViewBox(Oe(s)?f:FO(FO({},f),{},{clockWise:s})),key:"label-".concat(c),index:c}))}))}Oo.displayName="LabelList";function _he(t,e){return t?t===!0?D.createElement(Oo,{key:"labelList-implicit",data:e}):D.isValidElement(t)||Te(t)?D.createElement(Oo,{key:"labelList-implicit",data:e,content:t}):iu(t)?D.createElement(Oo,Om({data:e},t,{key:"labelList-implicit"})):null:null}function whe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=hr(r,Oo).map(function(s,a){return j.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var o=_he(t.label,e);return[o].concat(uhe(i))}Oo.renderCallByParent=whe;function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yw.apply(this,arguments)}function UO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(n),!0).forEach(function(r){bhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bhe(t,e,n){return e=xhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xhe(t){var e=Ehe(t,"string");return Rf(e)=="symbol"?e:e+""}function Ehe(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var She=function(e,n){var r=Nr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Ed=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,f=l*(a?1:-1)+i,c=Math.asin(l/f)/Cm,d=u?o:o+s*c,p=Zt(n,r,f,d),m=Zt(n,r,i,d),g=u?o-s*c:o,v=Zt(n,r,f*Math.cos(c*Cm),g);return{center:p,circleTangency:m,lineTangency:v,theta:c}},wF=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=She(s,a),u=s+l,f=Zt(n,r,o,s),c=Zt(n,r,o,u),d="M ".concat(f.x,",").concat(f.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(i>0){var p=Zt(n,r,i,s),m=Zt(n,r,i,u);d+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(n,",").concat(r," Z");return d},The=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,f=e.endAngle,c=Nr(f-u),d=Ed({cx:n,cy:r,radius:o,angle:u,sign:c,cornerRadius:s,cornerIsExternal:l}),p=d.circleTangency,m=d.lineTangency,g=d.theta,v=Ed({cx:n,cy:r,radius:o,angle:f,sign:-c,cornerRadius:s,cornerIsExternal:l}),_=v.circleTangency,w=v.lineTangency,E=v.theta,C=l?Math.abs(u-f):Math.abs(u-f)-g-E;if(C<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):wF({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f});var T="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(C>180),",").concat(+(c<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var I=Ed({cx:n,cy:r,radius:i,angle:u,sign:c,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),b=I.circleTangency,S=I.lineTangency,P=I.theta,O=Ed({cx:n,cy:r,radius:i,angle:f,sign:-c,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),k=O.circleTangency,M=O.lineTangency,N=O.theta,V=l?Math.abs(u-f):Math.abs(u-f)-P-N;if(V<0&&s===0)return"".concat(T,"L").concat(n,",").concat(r,"Z");T+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(V>180),",").concat(+(c>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(S.x,",").concat(S.y,"Z")}else T+="L".concat(n,",").concat(r,"Z");return T},Ahe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bF=function(e){var n=BO(BO({},Ahe),e),r=n.cx,i=n.cy,o=n.innerRadius,s=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,c=n.endAngle,d=n.className;if(s<o||f===c)return null;var p=Le("recharts-sector",d),m=s-o,g=zs(a,m,0,!0),v;return g>0&&Math.abs(f-c)<360?v=The({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:c}):v=wF({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:f,endAngle:c}),D.createElement("path",Yw({},Me(n,!0),{className:p,d:v,role:"img"}))};function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qw.apply(this,arguments)}function zO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zO(Object(n),!0).forEach(function(r){Ihe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ihe(t,e,n){return e=Phe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Phe(t){var e=Che(t,"string");return Mf(e)=="symbol"?e:e+""}function Che(t,e){if(Mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GO={curveBasisClosed:CX,curveBasisOpen:OX,curveBasis:PX,curveBumpX:pX,curveBumpY:mX,curveLinearClosed:kX,curveLinear:my,curveMonotoneX:NX,curveMonotoneY:RX,curveNatural:MX,curveStep:DX,curveStepAfter:LX,curveStepBefore:jX},Sd=function(e){return e.x===+e.x&&e.y===+e.y},Yu=function(e){return e.x},Qu=function(e){return e.y},Ohe=function(e,n){if(Te(e))return e;var r="curve".concat(dy(e));return(r==="curveMonotone"||r==="curveBump")&&n?GO["".concat(r).concat(n==="vertical"?"Y":"X")]:GO[r]||my},khe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,f=Ohe(r,a),c=u?o.filter(function(g){return Sd(g)}):o,d;if(Array.isArray(s)){var p=u?s.filter(function(g){return Sd(g)}):s,m=c.map(function(g,v){return WO(WO({},g),{},{base:p[v]})});return a==="vertical"?d=pd().y(Qu).x1(Yu).x0(function(g){return g.base.x}):d=pd().x(Yu).y1(Qu).y0(function(g){return g.base.y}),d.defined(Sd).curve(f),d(m)}return a==="vertical"&&oe(s)?d=pd().y(Qu).x1(Yu).x0(s):oe(s)?d=pd().x(Yu).y1(Qu).y0(s):d=bL().x(Yu).y(Qu),d.defined(Sd).curve(f),d(c)},Xw=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?khe(e):i;return j.createElement("path",Qw({},Me(e,!1),Zp(e),{className:Le("recharts-curve",n),d:s,ref:o}))},xF={exports:{}},Nhe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Rhe=Nhe,Mhe=Rhe;function EF(){}function SF(){}SF.resetWarningCache=EF;var Dhe=function(){function t(r,i,o,s,a,l){if(l!==Mhe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:SF,resetWarningCache:EF};return n.PropTypes=n,n};xF.exports=Dhe();var jhe=xF.exports;const ze=Je(jhe);var Lhe=Object.getOwnPropertyNames,$he=Object.getOwnPropertySymbols,Fhe=Object.prototype.hasOwnProperty;function HO(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function Td(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function qO(t){return Lhe(t).concat($he(t))}var Vhe=Object.hasOwn||function(t,e){return Fhe.call(t,e)};function ra(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Uhe="__v",Bhe="__o",zhe="_owner",KO=Object.getOwnPropertyDescriptor,YO=Object.keys;function Whe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Ghe(t,e){return ra(t.getTime(),e.getTime())}function Hhe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function qhe(t,e){return t===e}function QO(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=t.entries(),s,a,l=0;(s=o.next())&&!s.done;){for(var u=e.entries(),f=!1,c=0;(a=u.next())&&!a.done;){if(i[c]){c++;continue}var d=s.value,p=a.value;if(n.equals(d[0],p[0],l,c,t,e,n)&&n.equals(d[1],p[1],d[0],p[0],t,e,n)){f=i[c]=!0;break}c++}if(!f)return!1;l++}return!0}var Khe=ra;function Yhe(t,e,n){var r=YO(t),i=r.length;if(YO(e).length!==i)return!1;for(;i-- >0;)if(!TF(t,e,n,r[i]))return!1;return!0}function Xu(t,e,n){var r=qO(t),i=r.length;if(qO(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],!TF(t,e,n,o)||(s=KO(t,o),a=KO(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function Qhe(t,e){return ra(t.valueOf(),e.valueOf())}function Xhe(t,e){return t.source===e.source&&t.flags===e.flags}function XO(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=t.values(),s,a;(s=o.next())&&!s.done;){for(var l=e.values(),u=!1,f=0;(a=l.next())&&!a.done;){if(!i[f]&&n.equals(s.value,a.value,s.value,a.value,t,e,n)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function Jhe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Zhe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function TF(t,e,n,r){return(r===zhe||r===Bhe||r===Uhe)&&(t.$$typeof||e.$$typeof)?!0:Vhe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var ede="[object Arguments]",tde="[object Boolean]",nde="[object Date]",rde="[object Error]",ide="[object Map]",ode="[object Number]",sde="[object Object]",ade="[object RegExp]",lde="[object Set]",ude="[object String]",cde="[object URL]",fde=Array.isArray,JO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,ZO=Object.assign,hde=Object.prototype.toString.call.bind(Object.prototype.toString);function dde(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,o=t.areMapsEqual,s=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,f=t.areSetsEqual,c=t.areTypedArraysEqual,d=t.areUrlsEqual;return function(m,g,v){if(m===g)return!0;if(m==null||g==null)return!1;var _=typeof m;if(_!==typeof g)return!1;if(_!=="object")return _==="number"?s(m,g,v):_==="function"?i(m,g,v):!1;var w=m.constructor;if(w!==g.constructor)return!1;if(w===Object)return a(m,g,v);if(fde(m))return e(m,g,v);if(JO!=null&&JO(m))return c(m,g,v);if(w===Date)return n(m,g,v);if(w===RegExp)return u(m,g,v);if(w===Map)return o(m,g,v);if(w===Set)return f(m,g,v);var E=hde(m);return E===nde?n(m,g,v):E===ade?u(m,g,v):E===ide?o(m,g,v):E===lde?f(m,g,v):E===sde?typeof m.then!="function"&&typeof g.then!="function"&&a(m,g,v):E===cde?d(m,g,v):E===rde?r(m,g,v):E===ede?a(m,g,v):E===tde||E===ode||E===ude?l(m,g,v):!1}}function pde(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Xu:Whe,areDatesEqual:Ghe,areErrorsEqual:Hhe,areFunctionsEqual:qhe,areMapsEqual:r?HO(QO,Xu):QO,areNumbersEqual:Khe,areObjectsEqual:r?Xu:Yhe,arePrimitiveWrappersEqual:Qhe,areRegExpsEqual:Xhe,areSetsEqual:r?HO(XO,Xu):XO,areTypedArraysEqual:r?Xu:Jhe,areUrlsEqual:Zhe};if(n&&(i=ZO({},i,n(i))),e){var o=Td(i.areArraysEqual),s=Td(i.areMapsEqual),a=Td(i.areObjectsEqual),l=Td(i.areSetsEqual);i=ZO({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function mde(t){return function(e,n,r,i,o,s,a){return t(e,n,a)}}function gde(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,u){var f=r(),c=f.cache,d=c===void 0?e?new WeakMap:void 0:c,p=f.meta;return n(l,u,{cache:d,equals:i,meta:p,strict:o})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,u){return n(l,u,s)}}var yde=Ko();Ko({strict:!0});Ko({circular:!0});Ko({circular:!0,strict:!0});Ko({createInternalComparator:function(){return ra}});Ko({strict:!0,createInternalComparator:function(){return ra}});Ko({circular:!0,createInternalComparator:function(){return ra}});Ko({circular:!0,createInternalComparator:function(){return ra},strict:!0});function Ko(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=pde(t),l=dde(a),u=r?r(l):mde(l);return gde({circular:n,comparator:l,createState:i,equals:u,strict:s})}function vde(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function ek(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):vde(i)};requestAnimationFrame(r)}function Jw(t){"@babel/helpers - typeof";return Jw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jw(t)}function _de(t){return Ede(t)||xde(t)||bde(t)||wde()}function wde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bde(t,e){if(t){if(typeof t=="string")return tk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tk(t,e)}}function tk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ede(t){if(Array.isArray(t))return t}function Sde(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,a=_de(s),l=a[0],u=a.slice(1);if(typeof l=="number"){ek(i.bind(null,u),l);return}i(l),ek(i.bind(null,u));return}Jw(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function Df(t){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nk(Object(n),!0).forEach(function(r){AF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AF(t,e,n){return e=Tde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tde(t){var e=Ade(t,"string");return Df(e)==="symbol"?e:String(e)}function Ade(t,e){if(Df(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Df(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ide=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},Pde=function(e){return e},Cde=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Cc=function(e,n){return Object.keys(n).reduce(function(r,i){return rk(rk({},r),{},AF({},i,e(i,n[i])))},{})},ik=function(e,n,r){return e.map(function(i){return"".concat(Cde(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Ode(t,e){return Rde(t)||Nde(t,e)||IF(t,e)||kde()}function kde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Rde(t){if(Array.isArray(t))return t}function Mde(t){return Lde(t)||jde(t)||IF(t)||Dde()}function Dde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IF(t,e){if(t){if(typeof t=="string")return Zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(t,e)}}function jde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lde(t){if(Array.isArray(t))return Zw(t)}function Zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var km=1e-4,PF=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},CF=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},ok=function(e,n){return function(r){var i=PF(e,n);return CF(i,r)}},$de=function(e,n){return function(r){var i=PF(e,n),o=[].concat(Mde(i.map(function(s,a){return s*a}).slice(1)),[0]);return CF(o,r)}},sk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),f=Ode(u,4);i=f[0],o=f[1],s=f[2],a=f[3]}}}var c=ok(i,s),d=ok(o,a),p=$de(i,s),m=function(_){return _>1?1:_<0?0:_},g=function(_){for(var w=_>1?1:_,E=w,C=0;C<8;++C){var T=c(E)-w,I=p(E);if(Math.abs(T-w)<km||I<km)return d(E);E=m(E-T/I)}return d(E)};return g.isStepper=!1,g},Fde=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(f,c,d){var p=-(f-c)*r,m=d*o,g=d+(p-m)*a/1e3,v=d*a/1e3+f;return Math.abs(v-c)<km&&Math.abs(g)<km?[c,0]:[v,g]};return l.isStepper=!0,l.dt=a,l},Vde=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sk(i);case"spring":return Fde();default:if(i.split("(")[0]==="cubic-bezier")return sk(i)}return typeof i=="function"?i:null};function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function ak(t){return zde(t)||Bde(t)||OF(t)||Ude()}function Ude(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zde(t){if(Array.isArray(t))return tb(t)}function lk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lk(Object(n),!0).forEach(function(r){eb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eb(t,e,n){return e=Wde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wde(t){var e=Gde(t,"string");return jf(e)==="symbol"?e:String(e)}function Gde(t,e){if(jf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hde(t,e){return Yde(t)||Kde(t,e)||OF(t,e)||qde()}function qde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OF(t,e){if(t){if(typeof t=="string")return tb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tb(t,e)}}function tb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Yde(t){if(Array.isArray(t))return t}var Nm=function(e,n,r){return e+(n-e)*r},nb=function(e){var n=e.from,r=e.to;return n!==r},Qde=function t(e,n,r){var i=Cc(function(o,s){if(nb(s)){var a=e(s.from,s.to,s.velocity),l=Hde(a,2),u=l[0],f=l[1];return Yt(Yt({},s),{},{from:u,velocity:f})}return s},n);return r<1?Cc(function(o,s){return nb(s)?Yt(Yt({},s),{},{velocity:Nm(s.velocity,i[o].velocity,r),from:Nm(s.from,i[o].from,r)}):s},n):t(e,i,r-1)};const Xde=function(t,e,n,r,i){var o=Ide(t,e),s=o.reduce(function(v,_){return Yt(Yt({},v),{},eb({},_,[t[_],e[_]]))},{}),a=o.reduce(function(v,_){return Yt(Yt({},v),{},eb({},_,{from:t[_],velocity:0,to:e[_]}))},{}),l=-1,u,f,c=function(){return null},d=function(){return Cc(function(_,w){return w.from},a)},p=function(){return!Object.values(a).filter(nb).length},m=function(_){u||(u=_);var w=_-u,E=w/n.dt;a=Qde(n,a,E),i(Yt(Yt(Yt({},t),e),d())),u=_,p()||(l=requestAnimationFrame(c))},g=function(_){f||(f=_);var w=(_-f)/r,E=Cc(function(T,I){return Nm.apply(void 0,ak(I).concat([n(w)]))},s);if(i(Yt(Yt(Yt({},t),e),E)),w<1)l=requestAnimationFrame(c);else{var C=Cc(function(T,I){return Nm.apply(void 0,ak(I).concat([n(1)]))},s);i(Yt(Yt(Yt({},t),e),C))}};return c=n.isStepper?m:g,function(){return requestAnimationFrame(c),function(){cancelAnimationFrame(l)}}};function kl(t){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(t)}var Jde=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Zde(t,e){if(t==null)return{};var n=epe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function epe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function v0(t){return ipe(t)||rpe(t)||npe(t)||tpe()}function tpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function npe(t,e){if(t){if(typeof t=="string")return rb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rb(t,e)}}function rpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ipe(t){if(Array.isArray(t))return rb(t)}function rb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(n),!0).forEach(function(r){ac(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ac(t,e,n){return e=kF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ope(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ck(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kF(r.key),r)}}function spe(t,e,n){return e&&ck(t.prototype,e),n&&ck(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kF(t){var e=ape(t,"string");return kl(e)==="symbol"?e:String(e)}function ape(t,e){if(kl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ib(t,e)}function ib(t,e){return ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ib(t,e)}function upe(t){var e=cpe();return function(){var r=Rm(t),i;if(e){var o=Rm(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return ob(this,i)}}function ob(t,e){if(e&&(kl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sb(t)}function sb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rm(t){return Rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rm(t)}var ky=function(t){lpe(n,t);var e=upe(n);function n(r,i){var o;ope(this,n),o=e.call(this,r,i);var s=o.props,a=s.isActive,l=s.attributeName,u=s.from,f=s.to,c=s.steps,d=s.children,p=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(sb(o)),o.changeStyle=o.changeStyle.bind(sb(o)),!a||p<=0)return o.state={style:{}},typeof d=="function"&&(o.state={style:f}),ob(o);if(c&&c.length)o.state={style:c[0].style};else if(u){if(typeof d=="function")return o.state={style:u},ob(o);o.state={style:l?ac({},l,u):u}}else o.state={style:{}};return o}return spe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,f=o.to,c=o.from,d=this.state.style;if(a){if(!s){var p={style:l?ac({},l,f):f};this.state&&d&&(l&&d[l]!==f||!l&&d!==f)&&this.setState(p);return}if(!(yde(i.to,f)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?c:i.to;if(this.state&&d){var v={style:l?ac({},l,g):g};(l&&d[l]!==g||!l&&d!==g)&&this.setState(v)}this.runAnimation(xr(xr({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,u=i.easing,f=i.begin,c=i.onAnimationEnd,d=i.onAnimationStart,p=Xde(s,a,Vde(u),l,this.changeStyle),m=function(){o.stopJSAnimation=p()};this.manager.start([d,f,m,l,c])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,u=s[0],f=u.style,c=u.duration,d=c===void 0?0:c,p=function(g,v,_){if(_===0)return g;var w=v.duration,E=v.easing,C=E===void 0?"ease":E,T=v.style,I=v.properties,b=v.onAnimationEnd,S=_>0?s[_-1]:v,P=I||Object.keys(T);if(typeof C=="function"||C==="spring")return[].concat(v0(g),[o.runJSAnimation.bind(o,{from:S.style,to:T,duration:w,easing:C}),w]);var O=ik(P,w,C),k=xr(xr(xr({},S.style),T),{},{transition:O});return[].concat(v0(g),[k,w,b]).filter(Pde)};return this.manager.start([l].concat(v0(s.reduce(p,[f,Math.max(d,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Sde());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,u=i.easing,f=i.onAnimationStart,c=i.onAnimationEnd,d=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(d.length>1){this.runStepAnimation(i);return}var g=a?ac({},a,l):l,v=ik(Object.keys(g),s,u);m.start([f,o,xr(xr({},g),{},{transition:v}),s,c])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Zde(i,Jde),u=j.Children.count(o),f=this.state.style;if(typeof o=="function")return o(f);if(!a||u===0||s<=0)return o;var c=function(p){var m=p.props,g=m.style,v=g===void 0?{}:g,_=m.className,w=j.cloneElement(p,xr(xr({},l),{},{style:xr(xr({},v),f),className:_}));return w};return u===1?c(j.Children.only(o)):D.createElement("div",null,j.Children.map(o,function(d){return c(d)}))}}]),n}(j.PureComponent);ky.displayName="Animate";ky.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ky.propTypes={from:ze.oneOfType([ze.object,ze.string]),to:ze.oneOfType([ze.object,ze.string]),attributeName:ze.string,duration:ze.number,begin:ze.number,easing:ze.oneOfType([ze.string,ze.func]),steps:ze.arrayOf(ze.shape({duration:ze.number.isRequired,style:ze.object.isRequired,easing:ze.oneOfType([ze.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ze.func]),properties:ze.arrayOf("string"),onAnimationEnd:ze.func})),children:ze.oneOfType([ze.node,ze.func]),isActive:ze.bool,canBegin:ze.bool,onAnimationEnd:ze.func,shouldReAnimate:ze.bool,onAnimationStart:ze.func,onAnimationReStart:ze.func};const Nl=ky;function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mm.apply(this,arguments)}function fpe(t,e){return mpe(t)||ppe(t,e)||dpe(t,e)||hpe()}function hpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dpe(t,e){if(t){if(typeof t=="string")return fk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fk(t,e)}}function fk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ppe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function mpe(t){if(Array.isArray(t))return t}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){gpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gpe(t,e,n){return e=ype(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ype(t){var e=vpe(t,"string");return Lf(e)=="symbol"?e:e+""}function vpe(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pk=function(e,n,r,i,o){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,f;if(s>0&&o instanceof Array){for(var c=[0,0,0,0],d=0,p=4;d<p;d++)c[d]=o[d]>s?s:o[d];f="M".concat(e,",").concat(n+a*c[0]),c[0]>0&&(f+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(e+l*c[0],",").concat(n)),f+="L ".concat(e+r-l*c[1],",").concat(n),c[1]>0&&(f+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*c[1])),f+="L ".concat(e+r,",").concat(n+i-a*c[2]),c[2]>0&&(f+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,`,
        `).concat(e+r-l*c[2],",").concat(n+i)),f+="L ".concat(e+l*c[3],",").concat(n+i),c[3]>0&&(f+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-a*c[3])),f+="Z"}else if(s>0&&o===+o&&o>0){var m=Math.min(s,o);f="M ".concat(e,",").concat(n+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+l*m,",").concat(n,`
            L `).concat(e+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*m,`
            L `).concat(e+r,",").concat(n+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r-l*m,",").concat(n+i,`
            L `).concat(e+l*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(n+i-a*m," Z")}else f="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},_pe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,s=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(o,o+a),f=Math.max(o,o+a),c=Math.min(s,s+l),d=Math.max(s,s+l);return r>=u&&r<=f&&i>=c&&i<=d}return!1},wpe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eS=function(e){var n=dk(dk({},wpe),e),r=j.useRef(),i=j.useState(-1),o=fpe(i,2),s=o[0],a=o[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&a(C)}catch{}},[]);var l=n.x,u=n.y,f=n.width,c=n.height,d=n.radius,p=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,_=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||c!==+c||f===0||c===0)return null;var E=Le("recharts-rectangle",p);return w?D.createElement(Nl,{canBegin:s>0,from:{width:f,height:c,x:l,y:u},to:{width:f,height:c,x:l,y:u},duration:g,animationEasing:m,isActive:w},function(C){var T=C.width,I=C.height,b=C.x,S=C.y;return D.createElement(Nl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:_,easing:m},D.createElement("path",Mm({},Me(n,!0),{className:E,d:pk(b,S,T,I,d),ref:r})))}):D.createElement("path",Mm({},Me(n,!0),{className:E,d:pk(l,u,f,c,d)}))};function ab(){return ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ab.apply(this,arguments)}var tS=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,s=Le("recharts-dot",o);return n===+n&&r===+r&&i===+i?j.createElement("circle",ab({},Me(e,!1),Zp(e),{className:s,cx:n,cy:r,r:i})):null};function $f(t){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(t)}var bpe=["x","y","top","left","width","height","className"];function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lb.apply(this,arguments)}function mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mk(Object(n),!0).forEach(function(r){Epe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Epe(t,e,n){return e=Spe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Spe(t){var e=Tpe(t,"string");return $f(e)=="symbol"?e:e+""}function Tpe(t,e){if($f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ape(t,e){if(t==null)return{};var n=Ipe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ipe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ppe=function(e,n,r,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},Cpe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,u=l===void 0?0:l,f=e.width,c=f===void 0?0:f,d=e.height,p=d===void 0?0:d,m=e.className,g=Ape(e,bpe),v=xpe({x:r,y:o,top:a,left:u,width:c,height:p},g);return!oe(r)||!oe(o)||!oe(c)||!oe(p)||!oe(a)||!oe(u)?null:D.createElement("path",lb({},Me(v,!0),{className:Le("recharts-cross",m),d:Ppe(r,o,c,p,a,u)}))},Ope=GL,kpe=Ope(Object.getPrototypeOf,Object),Npe=kpe,Rpe=Ki,Mpe=Npe,Dpe=Yi,jpe="[object Object]",Lpe=Function.prototype,$pe=Object.prototype,NF=Lpe.toString,Fpe=$pe.hasOwnProperty,Vpe=NF.call(Object);function Upe(t){if(!Dpe(t)||Rpe(t)!=jpe)return!1;var e=Mpe(t);if(e===null)return!0;var n=Fpe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&NF.call(n)==Vpe}var Bpe=Upe;const zpe=Je(Bpe);var Wpe=Ki,Gpe=Yi,Hpe="[object Boolean]";function qpe(t){return t===!0||t===!1||Gpe(t)&&Wpe(t)==Hpe}var Kpe=qpe;const Ype=Je(Kpe);function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dm.apply(this,arguments)}function Qpe(t,e){return eme(t)||Zpe(t,e)||Jpe(t,e)||Xpe()}function Xpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jpe(t,e){if(t){if(typeof t=="string")return gk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gk(t,e)}}function gk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function eme(t){if(Array.isArray(t))return t}function yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yk(Object(n),!0).forEach(function(r){tme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tme(t,e,n){return e=nme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nme(t){var e=rme(t,"string");return Ff(e)=="symbol"?e:e+""}function rme(t,e){if(Ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _k=function(e,n,r,i,o){var s=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-s/2,",").concat(n+o),a+="L ".concat(e+r-s/2-i,",").concat(n+o),a+="L ".concat(e,",").concat(n," Z"),a},ime={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ome=function(e){var n=vk(vk({},ime),e),r=j.useRef(),i=j.useState(-1),o=Qpe(i,2),s=o[0],a=o[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&a(E)}catch{}},[]);var l=n.x,u=n.y,f=n.upperWidth,c=n.lowerWidth,d=n.height,p=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,_=n.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||c!==+c||d!==+d||f===0&&c===0||d===0)return null;var w=Le("recharts-trapezoid",p);return _?D.createElement(Nl,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:d,x:l,y:u},to:{upperWidth:f,lowerWidth:c,height:d,x:l,y:u},duration:g,animationEasing:m,isActive:_},function(E){var C=E.upperWidth,T=E.lowerWidth,I=E.height,b=E.x,S=E.y;return D.createElement(Nl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:m},D.createElement("path",Dm({},Me(n,!0),{className:w,d:_k(b,S,C,T,I),ref:r})))}):D.createElement("g",null,D.createElement("path",Dm({},Me(n,!0),{className:w,d:_k(l,u,f,c,d)})))},sme=["option","shapeType","propTransformer","activeClassName","isActive"];function Vf(t){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(t)}function ame(t,e){if(t==null)return{};var n=lme(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wk(Object(n),!0).forEach(function(r){ume(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ume(t,e,n){return e=cme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cme(t){var e=fme(t,"string");return Vf(e)=="symbol"?e:e+""}function fme(t,e){if(Vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hme(t,e){return jm(jm({},e),t)}function dme(t,e){return t==="symbols"}function bk(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return D.createElement(eS,n);case"trapezoid":return D.createElement(ome,n);case"sector":return D.createElement(bF,n);case"symbols":if(dme(e))return D.createElement(_E,n);break;default:return null}}function pme(t){return j.isValidElement(t)?t.props:t}function mme(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?hme:r,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=ame(t,sme),u;if(j.isValidElement(e))u=j.cloneElement(e,jm(jm({},l),pme(e)));else if(Te(e))u=e(l);else if(zpe(e)&&!Ype(e)){var f=i(e,l);u=D.createElement(bk,{shapeType:n,elementProps:f})}else{var c=l;u=D.createElement(bk,{shapeType:n,elementProps:c})}return a?D.createElement(Et,{className:s},u):u}function Ny(t,e){return e!=null&&"trapezoids"in t.props}function Ry(t,e){return e!=null&&"sectors"in t.props}function Uf(t,e){return e!=null&&"points"in t.props}function gme(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function yme(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function vme(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function _me(t,e){var n;return Ny(t,e)?n=gme:Ry(t,e)?n=yme:Uf(t,e)&&(n=vme),n}function wme(t,e){var n;return Ny(t,e)?n="trapezoids":Ry(t,e)?n="sectors":Uf(t,e)&&(n="points"),n}function bme(t,e){if(Ny(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ry(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Uf(t,e)?e.payload:{}}function xme(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=wme(n,e),o=bme(n,e),s=r.filter(function(l,u){var f=Py(o,l),c=n.props[i].filter(function(m){var g=_me(n,e);return g(m,e)}),d=n.props[i].indexOf(c[c.length-1]),p=u===d;return f&&p}),a=r.indexOf(s[s.length-1]);return a}var Eme=Math.ceil,Sme=Math.max;function Tme(t,e,n,r){for(var i=-1,o=Sme(Eme((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}var Ame=Tme,Ime=c$,xk=1/0,Pme=17976931348623157e292;function Cme(t){if(!t)return t===0?t:0;if(t=Ime(t),t===xk||t===-xk){var e=t<0?-1:1;return e*Pme}return t===t?t:0}var RF=Cme,Ome=Ame,kme=_y,_0=RF;function Nme(t){return function(e,n,r){return r&&typeof r!="number"&&kme(e,n,r)&&(n=r=void 0),e=_0(e),n===void 0?(n=e,e=0):n=_0(n),r=r===void 0?e<n?1:-1:_0(r),Ome(e,n,r,t)}}var Rme=Nme,Mme=Rme,Dme=Mme(),jme=Dme;const Lm=Je(jme);function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function Ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(n),!0).forEach(function(r){MF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MF(t,e,n){return e=Lme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lme(t){var e=$me(t,"string");return Bf(e)=="symbol"?e:e+""}function $me(t,e){if(Bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fme=["Webkit","Moz","O","ms"],Vme=function(e,n){if(!e)return null;var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Fme.reduce(function(o,s){return Sk(Sk({},o),{},MF({},s+r,n))},{});return i[e]=n,i};function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function $m(){return $m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$m.apply(this,arguments)}function Tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(n),!0).forEach(function(r){Wn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ume(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ak(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jF(r.key),r)}}function Bme(t,e,n){return e&&Ak(t.prototype,e),n&&Ak(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zme(t,e,n){return e=Fm(e),Wme(t,DF()?Reflect.construct(e,n||[],Fm(t).constructor):e.apply(t,n))}function Wme(t,e){if(e&&(Rl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gme(t)}function Gme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DF=function(){return!!t})()}function Fm(t){return Fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fm(t)}function Hme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ub(t,e)}function ub(t,e){return ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ub(t,e)}function Wn(t,e,n){return e=jF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jF(t){var e=qme(t,"string");return Rl(e)=="symbol"?e:e+""}function qme(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kme=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Ic().domain(Lm(0,l)).range([o,o+s-a]),f=u.domain().map(function(c){return u(c)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:f}},Ik=function(e){return e.changedTouches&&!!e.changedTouches.length},Ml=function(t){function e(n){var r;return Ume(this,e),r=zme(this,e,[n]),Wn(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Wn(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Wn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,s=i.onDragEnd,a=i.startIndex;s==null||s({endIndex:o,startIndex:a})}),r.detachDragEndListener()}),Wn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Wn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Wn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Wn(r,"handleSlideDragStart",function(i){var o=Ik(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Hme(e,t),Bme(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,s=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,f=u.length-1,c=Math.min(i,o),d=Math.max(i,o),p=e.getIndexInRange(s,c),m=e.getIndexInRange(s,d);return{startIndex:p-p%l,endIndex:m===f?f:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,s=i.tickFormatter,a=i.dataKey,l=Jn(o[r],a,r);return Te(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,s=i.startX,a=i.endX,l=this.props,u=l.x,f=l.width,c=l.travellerWidth,d=l.startIndex,p=l.endIndex,m=l.onChange,g=r.pageX-o;g>0?g=Math.min(g,u+f-c-a,u+f-c-s):g<0&&(g=Math.max(g,u-s,u-a));var v=this.getIndex({startX:s+g,endX:a+g});(v.startIndex!==d||v.endIndex!==p)&&m&&m(v),this.setState({startX:s+g,endX:a+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=Ik(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,a=i.endX,l=i.startX,u=this.state[s],f=this.props,c=f.x,d=f.width,p=f.travellerWidth,m=f.onChange,g=f.gap,v=f.data,_={startX:this.state.startX,endX:this.state.endX},w=r.pageX-o;w>0?w=Math.min(w,c+d-p-u):w<0&&(w=Math.max(w,c-u)),_[s]=u+w;var E=this.getIndex(_),C=E.startIndex,T=E.endIndex,I=function(){var S=v.length-1;return s==="startX"&&(a>l?C%g===0:T%g===0)||a<l&&T===S||s==="endX"&&(a>l?T%g===0:C%g===0)||a>l&&T===S};this.setState(Wn(Wn({},s,u+w),"brushMoveStartX",r.pageX),function(){m&&I()&&m(E)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,s=this.state,a=s.scaleValues,l=s.startX,u=s.endX,f=this.state[i],c=a.indexOf(f);if(c!==-1){var d=c+r;if(!(d===-1||d>=a.length)){var p=a[d];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(Wn({},i,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.fill,u=r.stroke;return D.createElement("rect",{stroke:u,fill:l,x:i,y:o,width:s,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.data,u=r.children,f=r.padding,c=j.Children.only(u);return c?D.cloneElement(c,{x:i,y:o,width:s,height:a,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,s,a=this,l=this.props,u=l.y,f=l.travellerWidth,c=l.height,d=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,v=l.endIndex,_=Math.max(r,this.props.x),w=w0(w0({},Me(this.props,!1)),{},{x:_,y:u,width:f,height:c}),E=p||"Min value: ".concat((o=m[g])===null||o===void 0?void 0:o.name,", Max value: ").concat((s=m[v])===null||s===void 0?void 0:s.name);return D.createElement(Et,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(T){["ArrowLeft","ArrowRight"].includes(T.key)&&(T.preventDefault(),T.stopPropagation(),a.handleTravellerMoveKeyboard(T.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,w))}},{key:"renderSlide",value:function(r,i){var o=this.props,s=o.y,a=o.height,l=o.stroke,u=o.travellerWidth,f=Math.min(r,i)+u,c=Math.max(Math.abs(i-r)-u,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:s,width:c,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,s=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,f=this.state,c=f.startX,d=f.endX,p=5,m={pointerEvents:"none",fill:u};return D.createElement(Et,{className:"recharts-brush-texts"},D.createElement(pm,$m({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,d)-p,y:s+a/2},m),this.getTextOfTick(i)),D.createElement(pm,$m({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,d)+l+p,y:s+a/2},m),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,s=r.children,a=r.x,l=r.y,u=r.width,f=r.height,c=r.alwaysShowText,d=this.state,p=d.startX,m=d.endX,g=d.isTextActive,v=d.isSlideMoving,_=d.isTravellerMoving,w=d.isTravellerFocused;if(!i||!i.length||!oe(a)||!oe(l)||!oe(u)||!oe(f)||u<=0||f<=0)return null;var E=Le("recharts-brush",o),C=D.Children.count(s)===1,T=Vme("userSelect","none");return D.createElement(Et,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:T},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||v||_||w||c)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,s=r.width,a=r.height,l=r.stroke,u=Math.floor(o+a/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:i,y:o,width:s,height:a,fill:l,stroke:"none"}),D.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return D.isValidElement(r)?o=D.cloneElement(r,i):Te(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,s=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,f=r.startIndex,c=r.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return w0({prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:s},o&&o.length?Kme({data:o,width:s,x:a,travellerWidth:l,startIndex:f,endIndex:c}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+s-l]);var d=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,s=0,a=o-1;a-s>1;){var l=Math.floor((s+a)/2);r[l]>i?a=l:s=l}return i>=r[a]?a:s}}])}(j.PureComponent);Wn(Ml,"displayName","Brush");Wn(Ml,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Yme=AE;function Qme(t,e){var n;return Yme(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var Xme=Qme,Jme=LL,Zme=Go,ege=Xme,tge=Un,nge=_y;function rge(t,e,n){var r=tge(t)?Jme:ege;return n&&nge(t,e,n)&&(e=void 0),r(t,Zme(e))}var ige=rge;const oge=Je(ige);var Zr=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},Pk=o$;function sge(t,e,n){e=="__proto__"&&Pk?Pk(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var age=sge,lge=age,uge=r$,cge=Go;function fge(t,e){var n={};return e=cge(e),uge(t,function(r,i,o){lge(n,i,e(r,i,o))}),n}var hge=fge;const dge=Je(hge);function pge(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var mge=pge,gge=AE;function yge(t,e){var n=!0;return gge(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var vge=yge,_ge=mge,wge=vge,bge=Go,xge=Un,Ege=_y;function Sge(t,e,n){var r=xge(t)?_ge:wge;return n&&Ege(t,e,n)&&(e=void 0),r(t,bge(e))}var Tge=Sge;const LF=Je(Tge);var Age=["x","y"];function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function cb(){return cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cb.apply(this,arguments)}function Ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ju(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(n),!0).forEach(function(r){Ige(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ige(t,e,n){return e=Pge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pge(t){var e=Cge(t,"string");return zf(e)=="symbol"?e:e+""}function Cge(t,e){if(zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oge(t,e){if(t==null)return{};var n=kge(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nge(t,e){var n=t.x,r=t.y,i=Oge(t,Age),o="".concat(n),s=parseInt(o,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||i.height),f=parseInt(u,10),c="".concat(e.width||i.width),d=parseInt(c,10);return Ju(Ju(Ju(Ju(Ju({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:f,width:d,name:e.name,radius:e.radius})}function Ok(t){return D.createElement(mme,cb({shapeType:"rectangle",propTransformer:Nge,activeClassName:"recharts-active-bar"},t))}var Rge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=oe(r)||ZY(r);return o?e(r,i):(o||Gs(!1),n)}},Mge=["value","background"],$F;function Dl(t){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(t)}function Dge(t,e){if(t==null)return{};var n=jge(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vm.apply(this,arguments)}function kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(n),!0).forEach(function(r){mo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VF(r.key),r)}}function $ge(t,e,n){return e&&Nk(t.prototype,e),n&&Nk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fge(t,e,n){return e=Um(e),Vge(t,FF()?Reflect.construct(e,n||[],Um(t).constructor):e.apply(t,n))}function Vge(t,e){if(e&&(Dl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uge(t)}function Uge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FF=function(){return!!t})()}function Um(t){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Um(t)}function Bge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fb(t,e)}function fb(t,e){return fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fb(t,e)}function mo(t,e,n){return e=VF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VF(t){var e=zge(t,"string");return Dl(e)=="symbol"?e:e+""}function zge(t,e){if(Dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sh=function(t){function e(){var n;Lge(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Fge(this,e,[].concat(i)),mo(n,"state",{isAnimationFinished:!1}),mo(n,"id",yh("recharts-bar-")),mo(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),mo(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return Bge(e,t),$ge(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,s=o.shape,a=o.dataKey,l=o.activeIndex,u=o.activeBar,f=Me(this.props,!1);return r&&r.map(function(c,d){var p=d===l,m=p?u:s,g=Tt(Tt(Tt({},f),c),{},{isActive:p,option:m,index:d,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return D.createElement(Et,Vm({className:"recharts-bar-rectangle"},em(i.props,c,d),{key:"rectangle-".concat(c==null?void 0:c.x,"-").concat(c==null?void 0:c.y,"-").concat(c==null?void 0:c.value,"-").concat(d)}),D.createElement(Ok,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,s=i.layout,a=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,f=i.animationEasing,c=i.animationId,d=this.state.prevData;return D.createElement(Nl,{begin:l,duration:u,isActive:a,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=o.map(function(v,_){var w=d&&d[_];if(w){var E=Pr(w.x,v.x),C=Pr(w.y,v.y),T=Pr(w.width,v.width),I=Pr(w.height,v.height);return Tt(Tt({},v),{},{x:E(m),y:C(m),width:T(m),height:I(m)})}if(s==="horizontal"){var b=Pr(0,v.height),S=b(m);return Tt(Tt({},v),{},{y:v.y+v.height-S,height:S})}var P=Pr(0,v.width),O=P(m);return Tt(Tt({},v),{},{width:O})});return D.createElement(Et,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,s=this.state.prevData;return o&&i&&i.length&&(!s||!Py(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,s=i.dataKey,a=i.activeIndex,l=Me(this.props.background,!1);return o.map(function(u,f){u.value;var c=u.background,d=Dge(u,Mge);if(!c)return null;var p=Tt(Tt(Tt(Tt(Tt({},d),{},{fill:"#eee"},c),l),em(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:f,className:"recharts-bar-background-rectangle"});return D.createElement(Ok,Vm({key:"background-bar-".concat(f),option:r.props.background,isActive:f===a},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.data,a=o.xAxis,l=o.yAxis,u=o.layout,f=o.children,c=hr(f,Eh);if(!c)return null;var d=u==="vertical"?s[0].height/2:s[0].width/2,p=function(v,_){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:Jn(v,_)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return D.createElement(Et,m,c.map(function(g){return D.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:s,xAxis:a,yAxis:l,layout:u,offset:d,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,s=r.className,a=r.xAxis,l=r.yAxis,u=r.left,f=r.top,c=r.width,d=r.height,p=r.isAnimationActive,m=r.background,g=r.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,_=Le("recharts-bar",s),w=a&&a.allowDataOverflow,E=l&&l.allowDataOverflow,C=w||E,T=Oe(g)?this.id:g;return D.createElement(Et,{className:_},w||E?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(T)},D.createElement("rect",{x:w?u:u-c/2,y:E?f:f-d/2,width:w?c:c*2,height:E?d:d*2}))):null,D.createElement(Et,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(T,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,T),(!p||v)&&Oo.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(j.PureComponent);$F=Sh;mo(Sh,"displayName","Bar");mo(Sh,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Oi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});mo(Sh,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,f=t.dataStartIndex,c=t.displayedData,d=t.offset,p=wfe(r,n);if(!p)return null;var m=e.layout,g=n.type.defaultProps,v=g!==void 0?Tt(Tt({},g),n.props):n.props,_=v.dataKey,w=v.children,E=v.minPointSize,C=m==="horizontal"?s:o,T=u?C.scale.domain():null,I=Pfe({numericAxis:C}),b=hr(w,h$),S=c.map(function(P,O){var k,M,N,V,z,q;u?k=bfe(u[f+O],T):(k=Jn(P,_),Array.isArray(k)||(k=[I,k]));var K=Rge(E,$F.defaultProps.minPointSize)(k[1],O);if(m==="horizontal"){var F,W=[s.scale(k[0]),s.scale(k[1])],Q=W[0],re=W[1];M=OO({axis:o,ticks:a,bandSize:i,offset:p.offset,entry:P,index:O}),N=(F=re??Q)!==null&&F!==void 0?F:void 0,V=p.size;var U=Q-re;if(z=Number.isNaN(U)?0:U,q={x:M,y:s.y,width:V,height:s.height},Math.abs(K)>0&&Math.abs(z)<Math.abs(K)){var X=Nr(z||K)*(Math.abs(K)-Math.abs(z));N-=X,z+=X}}else{var ue=[o.scale(k[0]),o.scale(k[1])],de=ue[0],me=ue[1];if(M=de,N=OO({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:P,index:O}),V=me-de,z=p.size,q={x:o.x,y:N,width:o.width,height:z},Math.abs(K)>0&&Math.abs(V)<Math.abs(K)){var xe=Nr(V||K)*(Math.abs(K)-Math.abs(V));V+=xe}}return Tt(Tt(Tt({},P),{},{x:M,y:N,width:V,height:z,value:u?k:k[1],payload:P,background:q},b&&b[O]&&b[O].props),{},{tooltipPayload:[vF(n,P)],tooltipPosition:{x:M+V/2,y:N+z/2}})});return Tt({data:S,layout:m},d)});function Wf(t){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wf(t)}function Wge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UF(r.key),r)}}function Gge(t,e,n){return e&&Rk(t.prototype,e),n&&Rk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(n),!0).forEach(function(r){My(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function My(t,e,n){return e=UF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UF(t){var e=Hge(t,"string");return Wf(e)=="symbol"?e:e+""}function Hge(t,e){if(Wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qge=function(e,n,r,i,o){var s=e.width,a=e.height,l=e.layout,u=e.children,f=Object.keys(n),c={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},d=!!Hn(u,Sh);return f.reduce(function(p,m){var g=n[m],v=g.orientation,_=g.domain,w=g.padding,E=w===void 0?{}:w,C=g.mirror,T=g.reversed,I="".concat(v).concat(C?"Mirror":""),b,S,P,O,k;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var M=_[1]-_[0],N=1/0,V=g.categoricalDomain.sort(nQ);if(V.forEach(function(ue,de){de>0&&(N=Math.min((ue||0)-(V[de-1]||0),N))}),Number.isFinite(N)){var z=N/M,q=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(b=z*q/2),g.padding==="no-gap"){var K=zs(e.barCategoryGap,z*q),F=z*q/2;b=F-K-(F-K)/q*K}}}i==="xAxis"?S=[r.left+(E.left||0)+(b||0),r.left+r.width-(E.right||0)-(b||0)]:i==="yAxis"?S=l==="horizontal"?[r.top+r.height-(E.bottom||0),r.top+(E.top||0)]:[r.top+(E.top||0)+(b||0),r.top+r.height-(E.bottom||0)-(b||0)]:S=g.range,T&&(S=[S[1],S[0]]);var W=vfe(g,o,d),Q=W.scale,re=W.realScaleType;Q.domain(_).range(S),_fe(Q);var U=Ife(Q,Tr(Tr({},g),{},{realScaleType:re}));i==="xAxis"?(k=v==="top"&&!C||v==="bottom"&&C,P=r.left,O=c[I]-k*g.height):i==="yAxis"&&(k=v==="left"&&!C||v==="right"&&C,P=c[I]-k*g.width,O=r.top);var X=Tr(Tr(Tr({},g),U),{},{realScaleType:re,x:P,y:O,scale:Q,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return X.bandSize=Pm(X,U),!g.hide&&i==="xAxis"?c[I]+=(k?-1:1)*X.height:g.hide||(c[I]+=(k?-1:1)*X.width),Tr(Tr({},p),{},My({},m,X))},{})},BF=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return{x:Math.min(r,o),y:Math.min(i,s),width:Math.abs(o-r),height:Math.abs(s-i)}},Kge=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return BF({x:n,y:r},{x:i,y:o})},zF=function(){function t(e){Wge(this,t),this.scale=e}return Gge(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();My(zF,"EPS",1e-4);var nS=function(e){var n=Object.keys(e).reduce(function(r,i){return Tr(Tr({},r),{},My({},i,zF.create(e[i])))},{});return Tr(Tr({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return dge(i,function(l,u){return n[u].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return LF(i,function(o,s){return n[s].isInRange(o)})}})};function Yge(t){return(t%180+180)%180}var Qge=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Yge(i),s=o*Math.PI/180,a=Math.atan(r/n),l=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},Xge=Go,Jge=vh,Zge=yy;function eye(t){return function(e,n,r){var i=Object(e);if(!Jge(e)){var o=Xge(n);e=Zge(e),n=function(a){return o(i[a],a,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var tye=eye,nye=RF;function rye(t){var e=nye(t),n=e%1;return e===e?n?e-n:e:0}var iye=rye,oye=XL,sye=Go,aye=iye,lye=Math.max;function uye(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:aye(n);return i<0&&(i=lye(r+i,0)),oye(t,sye(e),i)}var cye=uye,fye=tye,hye=cye,dye=fye(hye),pye=dye;const mye=Je(pye);var gye=rY(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),rS=j.createContext(void 0),iS=j.createContext(void 0),WF=j.createContext(void 0),GF=j.createContext({}),HF=j.createContext(void 0),qF=j.createContext(0),KF=j.createContext(0),Dk=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,s=e.clipPathId,a=e.children,l=e.width,u=e.height,f=gye(o);return D.createElement(rS.Provider,{value:r},D.createElement(iS.Provider,{value:i},D.createElement(GF.Provider,{value:o},D.createElement(WF.Provider,{value:f},D.createElement(HF.Provider,{value:s},D.createElement(qF.Provider,{value:u},D.createElement(KF.Provider,{value:l},a)))))))},yye=function(){return j.useContext(HF)},YF=function(e){var n=j.useContext(rS);n==null&&Gs(!1);var r=n[e];return r==null&&Gs(!1),r},vye=function(){var e=j.useContext(rS);return co(e)},_ye=function(){var e=j.useContext(iS),n=mye(e,function(r){return LF(r.domain,Number.isFinite)});return n||co(e)},QF=function(e){var n=j.useContext(iS);n==null&&Gs(!1);var r=n[e];return r==null&&Gs(!1),r},wye=function(){var e=j.useContext(WF);return e},bye=function(){return j.useContext(GF)},oS=function(){return j.useContext(KF)},sS=function(){return j.useContext(qF)};function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}function xye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JF(r.key),r)}}function Eye(t,e,n){return e&&jk(t.prototype,e),n&&jk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sye(t,e,n){return e=Bm(e),Tye(t,XF()?Reflect.construct(e,n||[],Bm(t).constructor):e.apply(t,n))}function Tye(t,e){if(e&&(jl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aye(t)}function Aye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XF=function(){return!!t})()}function Bm(t){return Bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bm(t)}function Iye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hb(t,e)}function hb(t,e){return hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hb(t,e)}function Lk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $k(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lk(Object(n),!0).forEach(function(r){aS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aS(t,e,n){return e=JF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JF(t){var e=Pye(t,"string");return jl(e)=="symbol"?e:e+""}function Pye(t,e){if(jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cye(t,e){return Rye(t)||Nye(t,e)||kye(t,e)||Oye()}function Oye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kye(t,e){if(t){if(typeof t=="string")return Fk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fk(t,e)}}function Fk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Rye(t){if(Array.isArray(t))return t}function db(){return db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},db.apply(this,arguments)}var Mye=function(e,n){var r;return D.isValidElement(e)?r=D.cloneElement(e,n):Te(e)?r=e(n):r=D.createElement("line",db({},n,{className:"recharts-reference-line-line"})),r},Dye=function(e,n,r,i,o,s,a,l,u){var f=o.x,c=o.y,d=o.width,p=o.height;if(r){var m=u.y,g=e.y.apply(m,{position:s});if(Zr(u,"discard")&&!e.y.isInRange(g))return null;var v=[{x:f+d,y:g},{x:f,y:g}];return l==="left"?v.reverse():v}if(n){var _=u.x,w=e.x.apply(_,{position:s});if(Zr(u,"discard")&&!e.x.isInRange(w))return null;var E=[{x:w,y:c+p},{x:w,y:c}];return a==="top"?E.reverse():E}if(i){var C=u.segment,T=C.map(function(I){return e.apply(I,{position:s})});return Zr(u,"discard")&&oge(T,function(I){return!e.isInRange(I)})?null:T}return null};function jye(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,s=t.shape,a=t.className,l=t.alwaysShow,u=yye(),f=YF(i),c=QF(o),d=wye();if(!u||!d)return null;Ci(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=nS({x:f.scale,y:c.scale}),m=Dt(e),g=Dt(n),v=r&&r.length===2,_=Dye(p,m,g,v,d,t.position,f.orientation,c.orientation,t);if(!_)return null;var w=Cye(_,2),E=w[0],C=E.x,T=E.y,I=w[1],b=I.x,S=I.y,P=Zr(t,"hidden")?"url(#".concat(u,")"):void 0,O=$k($k({clipPath:P},Me(t,!0)),{},{x1:C,y1:T,x2:b,y2:S});return D.createElement(Et,{className:Le("recharts-reference-line",a)},Mye(s,O),mn.renderCallByParent(t,Kge({x1:C,y1:T,x2:b,y2:S})))}var lS=function(t){function e(){return xye(this,e),Sye(this,e,arguments)}return Iye(e,t),Eye(e,[{key:"render",value:function(){return D.createElement(jye,this.props)}}])}(D.Component);aS(lS,"displayName","ReferenceLine");aS(lS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function pb(){return pb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pb.apply(this,arguments)}function Ll(t){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(t)}function Vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(n),!0).forEach(function(r){Dy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e4(r.key),r)}}function $ye(t,e,n){return e&&Bk(t.prototype,e),n&&Bk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fye(t,e,n){return e=zm(e),Vye(t,ZF()?Reflect.construct(e,n||[],zm(t).constructor):e.apply(t,n))}function Vye(t,e){if(e&&(Ll(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uye(t)}function Uye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZF=function(){return!!t})()}function zm(t){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zm(t)}function Bye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mb(t,e)}function mb(t,e){return mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mb(t,e)}function Dy(t,e,n){return e=e4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e4(t){var e=zye(t,"string");return Ll(e)=="symbol"?e:e+""}function zye(t,e){if(Ll(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wye=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,s=nS({x:i.scale,y:o.scale}),a=s.apply({x:n,y:r},{bandAware:!0});return Zr(e,"discard")&&!s.isInRange(a)?null:a},jy=function(t){function e(){return Lye(this,e),Fye(this,e,arguments)}return Bye(e,t),$ye(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,s=r.r,a=r.alwaysShow,l=r.clipPathId,u=Dt(i),f=Dt(o);if(Ci(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var c=Wye(this.props);if(!c)return null;var d=c.x,p=c.y,m=this.props,g=m.shape,v=m.className,_=Zr(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=Uk(Uk({clipPath:_},Me(this.props,!0)),{},{cx:d,cy:p});return D.createElement(Et,{className:Le("recharts-reference-dot",v)},e.renderDot(g,w),mn.renderCallByParent(this.props,{x:d-s,y:p-s,width:2*s,height:2*s}))}}])}(D.Component);Dy(jy,"displayName","ReferenceDot");Dy(jy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Dy(jy,"renderDot",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):Te(t)?n=t(e):n=D.createElement(tS,pb({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function gb(){return gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gb.apply(this,arguments)}function $l(t){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(t)}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){Ly(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n4(r.key),r)}}function Hye(t,e,n){return e&&Gk(t.prototype,e),n&&Gk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qye(t,e,n){return e=Wm(e),Kye(t,t4()?Reflect.construct(e,n||[],Wm(t).constructor):e.apply(t,n))}function Kye(t,e){if(e&&($l(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yye(t)}function Yye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t4=function(){return!!t})()}function Wm(t){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wm(t)}function Qye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yb(t,e)}function yb(t,e){return yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yb(t,e)}function Ly(t,e,n){return e=n4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n4(t){var e=Xye(t,"string");return $l(e)=="symbol"?e:e+""}function Xye(t,e){if($l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jye=function(e,n,r,i,o){var s=o.x1,a=o.x2,l=o.y1,u=o.y2,f=o.xAxis,c=o.yAxis;if(!f||!c)return null;var d=nS({x:f.scale,y:c.scale}),p={x:e?d.x.apply(s,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(l,{position:"start"}):d.y.rangeMin},m={x:n?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:i?d.y.apply(u,{position:"end"}):d.y.rangeMax};return Zr(o,"discard")&&(!d.isInRange(p)||!d.isInRange(m))?null:BF(p,m)},$y=function(t){function e(){return Gye(this,e),qye(this,e,arguments)}return Qye(e,t),Hye(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,s=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,f=r.clipPathId;Ci(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=Dt(i),d=Dt(o),p=Dt(s),m=Dt(a),g=this.props.shape;if(!c&&!d&&!p&&!m&&!g)return null;var v=Jye(c,d,p,m,this.props);if(!v&&!g)return null;var _=Zr(this.props,"hidden")?"url(#".concat(f,")"):void 0;return D.createElement(Et,{className:Le("recharts-reference-area",l)},e.renderRect(g,Wk(Wk({clipPath:_},Me(this.props,!0)),v)),mn.renderCallByParent(this.props,v))}}])}(D.Component);Ly($y,"displayName","ReferenceArea");Ly($y,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ly($y,"renderRect",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):Te(t)?n=t(e):n=D.createElement(eS,gb({},e,{className:"recharts-reference-area-rect"})),n});function r4(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)if(n===void 0||n(t[i])===!0)r.push(t[i]);else return;return r}function Zye(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Qge(r,n)}function eve(t,e,n){var r=n==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function Gm(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function tve(t,e){return r4(t,e+1)}function nve(t,e,n,r,i){for(var o=(r||[]).slice(),s=e.start,a=e.end,l=0,u=1,f=s,c=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:r4(r,u)};var g=l,v,_=function(){return v===void 0&&(v=n(m,g)),v},w=m.coordinate,E=l===0||Gm(t,w,_,f,a);E||(l=0,f=s,u+=1),E&&(f=w+t*(_()/2+i),l+=u)},d;u<=o.length;)if(d=c(),d)return d.v;return[]}function Gf(t){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gf(t)}function Hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hk(Object(n),!0).forEach(function(r){rve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rve(t,e,n){return e=ive(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ive(t){var e=ove(t,"string");return Gf(e)=="symbol"?e:e+""}function ove(t,e){if(Gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sve(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,a=e.start,l=e.end,u=function(d){var p=o[d],m,g=function(){return m===void 0&&(m=n(p,d)),m};if(d===s-1){var v=t*(p.coordinate+t*g()/2-l);o[d]=p=fn(fn({},p),{},{tickCoord:v>0?p.coordinate-v*t:p.coordinate})}else o[d]=p=fn(fn({},p),{},{tickCoord:p.coordinate});var _=Gm(t,p.tickCoord,g,a,l);_&&(l=p.tickCoord-t*(g()/2+i),o[d]=fn(fn({},p),{},{isShow:!0}))},f=s-1;f>=0;f--)u(f);return o}function ave(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,l=e.start,u=e.end;if(o){var f=r[a-1],c=n(f,a-1),d=t*(f.coordinate+t*c/2-u);s[a-1]=f=fn(fn({},f),{},{tickCoord:d>0?f.coordinate-d*t:f.coordinate});var p=Gm(t,f.tickCoord,function(){return c},l,u);p&&(u=f.tickCoord-t*(c/2+i),s[a-1]=fn(fn({},f),{},{isShow:!0}))}for(var m=o?a-1:a,g=function(w){var E=s[w],C,T=function(){return C===void 0&&(C=n(E,w)),C};if(w===0){var I=t*(E.coordinate-t*T()/2-l);s[w]=E=fn(fn({},E),{},{tickCoord:I<0?E.coordinate-I*t:E.coordinate})}else s[w]=E=fn(fn({},E),{},{tickCoord:E.coordinate});var b=Gm(t,E.tickCoord,T,l,u);b&&(l=E.tickCoord+t*(T()/2+i),s[w]=fn(fn({},E),{},{isShow:!0}))},v=0;v<m;v++)g(v);return s}function uS(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,u=t.tickFormatter,f=t.unit,c=t.angle;if(!i||!i.length||!r)return[];if(oe(l)||Oi.isSsr)return tve(i,typeof l=="number"&&oe(l)?l:0);var d=[],p=a==="top"||a==="bottom"?"width":"height",m=f&&p==="width"?Ac(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(E,C){var T=Te(u)?u(E.value,C):E.value;return p==="width"?Zye(Ac(T,{fontSize:e,letterSpacing:n}),m,c):Ac(T,{fontSize:e,letterSpacing:n})[p]},v=i.length>=2?Nr(i[1].coordinate-i[0].coordinate):1,_=eve(o,v,p);return l==="equidistantPreserveStart"?nve(v,_,g,i,s):(l==="preserveStart"||l==="preserveStartEnd"?d=ave(v,_,g,i,s,l==="preserveStartEnd"):d=sve(v,_,g,i,s),d.filter(function(w){return w.isShow}))}var lve=["viewBox"],uve=["viewBox"],cve=["ticks"];function Fl(t){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fl(t)}function Da(){return Da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Da.apply(this,arguments)}function qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(n),!0).forEach(function(r){cS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b0(t,e){if(t==null)return{};var n=fve(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o4(r.key),r)}}function dve(t,e,n){return e&&Kk(t.prototype,e),n&&Kk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pve(t,e,n){return e=Hm(e),mve(t,i4()?Reflect.construct(e,n||[],Hm(t).constructor):e.apply(t,n))}function mve(t,e){if(e&&(Fl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gve(t)}function gve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i4=function(){return!!t})()}function Hm(t){return Hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hm(t)}function yve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vb(t,e)}function vb(t,e){return vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vb(t,e)}function cS(t,e,n){return e=o4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o4(t){var e=vve(t,"string");return Fl(e)=="symbol"?e:e+""}function vve(t,e){if(Fl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pu=function(t){function e(n){var r;return hve(this,e),r=pve(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return yve(e,t),dve(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=b0(r,lve),a=this.props,l=a.viewBox,u=b0(a,uve);return!Xa(o,l)||!Xa(s,u)||!Xa(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,u=i.orientation,f=i.tickSize,c=i.mirror,d=i.tickMargin,p,m,g,v,_,w,E=c?-1:1,C=r.tickSize||f,T=oe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=m=r.coordinate,v=s+ +!c*l,g=v-E*C,w=g-E*d,_=T;break;case"left":g=v=r.coordinate,m=o+ +!c*a,p=m-E*C,_=p-E*d,w=T;break;case"right":g=v=r.coordinate,m=o+ +c*a,p=m+E*C,_=p+E*d,w=T;break;default:p=m=r.coordinate,v=s+ +c*l,g=v+E*C,w=g+E*d,_=T;break}return{line:{x1:p,y1:g,x2:m,y2:v},tick:{x:_,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.orientation,u=r.mirror,f=r.axisLine,c=Ot(Ot(Ot({},Me(this.props,!1)),Me(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var d=+(l==="top"&&!u||l==="bottom"&&u);c=Ot(Ot({},c),{},{x1:i,y1:o+d*a,x2:i+s,y2:o+d*a})}else{var p=+(l==="left"&&!u||l==="right"&&u);c=Ot(Ot({},c),{},{x1:i+p*s,y1:o,x2:i+p*s,y2:o+a})}return D.createElement("line",Da({},c,{className:Le("recharts-cartesian-axis-line",fr(f,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,a=this.props,l=a.tickLine,u=a.stroke,f=a.tick,c=a.tickFormatter,d=a.unit,p=uS(Ot(Ot({},this.props),{},{ticks:r}),i,o),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Me(this.props,!1),_=Me(f,!1),w=Ot(Ot({},v),{},{fill:"none"},Me(l,!1)),E=p.map(function(C,T){var I=s.getTickLineCoord(C),b=I.line,S=I.tick,P=Ot(Ot(Ot(Ot({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:u},_),S),{},{index:T,payload:C,visibleTicksCount:p.length,tickFormatter:c});return D.createElement(Et,Da({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},em(s.props,C,T)),l&&D.createElement("line",Da({},w,b,{className:Le("recharts-cartesian-axis-tick-line",fr(l,"className"))})),f&&e.renderTickItem(f,P,"".concat(Te(c)?c(C.value,T):C.value).concat(d||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,a=i.height,l=i.ticksGenerator,u=i.className,f=i.hide;if(f)return null;var c=this.props,d=c.ticks,p=b0(c,cve),m=d;return Te(l)&&(m=d&&d.length>0?l(this.props):l(p)),s<=0||a<=0||!m||!m.length?null:D.createElement(Et,{className:Le("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),mn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s,a=Le(i.className,"recharts-cartesian-axis-tick-value");return D.isValidElement(r)?s=D.cloneElement(r,Ot(Ot({},i),{},{className:a})):Te(r)?s=r(Ot(Ot({},i),{},{className:a})):s=D.createElement(pm,Da({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}])}(j.Component);cS(pu,"displayName","CartesianAxis");cS(pu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _ve=["x1","y1","x2","y2","key"],wve=["offset"];function Hs(t){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hs(t)}function Yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(n),!0).forEach(function(r){bve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bve(t,e,n){return e=xve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xve(t){var e=Eve(t,"string");return Hs(e)=="symbol"?e:e+""}function Eve(t,e){if(Hs(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _s(){return _s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_s.apply(this,arguments)}function Qk(t,e){if(t==null)return{};var n=Sve(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Tve=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,s=e.width,a=e.height,l=e.ry;return D.createElement("rect",{x:i,y:o,ry:l,width:s,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function s4(t,e){var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(Te(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=e.key,l=Qk(e,_ve),u=Me(l,!1);u.offset;var f=Qk(u,wve);n=D.createElement("line",_s({},f,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:a}))}return n}function Ave(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var u=gn(gn({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return s4(i,u)});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Ive(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var u=gn(gn({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return s4(i,u)});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Pve(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,s=t.height,a=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var f=a.map(function(d){return Math.round(d+i-i)}).sort(function(d,p){return d-p});i!==f[0]&&f.unshift(0);var c=f.map(function(d,p){var m=!f[p+1],g=m?i+s-d:f[p+1]-d;if(g<=0)return null;var v=p%e.length;return D.createElement("rect",{key:"react-".concat(p),y:d,x:r,height:g,width:o,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function Cve(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,s=t.y,a=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(d){return Math.round(d+o-o)}).sort(function(d,p){return d-p});o!==f[0]&&f.unshift(0);var c=f.map(function(d,p){var m=!f[p+1],g=m?o+a-d:f[p+1]-d;if(g<=0)return null;var v=p%r.length;return D.createElement("rect",{key:"react-".concat(p),x:d,y:s,width:g,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var Ove=function(e,n){var r=e.xAxis,i=e.width,o=e.height,s=e.offset;return gF(uS(gn(gn(gn({},pu.defaultProps),r),{},{ticks:Si(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,n)},kve=function(e,n){var r=e.yAxis,i=e.width,o=e.height,s=e.offset;return gF(uS(gn(gn(gn({},pu.defaultProps),r),{},{ticks:Si(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,n)},pa={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function a4(t){var e,n,r,i,o,s,a=oS(),l=sS(),u=bye(),f=gn(gn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:pa.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:pa.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:pa.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:pa.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:pa.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:pa.verticalFill,x:oe(t.x)?t.x:u.left,y:oe(t.y)?t.y:u.top,width:oe(t.width)?t.width:u.width,height:oe(t.height)?t.height:u.height}),c=f.x,d=f.y,p=f.width,m=f.height,g=f.syncWithTicks,v=f.horizontalValues,_=f.verticalValues,w=vye(),E=_ye();if(!oe(p)||p<=0||!oe(m)||m<=0||!oe(c)||c!==+c||!oe(d)||d!==+d)return null;var C=f.verticalCoordinatesGenerator||Ove,T=f.horizontalCoordinatesGenerator||kve,I=f.horizontalPoints,b=f.verticalPoints;if((!I||!I.length)&&Te(T)){var S=v&&v.length,P=T({yAxis:E?gn(gn({},E),{},{ticks:S?v:E.ticks}):void 0,width:a,height:l,offset:u},S?!0:g);Ci(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Hs(P),"]")),Array.isArray(P)&&(I=P)}if((!b||!b.length)&&Te(C)){var O=_&&_.length,k=C({xAxis:w?gn(gn({},w),{},{ticks:O?_:w.ticks}):void 0,width:a,height:l,offset:u},O?!0:g);Ci(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Hs(k),"]")),Array.isArray(k)&&(b=k)}return D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(Tve,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),D.createElement(Ave,_s({},f,{offset:u,horizontalPoints:I,xAxis:w,yAxis:E})),D.createElement(Ive,_s({},f,{offset:u,verticalPoints:b,xAxis:w,yAxis:E})),D.createElement(Pve,_s({},f,{horizontalPoints:I})),D.createElement(Cve,_s({},f,{verticalPoints:b})))}a4.displayName="CartesianGrid";var Nve=["type","layout","connectNulls","ref"],Rve=["key"];function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function Xk(t,e){if(t==null)return{};var n=Mve(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oc(){return Oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oc.apply(this,arguments)}function Jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(n),!0).forEach(function(r){Ar(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ma(t){return $ve(t)||Lve(t)||jve(t)||Dve()}function Dve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jve(t,e){if(t){if(typeof t=="string")return _b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _b(t,e)}}function Lve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $ve(t){if(Array.isArray(t))return _b(t)}function _b(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u4(r.key),r)}}function Vve(t,e,n){return e&&Zk(t.prototype,e),n&&Zk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uve(t,e,n){return e=qm(e),Bve(t,l4()?Reflect.construct(e,n||[],qm(t).constructor):e.apply(t,n))}function Bve(t,e){if(e&&(Vl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zve(t)}function zve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l4=function(){return!!t})()}function qm(t){return qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qm(t)}function Wve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wb(t,e)}function wb(t,e){return wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wb(t,e)}function Ar(t,e,n){return e=u4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u4(t){var e=Gve(t,"string");return Vl(e)=="symbol"?e:e+""}function Gve(t,e){if(Vl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Th=function(t){function e(){var n;Fve(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Uve(this,e,[].concat(i)),Ar(n,"state",{isAnimationFinished:!0,totalLength:0}),Ar(n,"generateSimpleStrokeDasharray",function(s,a){return"".concat(a,"px ").concat(s-a,"px")}),Ar(n,"getStrokeDasharray",function(s,a,l){var u=l.reduce(function(_,w){return _+w});if(!u)return n.generateSimpleStrokeDasharray(a,s);for(var f=Math.floor(s/u),c=s%u,d=a-s,p=[],m=0,g=0;m<l.length;g+=l[m],++m)if(g+l[m]>c){p=[].concat(ma(l.slice(0,m)),[c-g]);break}var v=p.length%2===0?[0,d]:[d];return[].concat(ma(e.repeat(l,f)),ma(p),v).map(function(_){return"".concat(_,"px")}).join(", ")}),Ar(n,"id",yh("recharts-line-")),Ar(n,"pathRef",function(s){n.mainCurve=s}),Ar(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ar(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Wve(e,t),Vve(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,a=o.xAxis,l=o.yAxis,u=o.layout,f=o.children,c=hr(f,Eh);if(!c)return null;var d=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:Jn(g.payload,v)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return D.createElement(Et,p,c.map(function(m){return D.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:s,xAxis:a,yAxis:l,layout:u,dataPointFormatter:d})}))}},{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,u=a.points,f=a.dataKey,c=Me(this.props,!1),d=Me(l,!0),p=u.map(function(g,v){var _=zn(zn(zn({key:"dot-".concat(v),r:3},c),d),{},{index:v,cx:g.x,cy:g.y,value:g.value,dataKey:f,payload:g.payload,points:u});return e.renderDotItem(l,_)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return D.createElement(Et,Oc({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(r,i,o,s){var a=this.props,l=a.type,u=a.layout,f=a.connectNulls;a.ref;var c=Xk(a,Nve),d=zn(zn(zn({},Me(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:f});return D.createElement(Xw,Oc({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,s=this.props,a=s.points,l=s.strokeDasharray,u=s.isAnimationActive,f=s.animationBegin,c=s.animationDuration,d=s.animationEasing,p=s.animationId,m=s.animateNewValues,g=s.width,v=s.height,_=this.state,w=_.prevPoints,E=_.totalLength;return D.createElement(Nl,{begin:f,duration:c,isActive:u,easing:d,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var T=C.t;if(w){var I=w.length/a.length,b=a.map(function(M,N){var V=Math.floor(N*I);if(w[V]){var z=w[V],q=Pr(z.x,M.x),K=Pr(z.y,M.y);return zn(zn({},M),{},{x:q(T),y:K(T)})}if(m){var F=Pr(g*2,M.x),W=Pr(v/2,M.y);return zn(zn({},M),{},{x:F(T),y:W(T)})}return zn(zn({},M),{},{x:M.x,y:M.y})});return o.renderCurveStatically(b,r,i)}var S=Pr(0,E),P=S(T),O;if(l){var k="".concat(l).split(/[,\s]+/gim).map(function(M){return parseFloat(M)});O=o.getStrokeDasharray(P,E,k)}else O=o.generateSimpleStrokeDasharray(E,P);return o.renderCurveStatically(a,r,i,{strokeDasharray:O})})}},{key:"renderCurve",value:function(r,i){var o=this.props,s=o.points,a=o.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return a&&s&&s.length&&(!u&&f>0||!Py(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,a=i.points,l=i.className,u=i.xAxis,f=i.yAxis,c=i.top,d=i.left,p=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(o||!a||!a.length)return null;var _=this.state.isAnimationFinished,w=a.length===1,E=Le("recharts-line",l),C=u&&u.allowDataOverflow,T=f&&f.allowDataOverflow,I=C||T,b=Oe(v)?this.id:v,S=(r=Me(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=S.r,O=P===void 0?3:P,k=S.strokeWidth,M=k===void 0?2:k,N=fQ(s)?s:{},V=N.clipDot,z=V===void 0?!0:V,q=O*2+M;return D.createElement(Et,{className:E},C||T?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(b)},D.createElement("rect",{x:C?d:d-p/2,y:T?c:c-m/2,width:C?p:p*2,height:T?m:m*2})),!z&&D.createElement("clipPath",{id:"clipPath-dots-".concat(b)},D.createElement("rect",{x:d-q/2,y:c-q/2,width:p+q,height:m+q}))):null,!w&&this.renderCurve(I,b),this.renderErrorBar(I,b),(w||s)&&this.renderDots(I,z,b),(!g||_)&&Oo.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(ma(r),[0]):r,s=[],a=0;a<i;++a)s=[].concat(ma(s),ma(o));return s}},{key:"renderDotItem",value:function(r,i){var o;if(D.isValidElement(r))o=D.cloneElement(r,i);else if(Te(r))o=r(i);else{var s=i.key,a=Xk(i,Rve),l=Le("recharts-line-dot",typeof r!="boolean"?r.className:"");o=D.createElement(tS,Oc({key:s},a,{className:l}))}return o}}])}(j.PureComponent);Ar(Th,"displayName","Line");Ar(Th,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Oi.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ar(Th,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,u=t.offset,f=e.layout,c=l.map(function(d,p){var m=Jn(d,s);return f==="horizontal"?{x:CO({axis:n,ticks:i,bandSize:a,entry:d,index:p}),y:Oe(m)?null:r.scale(m),value:m,payload:d}:{x:Oe(m)?null:n.scale(m),y:CO({axis:r,ticks:o,bandSize:a,entry:d,index:p}),value:m,payload:d}});return zn({points:c,layout:f},u)});function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function Hve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h4(r.key),r)}}function qve(t,e,n){return e&&eN(t.prototype,e),n&&eN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kve(t,e,n){return e=Km(e),Yve(t,c4()?Reflect.construct(e,n||[],Km(t).constructor):e.apply(t,n))}function Yve(t,e){if(e&&(Ul(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qve(t)}function Qve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c4=function(){return!!t})()}function Km(t){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Km(t)}function Xve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bb(t,e)}function bb(t,e){return bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bb(t,e)}function f4(t,e,n){return e=h4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h4(t){var e=Jve(t,"string");return Ul(e)=="symbol"?e:e+""}function Jve(t,e){if(Ul(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xb(){return xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xb.apply(this,arguments)}function Zve(t){var e=t.xAxisId,n=oS(),r=sS(),i=YF(e);return i==null?null:j.createElement(pu,xb({},i,{className:Le("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Si(s,!0)}}))}var Fy=function(t){function e(){return Hve(this,e),Kve(this,e,arguments)}return Xve(e,t),qve(e,[{key:"render",value:function(){return j.createElement(Zve,this.props)}}])}(j.Component);f4(Fy,"displayName","XAxis");f4(Fy,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}function e0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m4(r.key),r)}}function t0e(t,e,n){return e&&tN(t.prototype,e),n&&tN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n0e(t,e,n){return e=Ym(e),r0e(t,d4()?Reflect.construct(e,n||[],Ym(t).constructor):e.apply(t,n))}function r0e(t,e){if(e&&(Bl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i0e(t)}function i0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d4=function(){return!!t})()}function Ym(t){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ym(t)}function o0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eb(t,e)}function Eb(t,e){return Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Eb(t,e)}function p4(t,e,n){return e=m4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m4(t){var e=s0e(t,"string");return Bl(e)=="symbol"?e:e+""}function s0e(t,e){if(Bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sb.apply(this,arguments)}var a0e=function(e){var n=e.yAxisId,r=oS(),i=sS(),o=QF(n);return o==null?null:j.createElement(pu,Sb({},o,{className:Le("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return Si(a,!0)}}))},Vy=function(t){function e(){return e0e(this,e),n0e(this,e,arguments)}return o0e(e,t),t0e(e,[{key:"render",value:function(){return j.createElement(a0e,this.props)}}])}(j.Component);p4(Vy,"displayName","YAxis");p4(Vy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function nN(t){return f0e(t)||c0e(t)||u0e(t)||l0e()}function l0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u0e(t,e){if(t){if(typeof t=="string")return Tb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tb(t,e)}}function c0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function f0e(t){if(Array.isArray(t))return Tb(t)}function Tb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ab=function(e,n,r,i,o){var s=hr(e,lS),a=hr(e,jy),l=[].concat(nN(s),nN(a)),u=hr(e,$y),f="".concat(i,"Id"),c=i[0],d=n;if(l.length&&(d=l.reduce(function(g,v){if(v.props[f]===r&&Zr(v.props,"extendDomain")&&oe(v.props[c])){var _=v.props[c];return[Math.min(g[0],_),Math.max(g[1],_)]}return g},d)),u.length){var p="".concat(c,"1"),m="".concat(c,"2");d=u.reduce(function(g,v){if(v.props[f]===r&&Zr(v.props,"extendDomain")&&oe(v.props[p])&&oe(v.props[m])){var _=v.props[p],w=v.props[m];return[Math.min(g[0],_,w),Math.max(g[1],_,w)]}return g},d)}return o&&o.length&&(d=o.reduce(function(g,v){return oe(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},d)),d},g4={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function o(l,u,f,c,d){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,c||l,d),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],f,c;if(this._eventsCount===0)return u;for(c in f=this._events)e.call(f,c)&&u.push(n?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},a.prototype.listeners=function(u){var f=n?n+u:u,c=this._events[f];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,p=c.length,m=new Array(p);d<p;d++)m[d]=c[d].fn;return m},a.prototype.listenerCount=function(u){var f=n?n+u:u,c=this._events[f];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,f,c,d,p,m){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],_=arguments.length,w,E;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),_){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,c),!0;case 4:return v.fn.call(v.context,f,c,d),!0;case 5:return v.fn.call(v.context,f,c,d,p),!0;case 6:return v.fn.call(v.context,f,c,d,p,m),!0}for(E=1,w=new Array(_-1);E<_;E++)w[E-1]=arguments[E];v.fn.apply(v.context,w)}else{var C=v.length,T;for(E=0;E<C;E++)switch(v[E].once&&this.removeListener(u,v[E].fn,void 0,!0),_){case 1:v[E].fn.call(v[E].context);break;case 2:v[E].fn.call(v[E].context,f);break;case 3:v[E].fn.call(v[E].context,f,c);break;case 4:v[E].fn.call(v[E].context,f,c,d);break;default:if(!w)for(T=1,w=new Array(_-1);T<_;T++)w[T-1]=arguments[T];v[E].fn.apply(v[E].context,w)}}return!0},a.prototype.on=function(u,f,c){return o(this,u,f,c,!1)},a.prototype.once=function(u,f,c){return o(this,u,f,c,!0)},a.prototype.removeListener=function(u,f,c,d){var p=n?n+u:u;if(!this._events[p])return this;if(!f)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===f&&(!d||m.once)&&(!c||m.context===c)&&s(this,p);else{for(var g=0,v=[],_=m.length;g<_;g++)(m[g].fn!==f||d&&!m[g].once||c&&m[g].context!==c)&&v.push(m[g]);v.length?this._events[p]=v.length===1?v[0]:v:s(this,p)}return this},a.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(g4);var h0e=g4.exports;const d0e=Je(h0e);var x0=new d0e,E0="recharts.syncMouseEvents";function Hf(t){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(t)}function p0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y4(r.key),r)}}function m0e(t,e,n){return e&&rN(t.prototype,e),n&&rN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function S0(t,e,n){return e=y4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y4(t){var e=g0e(t,"string");return Hf(e)=="symbol"?e:e+""}function g0e(t,e){if(Hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y0e=function(){function t(){p0e(this,t),S0(this,"activeIndex",0),S0(this,"coordinateList",[]),S0(this,"layout","horizontal")}return m0e(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,s=n.container,a=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,f=n.offset,c=f===void 0?null:f,d=n.mouseHandlerCallback,p=d===void 0?null:d;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=c??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,c=o+l+u,d=s+this.offset.top+a/2+f;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])}();function v0e(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&oe(r)&&oe(i))return!0}return!1}function _0e(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function v4(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,s=Zt(e,n,r,i),a=Zt(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function w0e(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,f=e.outerRadius,c=e.angle,d=Zt(a,l,u,c),p=Zt(a,l,f,c);r=d.x,i=d.y,o=p.x,s=p.y}else return v4(e);return[{x:r,y:i},{x:o,y:s}]}function qf(t){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(t)}function iN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ad(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iN(Object(n),!0).forEach(function(r){b0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b0e(t,e,n){return e=x0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x0e(t){var e=E0e(t,"string");return qf(e)=="symbol"?e:e+""}function E0e(t,e){if(qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S0e(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,s=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,f=t.tooltipAxisBandSize,c=t.layout,d=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!o||!s||d!=="ScatterChart"&&i!=="axis")return null;var m,g=Xw;if(d==="ScatterChart")m=s,g=Cpe;else if(d==="BarChart")m=_0e(c,s,l,f),g=eS;else if(c==="radial"){var v=v4(s),_=v.cx,w=v.cy,E=v.radius,C=v.startAngle,T=v.endAngle;m={cx:_,cy:w,startAngle:C,endAngle:T,innerRadius:E,outerRadius:E},g=bF}else m={points:w0e(c,s,l)},g=Xw;var I=Ad(Ad(Ad(Ad({stroke:"#ccc",pointerEvents:"none"},l),m),Me(p,!1)),{},{payload:a,payloadIndex:u,className:Le("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,I):j.createElement(g,I)}var T0e=["item"],A0e=["children","className","width","height","style","compact","title","desc"];function zl(t){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(t)}function ja(){return ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ja.apply(this,arguments)}function oN(t,e){return C0e(t)||P0e(t,e)||w4(t,e)||I0e()}function I0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function C0e(t){if(Array.isArray(t))return t}function sN(t,e){if(t==null)return{};var n=O0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function O0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function k0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b4(r.key),r)}}function N0e(t,e,n){return e&&aN(t.prototype,e),n&&aN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function R0e(t,e,n){return e=Qm(e),M0e(t,_4()?Reflect.construct(e,n||[],Qm(t).constructor):e.apply(t,n))}function M0e(t,e){if(e&&(zl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(t)}function D0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_4=function(){return!!t})()}function Qm(t){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qm(t)}function j0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ib(t,e)}function Ib(t,e){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ib(t,e)}function Wl(t){return F0e(t)||$0e(t)||w4(t)||L0e()}function L0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w4(t,e){if(t){if(typeof t=="string")return Pb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pb(t,e)}}function $0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F0e(t){if(Array.isArray(t))return Pb(t)}function Pb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lN(Object(n),!0).forEach(function(r){ye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ye(t,e,n){return e=b4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4(t){var e=V0e(t,"string");return zl(e)=="symbol"?e:e+""}function V0e(t,e){if(zl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U0e={xAxis:["bottom","top"],yAxis:["left","right"]},B0e={width:"100%",height:"100%"},x4={x:0,y:0};function Id(t){return t}var z0e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},W0e=function(e,n,r,i){var o=n.find(function(f){return f&&f.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return H(H(H({},i),Zt(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,u=i.angle;return H(H(H({},i),Zt(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return x4},Uy=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,s=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(Wl(a),Wl(u)):a},[]);return s.length>0?s:e&&e.length&&oe(i)&&oe(o)?e.slice(i,o+1):[]};function E4(t){return t==="number"?[0,"auto"]:void 0}var Cb=function(e,n,r,i){var o=e.graphicalItems,s=e.tooltipAxis,a=Uy(n,e);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(l,u){var f,c=(f=u.props.data)!==null&&f!==void 0?f:n;c&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(c=c.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(s.dataKey&&!s.allowDuplicatedCategory){var p=c===void 0?a:c;d=Jp(p,s.dataKey,i)}else d=c&&c[r]||a[r];return d?[].concat(Wl(l),[vF(u,d)]):l},[])},uN=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},s=z0e(o,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,f=hfe(s,a,u,l);if(f>=0&&u){var c=u[f]&&u[f].value,d=Cb(e,n,f,c),p=W0e(r,a,f,o);return{activeTooltipIndex:f,activeLabel:c,activePayload:d,activeCoordinate:p}}return null},G0e=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,c=e.children,d=e.stackOffset,p=mF(f,o);return r.reduce(function(m,g){var v,_=g.type.defaultProps!==void 0?H(H({},g.type.defaultProps),g.props):g.props,w=_.type,E=_.dataKey,C=_.allowDataOverflow,T=_.allowDuplicatedCategory,I=_.scale,b=_.ticks,S=_.includeHidden,P=_[s];if(m[P])return m;var O=Uy(e.data,{graphicalItems:i.filter(function(U){var X,ue=s in U.props?U.props[s]:(X=U.type.defaultProps)===null||X===void 0?void 0:X[s];return ue===P}),dataStartIndex:l,dataEndIndex:u}),k=O.length,M,N,V;v0e(_.domain,C,w)&&(M=Hw(_.domain,null,C),p&&(w==="number"||I!=="auto")&&(V=Pc(O,E,"category")));var z=E4(w);if(!M||M.length===0){var q,K=(q=_.domain)!==null&&q!==void 0?q:z;if(E){if(M=Pc(O,E,w),w==="category"&&p){var F=tQ(M);T&&F?(N=M,M=Lm(0,k)):T||(M=RO(K,M,g).reduce(function(U,X){return U.indexOf(X)>=0?U:[].concat(Wl(U),[X])},[]))}else if(w==="category")T?M=M.filter(function(U){return U!==""&&!Oe(U)}):M=RO(K,M,g).reduce(function(U,X){return U.indexOf(X)>=0||X===""||Oe(X)?U:[].concat(Wl(U),[X])},[]);else if(w==="number"){var W=yfe(O,i.filter(function(U){var X,ue,de=s in U.props?U.props[s]:(X=U.type.defaultProps)===null||X===void 0?void 0:X[s],me="hide"in U.props?U.props.hide:(ue=U.type.defaultProps)===null||ue===void 0?void 0:ue.hide;return de===P&&(S||!me)}),E,o,f);W&&(M=W)}p&&(w==="number"||I!=="auto")&&(V=Pc(O,E,"category"))}else p?M=Lm(0,k):a&&a[P]&&a[P].hasStack&&w==="number"?M=d==="expand"?[0,1]:yF(a[P].stackGroups,l,u):M=pF(O,i.filter(function(U){var X=s in U.props?U.props[s]:U.type.defaultProps[s],ue="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return X===P&&(S||!ue)}),w,f,!0);if(w==="number")M=Ab(c,M,P,o,b),K&&(M=Hw(K,M,C));else if(w==="category"&&K){var Q=K,re=M.every(function(U){return Q.indexOf(U)>=0});re&&(M=Q)}}return H(H({},m),{},ye({},P,H(H({},_),{},{axisType:o,domain:M,categoricalDomain:V,duplicateDomain:N,originalDomain:(v=_.domain)!==null&&v!==void 0?v:z,isCategorical:p,layout:f})))},{})},H0e=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,c=e.children,d=Uy(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),p=d.length,m=mF(f,o),g=-1;return r.reduce(function(v,_){var w=_.type.defaultProps!==void 0?H(H({},_.type.defaultProps),_.props):_.props,E=w[s],C=E4("number");if(!v[E]){g++;var T;return m?T=Lm(0,p):a&&a[E]&&a[E].hasStack?(T=yF(a[E].stackGroups,l,u),T=Ab(c,T,E,o)):(T=Hw(C,pF(d,r.filter(function(I){var b,S,P=s in I.props?I.props[s]:(b=I.type.defaultProps)===null||b===void 0?void 0:b[s],O="hide"in I.props?I.props.hide:(S=I.type.defaultProps)===null||S===void 0?void 0:S.hide;return P===E&&!O}),"number",f),i.defaultProps.allowDataOverflow),T=Ab(c,T,E,o)),H(H({},v),{},ye({},E,H(H({axisType:o},i.defaultProps),{},{hide:!0,orientation:fr(U0e,"".concat(o,".").concat(g%2),null),domain:T,originalDomain:C,isCategorical:m,layout:f})))}return v},{})},q0e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,s=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.children,c="".concat(i,"Id"),d=hr(f,o),p={};return d&&d.length?p=G0e(e,{axes:d,graphicalItems:s,axisType:i,axisIdKey:c,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(p=H0e(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:c,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),p},K0e=function(e){var n=co(e),r=Si(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:IE(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Pm(n,r)}},cN=function(e){var n=e.children,r=e.defaultShowTooltip,i=Hn(n,Ml),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Y0e=function(e){return!e||!e.length?!1:e.some(function(n){var r=Pi(n&&n.type);return r&&r.indexOf("Bar")>=0})},fN=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Q0e=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,f=r.height,c=r.children,d=r.margin||{},p=Hn(c,Ml),m=Hn(c,Ts),g=Object.keys(l).reduce(function(T,I){var b=l[I],S=b.orientation;return!b.mirror&&!b.hide?H(H({},T),{},ye({},S,T[S]+b.width)):T},{left:d.left||0,right:d.right||0}),v=Object.keys(s).reduce(function(T,I){var b=s[I],S=b.orientation;return!b.mirror&&!b.hide?H(H({},T),{},ye({},S,fr(T,"".concat(S))+b.height)):T},{top:d.top||0,bottom:d.bottom||0}),_=H(H({},v),g),w=_.bottom;p&&(_.bottom+=p.props.height||Ml.defaultProps.height),m&&n&&(_=mfe(_,i,r,n));var E=u-_.left-_.right,C=f-_.top-_.bottom;return H(H({brushBottom:w},_),{},{width:Math.max(E,0),height:Math.max(C,0)})},X0e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},J0e=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,s=e.validateTooltipEventTypes,a=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,f=e.formatAxisMap,c=e.defaultProps,d=function(_,w){var E=w.graphicalItems,C=w.stackGroups,T=w.offset,I=w.updateId,b=w.dataStartIndex,S=w.dataEndIndex,P=_.barSize,O=_.layout,k=_.barGap,M=_.barCategoryGap,N=_.maxBarSize,V=fN(O),z=V.numericAxisName,q=V.cateAxisName,K=Y0e(E),F=[];return E.forEach(function(W,Q){var re=Uy(_.data,{graphicalItems:[W],dataStartIndex:b,dataEndIndex:S}),U=W.type.defaultProps!==void 0?H(H({},W.type.defaultProps),W.props):W.props,X=U.dataKey,ue=U.maxBarSize,de=U["".concat(z,"Id")],me=U["".concat(q,"Id")],xe={},ae=l.reduce(function(Pn,Vr){var mu=w["".concat(Vr.axisType,"Map")],ia=U["".concat(Vr.axisType,"Id")];mu&&mu[ia]||Vr.axisType==="zAxis"||Gs(!1);var oa=mu[ia];return H(H({},Pn),{},ye(ye({},Vr.axisType,oa),"".concat(Vr.axisType,"Ticks"),Si(oa)))},xe),Y=ae[q],te=ae["".concat(q,"Ticks")],le=C&&C[de]&&C[de].hasStack&&Cfe(W,C[de].stackGroups),G=Pi(W.type).indexOf("Bar")>=0,_e=Pm(Y,te),$=[],se=K&&dfe({barSize:P,stackGroups:C,totalSize:X0e(ae,q)});if(G){var Ie,$e,Ht=Oe(ue)?N:ue,vr=(Ie=($e=Pm(Y,te,!0))!==null&&$e!==void 0?$e:Ht)!==null&&Ie!==void 0?Ie:0;$=pfe({barGap:k,barCategoryGap:M,bandSize:vr!==_e?vr:_e,sizeList:se[me],maxBarSize:Ht}),vr!==_e&&($=$.map(function(Pn){return H(H({},Pn),{},{position:H(H({},Pn.position),{},{offset:Pn.position.offset-vr/2})})}))}var si=W&&W.type&&W.type.getComposedData;si&&F.push({props:H(H({},si(H(H({},ae),{},{displayedData:re,props:_,dataKey:X,item:W,bandSize:_e,barPosition:$,offset:T,stackedData:le,layout:O,dataStartIndex:b,dataEndIndex:S}))),{},ye(ye(ye({key:W.key||"item-".concat(Q)},z,ae[z]),q,ae[q]),"animationId",I)),childIndex:pQ(W,_.children),item:W})}),F},p=function(_,w){var E=_.props,C=_.dataStartIndex,T=_.dataEndIndex,I=_.updateId;if(!xP({props:E}))return null;var b=E.children,S=E.layout,P=E.stackOffset,O=E.data,k=E.reverseStackOrder,M=fN(S),N=M.numericAxisName,V=M.cateAxisName,z=hr(b,r),q=Afe(O,z,"".concat(N,"Id"),"".concat(V,"Id"),P,k),K=l.reduce(function(U,X){var ue="".concat(X.axisType,"Map");return H(H({},U),{},ye({},ue,q0e(E,H(H({},X),{},{graphicalItems:z,stackGroups:X.axisType===N&&q,dataStartIndex:C,dataEndIndex:T}))))},{}),F=Q0e(H(H({},K),{},{props:E,graphicalItems:z}),w==null?void 0:w.legendBBox);Object.keys(K).forEach(function(U){K[U]=f(E,K[U],F,U.replace("Map",""),n)});var W=K["".concat(V,"Map")],Q=K0e(W),re=d(E,H(H({},K),{},{dataStartIndex:C,dataEndIndex:T,updateId:I,graphicalItems:z,stackGroups:q,offset:F}));return H(H({formattedGraphicalItems:re,graphicalItems:z,offset:F,stackGroups:q},Q),K)},m=function(v){function _(w){var E,C,T;return k0e(this,_),T=R0e(this,_,[w]),ye(T,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ye(T,"accessibilityManager",new y0e),ye(T,"handleLegendBBoxUpdate",function(I){if(I){var b=T.state,S=b.dataStartIndex,P=b.dataEndIndex,O=b.updateId;T.setState(H({legendBBox:I},p({props:T.props,dataStartIndex:S,dataEndIndex:P,updateId:O},H(H({},T.state),{},{legendBBox:I}))))}}),ye(T,"handleReceiveSyncEvent",function(I,b,S){if(T.props.syncId===I){if(S===T.eventEmitterSymbol&&typeof T.props.syncMethod!="function")return;T.applySyncEvent(b)}}),ye(T,"handleBrushChange",function(I){var b=I.startIndex,S=I.endIndex;if(b!==T.state.dataStartIndex||S!==T.state.dataEndIndex){var P=T.state.updateId;T.setState(function(){return H({dataStartIndex:b,dataEndIndex:S},p({props:T.props,dataStartIndex:b,dataEndIndex:S,updateId:P},T.state))}),T.triggerSyncEvent({dataStartIndex:b,dataEndIndex:S})}}),ye(T,"handleMouseEnter",function(I){var b=T.getMouseInfo(I);if(b){var S=H(H({},b),{},{isTooltipActive:!0});T.setState(S),T.triggerSyncEvent(S);var P=T.props.onMouseEnter;Te(P)&&P(S,I)}}),ye(T,"triggeredAfterMouseMove",function(I){var b=T.getMouseInfo(I),S=b?H(H({},b),{},{isTooltipActive:!0}):{isTooltipActive:!1};T.setState(S),T.triggerSyncEvent(S);var P=T.props.onMouseMove;Te(P)&&P(S,I)}),ye(T,"handleItemMouseEnter",function(I){T.setState(function(){return{isTooltipActive:!0,activeItem:I,activePayload:I.tooltipPayload,activeCoordinate:I.tooltipPosition||{x:I.cx,y:I.cy}}})}),ye(T,"handleItemMouseLeave",function(){T.setState(function(){return{isTooltipActive:!1}})}),ye(T,"handleMouseMove",function(I){I.persist(),T.throttleTriggeredAfterMouseMove(I)}),ye(T,"handleMouseLeave",function(I){T.throttleTriggeredAfterMouseMove.cancel();var b={isTooltipActive:!1};T.setState(b),T.triggerSyncEvent(b);var S=T.props.onMouseLeave;Te(S)&&S(b,I)}),ye(T,"handleOuterEvent",function(I){var b=dQ(I),S=fr(T.props,"".concat(b));if(b&&Te(S)){var P,O;/.*touch.*/i.test(b)?O=T.getMouseInfo(I.changedTouches[0]):O=T.getMouseInfo(I),S((P=O)!==null&&P!==void 0?P:{},I)}}),ye(T,"handleClick",function(I){var b=T.getMouseInfo(I);if(b){var S=H(H({},b),{},{isTooltipActive:!0});T.setState(S),T.triggerSyncEvent(S);var P=T.props.onClick;Te(P)&&P(S,I)}}),ye(T,"handleMouseDown",function(I){var b=T.props.onMouseDown;if(Te(b)){var S=T.getMouseInfo(I);b(S,I)}}),ye(T,"handleMouseUp",function(I){var b=T.props.onMouseUp;if(Te(b)){var S=T.getMouseInfo(I);b(S,I)}}),ye(T,"handleTouchMove",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&T.throttleTriggeredAfterMouseMove(I.changedTouches[0])}),ye(T,"handleTouchStart",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&T.handleMouseDown(I.changedTouches[0])}),ye(T,"handleTouchEnd",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&T.handleMouseUp(I.changedTouches[0])}),ye(T,"handleDoubleClick",function(I){var b=T.props.onDoubleClick;if(Te(b)){var S=T.getMouseInfo(I);b(S,I)}}),ye(T,"handleContextMenu",function(I){var b=T.props.onContextMenu;if(Te(b)){var S=T.getMouseInfo(I);b(S,I)}}),ye(T,"triggerSyncEvent",function(I){T.props.syncId!==void 0&&x0.emit(E0,T.props.syncId,I,T.eventEmitterSymbol)}),ye(T,"applySyncEvent",function(I){var b=T.props,S=b.layout,P=b.syncMethod,O=T.state.updateId,k=I.dataStartIndex,M=I.dataEndIndex;if(I.dataStartIndex!==void 0||I.dataEndIndex!==void 0)T.setState(H({dataStartIndex:k,dataEndIndex:M},p({props:T.props,dataStartIndex:k,dataEndIndex:M,updateId:O},T.state)));else if(I.activeTooltipIndex!==void 0){var N=I.chartX,V=I.chartY,z=I.activeTooltipIndex,q=T.state,K=q.offset,F=q.tooltipTicks;if(!K)return;if(typeof P=="function")z=P(F,I);else if(P==="value"){z=-1;for(var W=0;W<F.length;W++)if(F[W].value===I.activeLabel){z=W;break}}var Q=H(H({},K),{},{x:K.left,y:K.top}),re=Math.min(N,Q.x+Q.width),U=Math.min(V,Q.y+Q.height),X=F[z]&&F[z].value,ue=Cb(T.state,T.props.data,z),de=F[z]?{x:S==="horizontal"?F[z].coordinate:re,y:S==="horizontal"?U:F[z].coordinate}:x4;T.setState(H(H({},I),{},{activeLabel:X,activeCoordinate:de,activePayload:ue,activeTooltipIndex:z}))}else T.setState(I)}),ye(T,"renderCursor",function(I){var b,S=T.state,P=S.isTooltipActive,O=S.activeCoordinate,k=S.activePayload,M=S.offset,N=S.activeTooltipIndex,V=S.tooltipAxisBandSize,z=T.getTooltipEventType(),q=(b=I.props.active)!==null&&b!==void 0?b:P,K=T.props.layout,F=I.key||"_recharts-cursor";return D.createElement(S0e,{key:F,activeCoordinate:O,activePayload:k,activeTooltipIndex:N,chartName:n,element:I,isActive:q,layout:K,offset:M,tooltipAxisBandSize:V,tooltipEventType:z})}),ye(T,"renderPolarAxis",function(I,b,S){var P=fr(I,"type.axisType"),O=fr(T.state,"".concat(P,"Map")),k=I.type.defaultProps,M=k!==void 0?H(H({},k),I.props):I.props,N=O&&O[M["".concat(P,"Id")]];return j.cloneElement(I,H(H({},N),{},{className:Le(P,N.className),key:I.key||"".concat(b,"-").concat(S),ticks:Si(N,!0)}))}),ye(T,"renderPolarGrid",function(I){var b=I.props,S=b.radialLines,P=b.polarAngles,O=b.polarRadius,k=T.state,M=k.radiusAxisMap,N=k.angleAxisMap,V=co(M),z=co(N),q=z.cx,K=z.cy,F=z.innerRadius,W=z.outerRadius;return j.cloneElement(I,{polarAngles:Array.isArray(P)?P:Si(z,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(O)?O:Si(V,!0).map(function(Q){return Q.coordinate}),cx:q,cy:K,innerRadius:F,outerRadius:W,key:I.key||"polar-grid",radialLines:S})}),ye(T,"renderLegend",function(){var I=T.state.formattedGraphicalItems,b=T.props,S=b.children,P=b.width,O=b.height,k=T.props.margin||{},M=P-(k.left||0)-(k.right||0),N=hF({children:S,formattedGraphicalItems:I,legendWidth:M,legendContent:u});if(!N)return null;var V=N.item,z=sN(N,T0e);return j.cloneElement(V,H(H({},z),{},{chartWidth:P,chartHeight:O,margin:k,onBBoxUpdate:T.handleLegendBBoxUpdate}))}),ye(T,"renderTooltip",function(){var I,b=T.props,S=b.children,P=b.accessibilityLayer,O=Hn(S,zr);if(!O)return null;var k=T.state,M=k.isTooltipActive,N=k.activeCoordinate,V=k.activePayload,z=k.activeLabel,q=k.offset,K=(I=O.props.active)!==null&&I!==void 0?I:M;return j.cloneElement(O,{viewBox:H(H({},q),{},{x:q.left,y:q.top}),active:K,label:z,payload:K?V:[],coordinate:N,accessibilityLayer:P})}),ye(T,"renderBrush",function(I){var b=T.props,S=b.margin,P=b.data,O=T.state,k=O.offset,M=O.dataStartIndex,N=O.dataEndIndex,V=O.updateId;return j.cloneElement(I,{key:I.key||"_recharts-brush",onChange:xd(T.handleBrushChange,I.props.onChange),data:P,x:oe(I.props.x)?I.props.x:k.left,y:oe(I.props.y)?I.props.y:k.top+k.height+k.brushBottom-(S.bottom||0),width:oe(I.props.width)?I.props.width:k.width,startIndex:M,endIndex:N,updateId:"brush-".concat(V)})}),ye(T,"renderReferenceElement",function(I,b,S){if(!I)return null;var P=T,O=P.clipPathId,k=T.state,M=k.xAxisMap,N=k.yAxisMap,V=k.offset,z=I.type.defaultProps||{},q=I.props,K=q.xAxisId,F=K===void 0?z.xAxisId:K,W=q.yAxisId,Q=W===void 0?z.yAxisId:W;return j.cloneElement(I,{key:I.key||"".concat(b,"-").concat(S),xAxis:M[F],yAxis:N[Q],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:O})}),ye(T,"renderActivePoints",function(I){var b=I.item,S=I.activePoint,P=I.basePoint,O=I.childIndex,k=I.isRange,M=[],N=b.props.key,V=b.item.type.defaultProps!==void 0?H(H({},b.item.type.defaultProps),b.item.props):b.item.props,z=V.activeDot,q=V.dataKey,K=H(H({index:O,dataKey:q,cx:S.x,cy:S.y,r:4,fill:ZE(b.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},Me(z,!1)),Zp(z));return M.push(_.renderActiveDot(z,K,"".concat(N,"-activePoint-").concat(O))),P?M.push(_.renderActiveDot(z,H(H({},K),{},{cx:P.x,cy:P.y}),"".concat(N,"-basePoint-").concat(O))):k&&M.push(null),M}),ye(T,"renderGraphicChild",function(I,b,S){var P=T.filterFormatItem(I,b,S);if(!P)return null;var O=T.getTooltipEventType(),k=T.state,M=k.isTooltipActive,N=k.tooltipAxis,V=k.activeTooltipIndex,z=k.activeLabel,q=T.props.children,K=Hn(q,zr),F=P.props,W=F.points,Q=F.isRange,re=F.baseLine,U=P.item.type.defaultProps!==void 0?H(H({},P.item.type.defaultProps),P.item.props):P.item.props,X=U.activeDot,ue=U.hide,de=U.activeBar,me=U.activeShape,xe=!!(!ue&&M&&K&&(X||de||me)),ae={};O!=="axis"&&K&&K.props.trigger==="click"?ae={onClick:xd(T.handleItemMouseEnter,I.props.onClick)}:O!=="axis"&&(ae={onMouseLeave:xd(T.handleItemMouseLeave,I.props.onMouseLeave),onMouseEnter:xd(T.handleItemMouseEnter,I.props.onMouseEnter)});var Y=j.cloneElement(I,H(H({},P.props),ae));function te(Vr){return typeof N.dataKey=="function"?N.dataKey(Vr.payload):null}if(xe)if(V>=0){var le,G;if(N.dataKey&&!N.allowDuplicatedCategory){var _e=typeof N.dataKey=="function"?te:"payload.".concat(N.dataKey.toString());le=Jp(W,_e,z),G=Q&&re&&Jp(re,_e,z)}else le=W==null?void 0:W[V],G=Q&&re&&re[V];if(me||de){var $=I.props.activeIndex!==void 0?I.props.activeIndex:V;return[j.cloneElement(I,H(H(H({},P.props),ae),{},{activeIndex:$})),null,null]}if(!Oe(le))return[Y].concat(Wl(T.renderActivePoints({item:P,activePoint:le,basePoint:G,childIndex:V,isRange:Q})))}else{var se,Ie=(se=T.getItemByXY(T.state.activeCoordinate))!==null&&se!==void 0?se:{graphicalItem:Y},$e=Ie.graphicalItem,Ht=$e.item,vr=Ht===void 0?I:Ht,si=$e.childIndex,Pn=H(H(H({},P.props),ae),{},{activeIndex:si});return[j.cloneElement(vr,Pn),null,null]}return Q?[Y,null,null]:[Y,null]}),ye(T,"renderCustomized",function(I,b,S){return j.cloneElement(I,H(H({key:"recharts-customized-".concat(S)},T.props),T.state))}),ye(T,"renderMap",{CartesianGrid:{handler:Id,once:!0},ReferenceArea:{handler:T.renderReferenceElement},ReferenceLine:{handler:Id},ReferenceDot:{handler:T.renderReferenceElement},XAxis:{handler:Id},YAxis:{handler:Id},Brush:{handler:T.renderBrush,once:!0},Bar:{handler:T.renderGraphicChild},Line:{handler:T.renderGraphicChild},Area:{handler:T.renderGraphicChild},Radar:{handler:T.renderGraphicChild},RadialBar:{handler:T.renderGraphicChild},Scatter:{handler:T.renderGraphicChild},Pie:{handler:T.renderGraphicChild},Funnel:{handler:T.renderGraphicChild},Tooltip:{handler:T.renderCursor,once:!0},PolarGrid:{handler:T.renderPolarGrid,once:!0},PolarAngleAxis:{handler:T.renderPolarAxis},PolarRadiusAxis:{handler:T.renderPolarAxis},Customized:{handler:T.renderCustomized}}),T.clipPathId="".concat((E=w.id)!==null&&E!==void 0?E:yh("recharts"),"-clip"),T.throttleTriggeredAfterMouseMove=f$(T.triggeredAfterMouseMove,(C=w.throttleDelay)!==null&&C!==void 0?C:1e3/60),T.state={},T}return j0e(_,v),N0e(_,[{key:"componentDidMount",value:function(){var E,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,C=E.children,T=E.data,I=E.height,b=E.layout,S=Hn(C,zr);if(S){var P=S.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,k=Cb(this.state,T,P,O),M=this.state.tooltipTicks[P].coordinate,N=(this.state.offset.top+I)/2,V=b==="horizontal",z=V?{x:M,y:N}:{y:M,x:N},q=this.state.formattedGraphicalItems.find(function(F){var W=F.item;return W.type.name==="Scatter"});q&&(z=H(H({},z),q.props.points[P].tooltipPosition),k=q.props.points[P].tooltipPayload);var K={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:O,activePayload:k,activeCoordinate:z};this.setState(K),this.renderCursor(S),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var T,I;this.accessibilityManager.setDetails({offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0}})}return null}},{key:"componentDidUpdate",value:function(E){aw([Hn(E.children,zr)],[Hn(this.props.children,zr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=Hn(this.props.children,zr);if(E&&typeof E.props.shared=="boolean"){var C=E.props.shared?"axis":"item";return a.indexOf(C)>=0?C:o}return o}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var C=this.container,T=C.getBoundingClientRect(),I=$se(T),b={chartX:Math.round(E.pageX-I.left),chartY:Math.round(E.pageY-I.top)},S=T.width/C.offsetWidth||1,P=this.inRange(b.chartX,b.chartY,S);if(!P)return null;var O=this.state,k=O.xAxisMap,M=O.yAxisMap,N=this.getTooltipEventType(),V=uN(this.state,this.props.data,this.props.layout,P);if(N!=="axis"&&k&&M){var z=co(k).scale,q=co(M).scale,K=z&&z.invert?z.invert(b.chartX):null,F=q&&q.invert?q.invert(b.chartY):null;return H(H({},b),{},{xValue:K,yValue:F},V)}return V?H(H({},b),V):null}},{key:"inRange",value:function(E,C){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,I=this.props.layout,b=E/T,S=C/T;if(I==="horizontal"||I==="vertical"){var P=this.state.offset,O=b>=P.left&&b<=P.left+P.width&&S>=P.top&&S<=P.top+P.height;return O?{x:b,y:S}:null}var k=this.state,M=k.angleAxisMap,N=k.radiusAxisMap;if(M&&N){var V=co(M);return jO({x:b,y:S},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,C=this.getTooltipEventType(),T=Hn(E,zr),I={};T&&C==="axis"&&(T.props.trigger==="click"?I={onClick:this.handleClick}:I={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var b=Zp(this.props,this.handleOuterEvent);return H(H({},b),I)}},{key:"addListener",value:function(){x0.on(E0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){x0.removeListener(E0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,C,T){for(var I=this.state.formattedGraphicalItems,b=0,S=I.length;b<S;b++){var P=I[b];if(P.item===E||P.props.key===E.key||C===Pi(P.item.type)&&T===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,C=this.state.offset,T=C.left,I=C.top,b=C.height,S=C.width;return D.createElement("defs",null,D.createElement("clipPath",{id:E},D.createElement("rect",{x:T,y:I,height:b,width:S})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(C,T){var I=oN(T,2),b=I[0],S=I[1];return H(H({},C),{},ye({},b,S.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(C,T){var I=oN(T,2),b=I[0],S=I[1];return H(H({},C),{},ye({},b,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[E])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(E){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[E])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(E){var C=this.state,T=C.formattedGraphicalItems,I=C.activeItem;if(T&&T.length)for(var b=0,S=T.length;b<S;b++){var P=T[b],O=P.props,k=P.item,M=k.type.defaultProps!==void 0?H(H({},k.type.defaultProps),k.props):k.props,N=Pi(k.type);if(N==="Bar"){var V=(O.data||[]).find(function(F){return _pe(E,F)});if(V)return{graphicalItem:P,payload:V}}else if(N==="RadialBar"){var z=(O.data||[]).find(function(F){return jO(E,F)});if(z)return{graphicalItem:P,payload:z}}else if(Ny(P,I)||Ry(P,I)||Uf(P,I)){var q=xme({graphicalItem:P,activeTooltipItem:I,itemData:M.data}),K=M.activeIndex===void 0?q:M.activeIndex;return{graphicalItem:H(H({},P),{},{childIndex:K}),payload:Uf(P,I)?M.data[q]:P.props.data[q]}}}return null}},{key:"render",value:function(){var E=this;if(!xP(this))return null;var C=this.props,T=C.children,I=C.className,b=C.width,S=C.height,P=C.style,O=C.compact,k=C.title,M=C.desc,N=sN(C,A0e),V=Me(N,!1);if(O)return D.createElement(Dk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(uw,ja({},V,{width:b,height:S,title:k,desc:M}),this.renderClipPath(),SP(T,this.renderMap)));if(this.props.accessibilityLayer){var z,q;V.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,V.role=(q=this.props.role)!==null&&q!==void 0?q:"application",V.onKeyDown=function(F){E.accessibilityManager.keyboardEvent(F)},V.onFocus=function(){E.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return D.createElement(Dk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",ja({className:Le("recharts-wrapper",I),style:H({position:"relative",cursor:"default",width:b,height:S},P)},K,{ref:function(W){E.container=W}}),D.createElement(uw,ja({},V,{width:b,height:S,title:k,desc:M,style:B0e}),this.renderClipPath(),SP(T,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);ye(m,"displayName",n),ye(m,"defaultProps",H({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},c)),ye(m,"getDerivedStateFromProps",function(v,_){var w=v.dataKey,E=v.data,C=v.children,T=v.width,I=v.height,b=v.layout,S=v.stackOffset,P=v.margin,O=_.dataStartIndex,k=_.dataEndIndex;if(_.updateId===void 0){var M=cN(v);return H(H(H({},M),{},{updateId:0},p(H(H({props:v},M),{},{updateId:0}),_)),{},{prevDataKey:w,prevData:E,prevWidth:T,prevHeight:I,prevLayout:b,prevStackOffset:S,prevMargin:P,prevChildren:C})}if(w!==_.prevDataKey||E!==_.prevData||T!==_.prevWidth||I!==_.prevHeight||b!==_.prevLayout||S!==_.prevStackOffset||!Xa(P,_.prevMargin)){var N=cN(v),V={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},z=H(H({},uN(_,E,b)),{},{updateId:_.updateId+1}),q=H(H(H({},N),V),z);return H(H(H({},q),p(H({props:v},q),_)),{},{prevDataKey:w,prevData:E,prevWidth:T,prevHeight:I,prevLayout:b,prevStackOffset:S,prevMargin:P,prevChildren:C})}if(!aw(C,_.prevChildren)){var K,F,W,Q,re=Hn(C,Ml),U=re&&(K=(F=re.props)===null||F===void 0?void 0:F.startIndex)!==null&&K!==void 0?K:O,X=re&&(W=(Q=re.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&W!==void 0?W:k,ue=U!==O||X!==k,de=!Oe(E),me=de&&!ue?_.updateId:_.updateId+1;return H(H({updateId:me},p(H(H({props:v},_),{},{updateId:me,dataStartIndex:U,dataEndIndex:X}),_)),{},{prevChildren:C,dataStartIndex:U,dataEndIndex:X})}return null}),ye(m,"renderActiveDot",function(v,_,w){var E;return j.isValidElement(v)?E=j.cloneElement(v,_):Te(v)?E=v(_):E=D.createElement(tS,_),D.createElement(Et,{className:"recharts-active-dot",key:w},E)});var g=j.forwardRef(function(_,w){return D.createElement(m,ja({},_,{ref:w}))});return g.displayName=m.displayName,g},Z0e=J0e({chartName:"LineChart",GraphicalChild:Th,axisComponents:[{axisType:"xAxis",AxisComp:Fy},{axisType:"yAxis",AxisComp:Vy}],formatAxisMap:qge});const e_e=({className:t=""})=>x.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})}),t_e=({className:t=""})=>x.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[x.jsx("circle",{cx:"12",cy:"12",r:"3"}),x.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),n_e=({className:t=""})=>x.jsxs("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[x.jsx("circle",{cx:"12",cy:"8",r:"4"}),x.jsx("path",{d:"M4 20c0-4 4-7 8-7s8 3 8 7"})]}),Xm=({className:t=""})=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"orange",stroke:"black",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[x.jsx("circle",{cx:"12",cy:"12",r:"10"}),x.jsx("path",{d:"M4.93 4.93l14.14 14.14M19.07 4.93L4.93 19.07M12 2a10 10 0 000 20V2zM2 12h20"})]}),r_e=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[x.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),x.jsx("polyline",{points:"16 6 12 2 8 6"}),x.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),i_e=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[x.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),x.jsx("polyline",{points:"16 17 21 12 16 7"}),x.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),o_e=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[x.jsx("circle",{cx:"12",cy:"12",r:"5"}),x.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),x.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),x.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),x.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),x.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),x.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),x.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),x.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),s_e=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:x.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),a_e=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[x.jsx("path",{d:"M3 3v18h18"}),x.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]}),l_e=({className:t=""})=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`h-5 w-5 transition-transform ${t}`,children:x.jsx("polyline",{points:"9 18 15 12 9 6"})}),Jm=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[x.jsx("polyline",{points:"3 6 5 6 21 6"}),x.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),x.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),x.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),u_e=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6",children:[x.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});function c_e({graphData:t,onClose:e}){if(!t)return null;const{statName:n,data:r}=t;return x.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 w-full max-w-3xl border border-gray-200 dark:border-gray-700",onClick:i=>i.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsxs("h2",{className:"text-2xl font-bold text-orange-500",children:[n," Over Time"]}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:x.jsx(u_e,{})})]}),x.jsx("div",{style:{width:"100%",height:300},children:x.jsx(kse,{children:x.jsxs(Z0e,{data:r,margin:{top:5,right:20,left:0,bottom:25},children:[x.jsx(a4,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),x.jsx(Fy,{dataKey:"date",stroke:"#6b7280",tick:{fontSize:12},interval:"preserveEnd"}),x.jsx(Vy,{stroke:"#6b7280"}),x.jsx(zr,{content:({active:i,payload:o,label:s})=>{if(!i||!(o!=null&&o.length))return null;const a=o[0].payload;return x.jsxs("div",{className:"rounded bg-gray-900 text-gray-100 px-4 py-2 text-xs border border-gray-800",children:[x.jsxs("div",{children:[x.jsx("strong",{children:"Date:"})," ",a.date]}),a.team&&a.opponent&&x.jsxs("div",{children:[x.jsx("strong",{children:"Teams:"})," ",a.team," vs ",a.opponent]}),x.jsxs("div",{children:[x.jsxs("strong",{children:[n,":"]})," ",a.value]})]})}}),x.jsx(Ts,{wrapperStyle:{color:"#e2e8f0"}}),x.jsx(Th,{type:"monotone",dataKey:"value",name:n,stroke:"#f97316",strokeWidth:2,dot:{r:4,fill:"#f97316"},activeDot:{r:8,fill:"#f97316"}})]})})})]})})}const f_e={DOUBLE_DIGITS:{id:"double_digits",name:"Double Digits",emoji:"🏀",description:"10+ points in a game",check:t=>(t.points||0)>=10},BIG_GAME:{id:"big_game",name:"Big Game",emoji:"🔥",description:"20+ points in a game",check:t=>(t.points||0)>=20},PERFECT_SHOOTER:{id:"perfect_shooter",name:"Perfect Shooter",emoji:"💯",description:"100% shooting (3+ attempts)",check:t=>{const e=(t.fg2m||0)+(t.fg3m||0),n=(t.fg2a||0)+(t.fg3a||0);return n>=3&&e===n}},PERFECT_FREE_THROWS:{id:"perfect_free_throws",name:"Perfect Free Throws",emoji:"🎯",description:"100% free throws (3+ attempts)",check:t=>{const e=t.ftm||0,n=t.fta||0;return n>=3&&e===n}},SHARPSHOOTER:{id:"sharpshooter",name:"Sharpshooter",emoji:"🎯",description:"3+ three-pointers made",check:t=>(t.fg3m||0)>=3},PLAYMAKER:{id:"playmaker",name:"Playmaker",emoji:"🤝",description:"5+ assists in a game",check:t=>(t.assists||0)>=5},DEFENDER:{id:"defender",name:"Defender",emoji:"🛡️",description:"3+ steals or blocks",check:t=>(t.steals||0)+(t.blocks||0)>=3},HUSTLE:{id:"hustle",name:"Hustle",emoji:"💪",description:"10+ rebounds in a game",check:t=>(t.rebounds||0)>=10},TRIPLE_DOUBLE:{id:"triple_double",name:"Triple Double",emoji:"⭐",description:"10+ in three stat categories",check:t=>[t.points||0,t.rebounds||0,t.assists||0,t.steals||0,t.blocks||0].filter(n=>n>=10).length>=3},NO_TURNOVERS:{id:"no_turnovers",name:"Clean Game",emoji:"✨",description:"Zero turnovers",check:t=>(t.turnovers||0)===0},ASSIST_MACHINE:{id:"assist_machine",name:"Assist Machine",emoji:"🎪",description:"8+ assists in a game",check:t=>(t.assists||0)>=8}},h_e=t=>{const e=[];return Object.values(f_e).forEach(n=>{n.check(t)&&e.push(n)}),e},d_e=({badge:t,size:e="sm"})=>{const n={xs:"text-xs px-1 py-0.5",sm:"text-sm px-2 py-1",md:"text-base px-3 py-1.5",lg:"text-lg px-4 py-2"};return x.jsxs("span",{className:`inline-flex items-center gap-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full font-medium ${n[e]}`,title:t.description,children:[x.jsx("span",{children:t.emoji}),x.jsx("span",{className:"hidden sm:inline",children:t.name})]})},p_e=({badges:t})=>t.length===0?null:x.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[x.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"🏆"}),x.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300 font-medium",children:[t.length," achievement",t.length!==1?"s":""]}),x.jsxs("div",{className:"flex gap-0.5",children:[t.slice(0,3).map((e,n)=>x.jsx("span",{className:"text-sm",title:e.name,children:e.emoji},e.id)),t.length>3&&x.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.length-3]})]})]}),m_e=({badges:t})=>t.length===0?x.jsx("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-800 rounded text-center text-gray-500 dark:text-gray-400 text-sm",children:"No achievements this game"}):x.jsxs("div",{className:"mt-3",children:[x.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"🏆 Achievements"}),x.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(e=>x.jsx(d_e,{badge:e,size:"sm"},e.id))})]}),g_e=({className:t=""})=>x.jsxs("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),y_e=({className:t=""})=>x.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.102m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),v_e=({gameId:t,photos:e=[],onPhotosUpdate:n})=>{const[r,i]=j.useState(!1),[o,s]=j.useState(""),[a,l]=j.useState(""),u=()=>{if(!o.trim())return;try{new URL(o.trim())}catch{alert("Please enter a valid URL");return}const c=o.includes("icloud.com"),d={id:Date.now()+Math.random(),url:o.trim(),description:a.trim()||"Game photo",timestamp:new Date().toISOString(),isICloudLink:c};if(!(c&&!window.confirm(`⚠️ iCloud links only work for people signed into your iCloud account.

For family sharing, consider:
• Google Photos (shareable links)
• iCloud Shared Albums
• Dropbox/OneDrive public links

Continue with iCloud link anyway?`)))try{const p=[...e,d];n(t,p),s(""),l(""),i(!1)}catch(p){console.error("Error adding photo:",p),alert("Error adding photo. Please try again.")}},f=c=>{const d=e.filter(p=>p.id!==c);n(t,d)};return x.jsxs("div",{className:"mt-3",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"📸 Game Photos"}),x.jsxs("button",{onClick:()=>i(!r),className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded",children:[x.jsx(y_e,{className:"w-3 h-3"}),"Add Photo"]})]}),r&&x.jsxs("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg space-y-2",children:[x.jsx("input",{type:"url",placeholder:"Paste photo URL (Google Photos, iCloud, etc.)",value:o,onChange:c=>s(c.target.value),className:"w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),x.jsx("input",{type:"text",placeholder:"Photo description (optional)",value:a,onChange:c=>l(c.target.value),className:"w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:u,disabled:!o.trim(),className:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded",children:"Add"}),x.jsx("button",{onClick:()=>{i(!1),s(""),l("")},className:"px-3 py-1 text-xs bg-gray-500 hover:bg-gray-600 text-white rounded",children:"Cancel"})]}),x.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["💡 ",x.jsx("strong",{children:"Best for family sharing:"})," Google Photos, iCloud Shared Albums, Dropbox",x.jsx("br",{}),"📱 ",x.jsx("strong",{children:"iCloud links:"})," Only work for people signed into your iCloud account"]})]}),e.length>0&&x.jsx("div",{className:"space-y-2",children:e.map(c=>x.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[x.jsx("img",{src:c.url,alt:c.description,className:"w-12 h-12 object-cover rounded cursor-pointer",onClick:()=>window.open(c.url,"_blank"),onError:d=>{d.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yNCAzNkMzMC42Mjc0IDM2IDM2IDMwLjYyNzQgMzYgMjRDMzYgMTcuMzcyNiAzMC42Mjc0IDEyIDI0IDEyQzE3LjM3MjYgMTIgMTIgMTcuMzcyNiAxMiAyNEMxMiAzMC42Mjc0IDE3LjM3MjYgMzYgMjQgMzYiIGZpbGw9IiNEMUQ1REIiLz4KPC9zdmc+"}}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[c.description,c.isICloudLink&&x.jsx("span",{className:"ml-1 text-xs text-blue-500",title:"iCloud link - only visible to account owner",children:"☁️"})]}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(c.timestamp).toLocaleDateString()})]}),x.jsx("button",{onClick:()=>f(c.id),className:"p-1 text-red-400 hover:text-red-600 rounded",children:"×"})]},c.id))}),e.length===0&&!r&&x.jsx("div",{className:"text-center py-2 text-gray-500 dark:text-gray-400 text-xs",children:"No photos yet. Add some game memories!"})]})},__e=({photos:t=[]})=>t.length===0?null:x.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[x.jsx(g_e,{className:"w-3 h-3 text-gray-500"}),x.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:[t.length," photo",t.length!==1?"s":""]}),x.jsxs("div",{className:"flex gap-0.5",children:[t.slice(0,2).map(e=>x.jsx("img",{src:e.url,alt:e.description,className:"w-4 h-4 object-cover rounded cursor-pointer",onClick:n=>{n.stopPropagation(),window.open(e.url,"_blank")},onError:n=>{n.target.style.display="none"}},e.id)),t.length>2&&x.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.length-2]})]})]}),w_e=v_e,b_e=({className:t=""})=>x.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),x_e=({isExpanded:t,className:e=""})=>x.jsx("div",{className:`w-12 h-1 bg-gray-400 rounded-full transition-all duration-200 ${t?"bg-orange-500":""} ${e}`}),at=({label:t,value:e,onClick:n,clickable:r})=>x.jsxs("div",{className:`bg-gray-100 dark:bg-gray-700 flex flex-col rounded-lg p-2 items-center min-w-[70px] transition cursor-pointer ${r?"hover:shadow-lg hover:bg-orange-50 dark:hover:bg-orange-900":""}`,onClick:r?n:void 0,children:[x.jsx("span",{className:"text-xs text-orange-500 mb-1",children:t}),x.jsx("span",{className:"text-2xl font-bold text-black dark:text-white",children:e})]});function E_e(t){const e=new Date("2016-11-01"),n={};return t.forEach(r=>{if(!r.timestamp)return;const i=new Date(r.timestamp);let o=i.getFullYear()-e.getFullYear();(i.getMonth()<10||i.getMonth()===10&&i.getDate()<1)&&(o-=1),!(o<8)&&(n[o]||(n[o]={value:0,date:`Age ${o}`,team:r.teamName,opponent:r.opponent}),n[o].value+=1)}),Object.entries(n).map(([r,i])=>({...i,date:i.date})).sort((r,i)=>Number(r.date.split(" ")[1])-Number(i.date.split(" ")[1]))}function S_e({stats:t=[],onDeleteGame:e,onUpdateGamePhotos:n,externalFilters:r={}}){j.useState("");const[i,o]=j.useState(null),[s,a]=j.useState(r.searchTerm||""),[l,u]=j.useState(r.dateFilter||""),[f,c]=j.useState(r.outcomeFilter||""),[d,p]=j.useState([]),[m,g]=j.useState(!0),[v,_]=j.useState(1),[w,E]=j.useState(null),[C,T]=j.useState(null);j.useState(!1);const[I,b]=j.useState([]),[S,P]=j.useState(!1),[O,k]=j.useState(!1),M=4;j.useEffect(()=>{a(r.searchTerm||""),u(r.dateFilter||""),c(r.outcomeFilter||""),_(1)},[r]);const N=j.useMemo(()=>{const $=new Set;return(t||[]).forEach(se=>{se.opponent&&$.add(se.opponent.trim())}),Array.from($)},[t]);j.useMemo(()=>s?N.filter($=>$.toLowerCase().includes(s.toLowerCase())).slice(0,7):[],[N,s]);const V=(t||[]).reduce(($,se)=>($.points=($.points||0)+(parseInt(se.points,10)||0),$.fg2m=($.fg2m||0)+(parseInt(se.fg2m,10)||0),$.fg2a=($.fg2a||0)+(parseInt(se.fg2a,10)||0),$.fg3m=($.fg3m||0)+(parseInt(se.fg3m,10)||0),$.fg3a=($.fg3a||0)+(parseInt(se.fg3a,10)||0),$.ftm=($.ftm||0)+(parseInt(se.ftm,10)||0),$.fta=($.fta||0)+(parseInt(se.fta,10)||0),$.rebounds=($.rebounds||0)+(parseInt(se.rebounds,10)||0),$.assists=($.assists||0)+(parseInt(se.assists,10)||0),$.steals=($.steals||0)+(parseInt(se.steals,10)||0),$.blocks=($.blocks||0)+(parseInt(se.blocks,10)||0),$.fouls=($.fouls||0)+(parseInt(se.fouls,10)||0),$.turnovers=($.turnovers||0)+(parseInt(se.turnovers,10)||0),$.gamesPlayed=($.gamesPlayed||0)+1,$),{}),z=(V.fg2m||0)+(V.fg3m||0),q=(V.fg2a||0)+(V.fg3a||0),K=($,se)=>!se||se===0?"0%":`${Math.round($/se*100)}%`,F=($,se)=>!se||se===0?$>0?`${$.toFixed(1)}`:"0.0":($/se).toFixed(2),W=j.useMemo(()=>{let $=[...t||[]];return s&&($=$.filter(se=>(se.opponent||"").toLowerCase().includes(s.toLowerCase()))),l&&($=$.filter(se=>se.date===l)),f&&($=$.filter(se=>se.outcome===f)),$.sort((se,Ie)=>se.timestamp<Ie.timestamp?1:se.timestamp>Ie.timestamp?-1:0),$},[t,s,l,f]),Q=j.useMemo(()=>{const $=(v-1)*M;return W.slice($,$+M)},[W,v]),re=Math.ceil(W.length/M),U=($,se)=>{if($==="gamesPlayed")o({statKey:$,statName:"Games Played per Age",data:E_e(t||[])});else{const Ie=[...t||[]].sort(($e,Ht)=>($e.timestamp||0)-(Ht.timestamp||0)).map($e=>({value:$==="assistTurnoverRatio"?$e.turnovers?($e.assists/$e.turnovers).toFixed(2):"0.00":$e[$]||0,date:new Date($e.date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit"}),team:$e.teamName,opponent:$e.opponent}));o({statKey:$,statName:se,data:Ie})}},X=()=>{P(!S),b([])},ue=$=>{b(se=>se.includes($)?se.filter(Ie=>Ie!==$):[...se,$])},de=()=>{const $=Q.map(se=>se.id);b($)},me=()=>{b([])},xe=()=>{k(!0)},ae=()=>{I.forEach($=>{e($)}),b([]),P(!1),k(!1)},Y=$=>E($),te=()=>{C&&(onDeleteTeam(C),T(null))},le=$=>{S||p(se=>se.includes($)?se.filter(Ie=>Ie!==$):[...se,$])},G=$=>$==null||$===""?0:$,_e=$=>{if(!$)return"No date";const se=new Date($);return se.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})+" "+se.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})};return x.jsxs(x.Fragment,{children:[i&&x.jsx(c_e,{graphData:i,onClose:()=>o(null)}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsx("div",{className:"lg:col-span-1 space-y-6",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-xl font-bold mb-4 text-orange-500",children:"Career Totals"}),x.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[x.jsx(at,{label:"Games Played",value:V.gamesPlayed||0}),x.jsx(at,{label:"Points",value:V.points||0,clickable:!0,onClick:()=>U("points","Points")}),x.jsx(at,{label:"Rebounds",value:V.rebounds||0,clickable:!0,onClick:()=>U("rebounds","Rebounds")}),x.jsx(at,{label:"Assists",value:V.assists||0,clickable:!0,onClick:()=>U("assists","Assists")}),x.jsx(at,{label:"Steals",value:V.steals||0,clickable:!0,onClick:()=>U("steals","Steals")}),x.jsx(at,{label:"Blocks",value:V.blocks||0,clickable:!0,onClick:()=>U("blocks","Blocks")}),x.jsx(at,{label:"Fouls",value:V.fouls||0,clickable:!0,onClick:()=>U("fouls","Fouls")}),x.jsx(at,{label:"Turnovers",value:V.turnovers||0,clickable:!0,onClick:()=>U("turnovers","Turnovers")}),x.jsx(at,{label:"A/T Ratio",value:F(V.assists,V.turnovers)})]}),x.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-4"}),x.jsx("h4",{className:"text-lg font-bold mb-3 text-orange-500",children:"Shooting"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[x.jsx(at,{label:"FG%",value:K(z,q)}),x.jsx(at,{label:"FT%",value:K(V.ftm,V.fta)}),x.jsx(at,{label:"2-Point %",value:K(V.fg2m,V.fg2a)}),x.jsx(at,{label:"3-Point %",value:K(V.fg3m,V.fg3a)})]})]})}),x.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[x.jsxs("div",{className:"flex flex-col items-center mb-4 cursor-pointer p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>g(!m),children:[x.jsx(x_e,{isExpanded:m}),x.jsx("h2",{className:"text-2xl font-bold text-orange-500 mt-2",children:"Game History"})]}),m&&x.jsxs(x.Fragment,{children:[(r.searchTerm||r.dateFilter||r.outcomeFilter)&&x.jsxs("div",{className:"mb-4 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[x.jsx("div",{className:"text-sm font-medium text-orange-800 dark:text-orange-200 mb-1",children:"Active Filters:"}),x.jsxs("div",{className:"text-xs text-orange-700 dark:text-orange-300",children:[r.searchTerm&&x.jsxs("span",{className:"block",children:["• Opponent: ",r.searchTerm]}),r.dateFilter&&x.jsxs("span",{className:"block",children:["• Date: ",new Date(r.dateFilter).toLocaleDateString()]}),r.outcomeFilter&&x.jsxs("span",{className:"block",children:["• Result: ",r.outcomeFilter==="W"?"Wins":r.outcomeFilter==="L"?"Losses":"Ties"]})]}),x.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Use the filter button in the header to modify filters"})]}),x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:X,className:`px-3 py-1 rounded text-sm font-medium transition-colors ${S?"bg-orange-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:S?"Cancel":"Select"}),S&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:de,className:"px-2 py-1 rounded text-xs bg-blue-500 text-white hover:bg-blue-600",children:"Select All"}),x.jsx("button",{onClick:me,className:"px-2 py-1 rounded text-xs bg-gray-500 text-white hover:bg-gray-600",children:"Clear"})]})]}),S&&I.length>0&&x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[I.length," selected"]}),x.jsxs("button",{onClick:xe,className:"px-3 py-1 rounded text-sm bg-red-500 text-white hover:bg-red-600 flex items-center gap-1",children:[x.jsx(Jm,{}),"Delete Selected"]})]})]}),x.jsx("div",{className:"space-y-2 max-h-[55vh] overflow-y-auto pr-2",children:Q.length>0?Q.map($=>{const se=d.includes($.id),Ie=I.includes($.id),$e=h_e($);return x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[x.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer",onClick:()=>S?ue($.id):le($.id),children:[x.jsxs("div",{className:"flex items-center gap-2",children:[S&&x.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center mr-2 transition-colors ${Ie?"bg-orange-500 border-orange-500":"border-gray-300 dark:border-gray-600 hover:border-orange-400"}`,onClick:Ht=>{Ht.stopPropagation(),ue($.id)},children:Ie&&x.jsx(b_e,{className:"w-3 h-3 text-white"})}),!S&&x.jsx(l_e,{className:`transition-transform duration-200 text-black dark:text-white ${se?"rotate-90":""}`,style:{minWidth:20}}),x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-white",children:_e($.timestamp)}),x.jsxs("p",{className:"font-bold text-lg text-orange-500",children:[$.teamName," vs ",$.opponent]}),$.location&&x.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:["📍 ",$.location]}),x.jsx("p",{className:"italic text-xs mt-1 text-gray-700 dark:text-gray-200",children:$.adminName?`Scored by ${$.adminName}`:""}),x.jsx(p_e,{badges:$e}),x.jsx(__e,{photos:$.photos})]})]}),x.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[x.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${$.outcome==="W"?"bg-green-100 text-green-800":$.outcome==="L"?"bg-red-100 text-red-800":"bg-gray-200 text-gray-800"}`,children:[$.outcome||"T"," ",G($.myTeamScore),"-",G($.opponentScore)]}),!S&&x.jsx("button",{className:"p-1 text-red-300 hover:text-red-500 rounded transition",onClick:Ht=>{Ht.stopPropagation(),Y($.id)},title:"Delete Game",children:x.jsx(Jm,{})})]})]}),se&&!S&&x.jsxs("div",{className:"p-4 pt-2 relative",children:[x.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2",children:[x.jsx(at,{label:"Points",value:G($.points)}),x.jsx(at,{label:"2-Point Made/Att",value:`${G($.fg2m)}/${G($.fg2a)}`}),x.jsx(at,{label:"3-Point Made/Att",value:`${G($.fg3m)}/${G($.fg3a)}`}),x.jsx(at,{label:"FT Made/Att",value:`${G($.ftm)}/${G($.fta)}`}),x.jsx(at,{label:"Rebounds",value:G($.rebounds)}),x.jsx(at,{label:"Assists",value:G($.assists)}),x.jsx(at,{label:"Steals",value:G($.steals)}),x.jsx(at,{label:"Blocks",value:G($.blocks)}),x.jsx(at,{label:"Fouls",value:G($.fouls)}),x.jsx(at,{label:"Turnovers",value:G($.turnovers)}),x.jsx(at,{label:"A/T Ratio",value:F(G($.assists),G($.turnovers))})]}),x.jsx(m_e,{badges:$e}),x.jsx(w_e,{gameId:$.id,photos:$.photos||[],onPhotosUpdate:n||(()=>console.error("onUpdateGamePhotos not provided"))})]})]},$.id)}):x.jsx("div",{className:"text-center py-10 text-gray-400",children:"No games found."})}),re>1&&x.jsxs("div",{className:"flex justify-center items-center mt-4 gap-3",children:[x.jsx("button",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50",onClick:()=>_($=>Math.max(1,$-1)),disabled:v===1,children:"Prev"}),x.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Page ",v," of ",re]}),x.jsx("button",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50",onClick:()=>_($=>Math.min(re,$+1)),disabled:v===re,children:"Next"})]})]})]})]}),O&&x.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg max-w-sm mx-auto",children:[x.jsxs("h3",{className:"text-lg font-bold mb-4 text-red-500",children:["Delete ",I.length," Games?"]}),x.jsxs("p",{className:"mb-6",children:["Are you sure you want to delete ",I.length," selected game",I.length!==1?"s":"","? This cannot be undone."]}),x.jsxs("div",{className:"flex gap-4 justify-end",children:[x.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700",onClick:()=>k(!1),children:"Cancel"}),x.jsxs("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-bold",onClick:ae,children:["Delete ",I.length," Game",I.length!==1?"s":""]})]})]})}),w&&x.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg max-w-sm mx-auto",children:[x.jsx("h3",{className:"text-lg font-bold mb-4 text-red-500",children:"Delete Game?"}),x.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this game? This cannot be undone."}),x.jsxs("div",{className:"flex gap-4 justify-end",children:[x.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700",onClick:()=>E(null),children:"Cancel"}),x.jsx("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-bold",onClick:()=>{w&&(e(w),E(null))},children:"Delete"})]})]})}),C&&x.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg max-w-sm mx-auto",children:[x.jsx("h3",{className:"text-lg font-bold mb-4 text-red-500",children:"Delete Team?"}),x.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this team?"}),x.jsx("div",{className:"flex gap-4 justify-end",children:x.jsx("button",{className:"px-4 py-2 rounded bg-red-500 text-white font-bold",onClick:te,children:"Delete"})})]})})]})}const T_e=({className:t=""})=>x.jsx("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});function A_e({games:t=[],filters:e,onFiltersChange:n,onClose:r,className:i=""}){const o=j.useRef(null);j.useEffect(()=>{const c=d=>{o.current&&!o.current.contains(d.target)&&r&&r()};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[r]);const s=[...new Set(t.map(c=>c.opponent).filter(Boolean))].sort(),a=[...new Set(t.map(c=>c.date).filter(Boolean))].sort().reverse(),l=e.searchTerm||e.dateFilter||e.outcomeFilter,u=()=>{n({searchTerm:"",dateFilter:"",outcomeFilter:""}),r&&r()},f=c=>{n(c),r&&r()};return x.jsx("div",{ref:o,className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Filter Games"}),l&&x.jsxs("button",{onClick:u,className:"flex items-center gap-1 text-xs text-orange-500 hover:text-orange-600",children:[x.jsx(T_e,{className:"w-3 h-3"}),"Clear"]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Opponent"}),x.jsxs("select",{value:e.searchTerm||"",onChange:c=>f({...e,searchTerm:c.target.value}),className:"w-full bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded p-2 text-sm focus:ring-orange-500 focus:ring-1 outline-none",children:[x.jsx("option",{value:"",children:"All opponents"}),s.map((c,d)=>x.jsx("option",{value:c,children:c},d))]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Game Date"}),x.jsxs("select",{value:e.dateFilter||"",onChange:c=>f({...e,dateFilter:c.target.value}),className:"w-full bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded p-2 text-sm focus:ring-orange-500 focus:ring-1 outline-none",children:[x.jsx("option",{value:"",children:"All dates"}),a.map((c,d)=>x.jsx("option",{value:c,children:new Date(c).toLocaleDateString()},d))]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Result"}),x.jsxs("select",{value:e.outcomeFilter||"",onChange:c=>f({...e,outcomeFilter:c.target.value}),className:"w-full bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded p-2 text-sm focus:ring-orange-500 focus:ring-1 outline-none",children:[x.jsx("option",{value:"",children:"All games"}),x.jsx("option",{value:"W",children:"Wins"}),x.jsx("option",{value:"L",children:"Losses"}),x.jsx("option",{value:"T",children:"Ties"})]})]}),l&&x.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 pt-2 border-t border-gray-200 dark:border-gray-700",children:[x.jsx("span",{className:"font-medium",children:"Active filters:"}),e.searchTerm&&x.jsxs("span",{className:"block",children:["• Opponent: ",e.searchTerm]}),e.dateFilter&&x.jsxs("span",{className:"block",children:["• Date: ",new Date(e.dateFilter).toLocaleDateString()]}),e.outcomeFilter&&x.jsxs("span",{className:"block",children:["• Result: ",e.outcomeFilter==="W"?"Wins":e.outcomeFilter==="L"?"Losses":"Ties"]})]})]})})}const I_e=({active:t})=>x.jsx("span",{className:`inline-block rounded-full transition
      ${t?"bg-red-500 animate-pulse":"bg-gray-400"}
    `,style:{width:12,height:12,marginRight:6,verticalAlign:"middle"}});function T0({user:t,admins:e=[],viewers:n=[],onSignOut:r,setPage:i,theme:o,page:s,liveGameId:a,goToLiveGame:l,openSettingsModal:u,onSignIn:f,games:c=[],dashboardFilters:d={},onDashboardFiltersChange:p}){const[m,g]=j.useState(!1),v=!!a,_=()=>{v&&(s==="live_admin"?window.confirm(`You are currently scoring the game. If you leave, you may lose unsaved progress.
Continue to live viewer?`)&&l():l())},w=x.jsxs("button",{disabled:!v,className:`flex items-center gap-1 px-3 py-1.5 font-semibold text-sm rounded-full transition-all
        ${v?"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300 animate-pulse cursor-pointer hover:bg-red-200 dark:hover:bg-red-800":"bg-gray-200 dark:bg-gray-800 text-gray-400 cursor-not-allowed"}`,onClick:_,title:v?"Watch Live Game":"No Live Game In Progress",children:[x.jsx(I_e,{active:v}),x.jsx("span",{className:"font-bold tracking-wide",children:"LIVE"})]}),E=d.searchTerm||d.dateFilter||d.outcomeFilter,C=T=>{p&&p(T)};return x.jsx("header",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm sticky top-0 z-20 border-b border-gray-200 dark:border-gray-700",children:x.jsx("div",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"flex items-center cursor-pointer",onClick:()=>i("game_setup"),children:x.jsx(Xm,{className:"h-7 w-7 sm:h-8 sm:w-8 text-orange-500 animate-spin-slow hover:scale-110 transition-transform"})}),w]}),x.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[x.jsx("button",{onClick:u,className:`flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg p-2 transition-all border-2 ${e.length===0?"border-transparent":e.length===1?"border-blue-300 shadow-sm shadow-blue-300/30":e.length===2?"border-blue-400 shadow-md shadow-blue-400/40":"border-blue-500 shadow-lg shadow-blue-500/50"}`,title:"Settings",children:x.jsx(t_e,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),x.jsx("button",{onClick:()=>i("dashboard"),className:`flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg p-2 transition-all border-2 ${n.length===0?"border-transparent":n.length===1?"border-green-300 shadow-sm shadow-green-300/30":n.length<=3?"border-green-400 shadow-md shadow-green-400/40":"border-green-500 shadow-lg shadow-green-500/50"}`,title:"Dashboard",children:x.jsx(a_e,{className:"h-5 w-5"})}),t&&x.jsxs("div",{className:"relative",children:[x.jsxs("button",{onClick:()=>{s==="dashboard"&&g(!m)},className:`flex items-center justify-center rounded-lg p-2 transition-all border-2 ${s==="dashboard"?`bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 cursor-pointer ${E?"border-orange-300 shadow-sm shadow-orange-300/30":"border-transparent"}`:"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed border-transparent"}`,title:s==="dashboard"?"Filter games":"Filter only available on Dashboard",disabled:s!=="dashboard",children:[x.jsx(e_e,{className:"h-5 w-5 sm:h-6 sm:w-6"}),E&&s==="dashboard"&&x.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full"})]}),m&&s==="dashboard"&&x.jsx(A_e,{games:c,filters:d,onFiltersChange:C,onClose:()=>g(!1)})]}),t?x.jsx("button",{onClick:r,className:"bg-red-500 hover:bg-red-600 text-white rounded-lg p-2 flex items-center justify-center border-2 border-transparent transition-all",title:"Sign Out",children:x.jsx(i_e,{className:"h-5 w-5"})}):f&&x.jsx("button",{onClick:f,className:"bg-blue-500 hover:bg-blue-600 text-white rounded-lg p-2 flex items-center justify-center border-2 border-transparent transition-all",title:"Sign In",children:x.jsx(n_e,{className:"h-5 w-5"})})]})]})})})}function P_e({onSignIn:t}){return x.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:x.jsxs("div",{className:"text-center p-8 max-w-md mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700",children:[x.jsx(Xm,{className:"h-12 w-12 text-orange-500 animate-spin-slow mx-auto"}),x.jsx("h1",{className:"text-4xl font-bold text-orange-500 mt-4",children:"Sahil's Stats"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2 mb-6",children:"Track stats, progress, and share with family."}),x.jsxs("button",{onClick:t,className:"w-full bg-white dark:bg-gray-100 hover:bg-gray-50 dark:hover:bg-gray-200 text-gray-700 dark:text-gray-800 font-medium py-3 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center border border-gray-300 dark:border-gray-400 shadow-sm",children:[x.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 48 48",children:[x.jsx("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"}),x.jsx("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"}),x.jsx("path",{fill:"#4CAF50",d:"M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238A11.91 11.91 0 0 1 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"}),x.jsx("path",{fill:"#1976D2",d:"M43.611 20.083H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C42.012 35.24 44 30.022 44 24c0-1.341-.138-2.65-.389-3.917z"})]}),"Sign in with Google"]})]})})}function En({label:t,value:e,onIncrement:n,onDecrement:r}){return x.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[x.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 text-center leading-tight min-h-[32px] flex items-center",children:t}),x.jsxs("div",{className:"flex items-center justify-center gap-2",children:[x.jsx("button",{type:"button",onClick:r,className:"bg-red-500 hover:bg-red-600 text-white w-8 h-8 rounded-md text-lg font-bold flex items-center justify-center shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95",disabled:e<=0,children:"−"}),x.jsx("span",{className:"font-mono w-10 text-center text-lg font-bold text-gray-900 dark:text-white",children:e}),x.jsx("button",{type:"button",onClick:n,className:"bg-green-500 hover:bg-green-600 text-white w-8 h-8 rounded-md text-lg font-bold flex items-center justify-center shadow-md transition-all active:scale-95",children:"+"})]})]})}function el({label:t,madeValue:e,attValue:n,onStatChange:r,madeKey:i,attKey:o,singleStat:s=!1}){return x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[x.jsx("h4",{className:"text-md font-bold text-center mb-3 text-gray-900 dark:text-white",children:t}),x.jsx("div",{className:"flex justify-center items-center gap-4",children:s?x.jsx(En,{label:"Total",value:e||0,onIncrement:()=>r(i,1),onDecrement:()=>r(i,-1)}):x.jsxs(x.Fragment,{children:[x.jsx(En,{label:"Made",value:e||0,onIncrement:()=>r(i,1),onDecrement:()=>r(i,-1)}),x.jsx(En,{label:"Attempted",value:n||0,onIncrement:()=>r(o,1),onDecrement:()=>r(o,-1)})]})})]})}function fS({status:t}){return t==="saving"?x.jsx("div",{className:"h-3 w-3 rounded-full bg-yellow-400 animate-pulse ml-2"}):t==="success"?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-400 ml-2",children:[x.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),x.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):t==="error"?x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-500 ml-2",children:[x.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):null}function S4(t,e="viewer",n=null){var s;if(!t)return;const r=t.displayName||t.name||"Anonymous",i=t.uid||"Viewer #"+(((s=t.uid)==null?void 0:s.slice(-4))||Math.floor(Math.random()*1e3)),o=e==="viewer"&&n?`presence/viewers/${n}/${i}`:`presence/${e}s/${i}`;eE(Qg(Xg,o),{uid:i,name:r,mode:e,liveGameId:n||null,ts:Date.now()})}function Zm(t,e="viewer",n=null){if(!t)return;const r=e==="viewer"&&n?`presence/viewers/${n}/${t.uid}`:`presence/${e}s/${t.uid}`;r7(Qg(Xg,r))}function C_e(t="viewer",e=null,n){const r=t==="viewer"&&e?`presence/viewers/${e}`:`presence/${t}s`;return o7(Qg(Xg,r),i=>{const o=i.val()||{};n(Object.values(o))})}const O_e=({isExpanded:t,className:e=""})=>x.jsx("div",{className:`w-12 h-1 bg-gray-400 rounded-full transition-all duration-200 ${t?"bg-orange-500":""} ${e}`});function k_e({db:t,gameId:e,user:n,onEndGame:r}){var Q,re;const[i,o]=j.useState(null),[s,a]=j.useState(""),[l,u]=j.useState(!1),[f,c]=j.useState(null),[d,p]=j.useState(0),[m,g]=j.useState(0),v=j.useRef(null),_=j.useRef(null);j.useEffect(()=>{if(!n)return;S4(n,"admin");const U=()=>Zm(n,"admin");return window.addEventListener("beforeunload",U),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&U()}),()=>{U(),window.removeEventListener("beforeunload",U),document.removeEventListener("visibilitychange",U)}},[n]),j.useEffect(()=>{const U=ka(Cn(t,"liveGames",e),X=>{if(X.exists()){const ue={id:X.id,...X.data()};_.current=ue.period,o(ue);const de=Date.now();if(ue.isRunning&&ue.clockStartTime){const me=de-ue.clockStartTime,xe=Math.floor(me/1e3),ae=Math.max(0,ue.clockAtStart-xe),Y=Math.max(0,ue.clockAtStart*1e3-me)/100;p(ae),g(Y)}else p(ue.clock||0),g((ue.clock||0)*10)}else o(null),p(0)});return()=>{U(),v.current&&(clearInterval(v.current),v.current=null)}},[t,e]),j.useEffect(()=>{if(i){if(i.isRunning&&i.clockStartTime){const U=d<=60?100:1e3;v.current=setInterval(()=>{const ue=Date.now()-i.clockStartTime,de=Math.floor(ue/1e3),me=Math.max(0,i.clockAtStart-de),xe=Math.max(0,i.clockAtStart*1e3-ue)/100;p(me),g(xe),me<=0&&i.isRunning&&w()},U)}else v.current&&(clearInterval(v.current),v.current=null);return()=>{v.current&&(clearInterval(v.current),v.current=null)}}},[i==null?void 0:i.isRunning,i==null?void 0:i.clockStartTime,i==null?void 0:i.clockAtStart,i==null?void 0:i.period,i==null?void 0:i.gameFormat,d,e]);const w=()=>{if(!i)return;const X=i.gameFormat==="halves"?2:4;i.period===X?is(Cn(t,"liveGames",e),{isRunning:!1,clock:0,clockStartTime:null,clockAtStart:0}):is(Cn(t,"liveGames",e),{isRunning:!1,period:i.period+1,clock:i.periodLength*60,clockStartTime:null,clockAtStart:i.periodLength*60})},E=(U,X)=>{if(!i)return;const ue=U==="home"?"homeScore":"awayScore";if(X<0&&i[ue]<=0)return;const de={[ue]:Zo(X)};if(!i.isRunning){const xe=Date.now();de.isRunning=!0,de.clockStartTime=xe,de.clockAtStart=i.clock||i.periodLength*60}const me=is(Cn(t,"liveGames",e),de);T(me)},C=(U,X)=>{const ue=Cn(t,"liveGames",e),de=i.playerStats,me=Math.max(0,de[U]+X),xe={[`playerStats.${U}`]:me};if(!i.isRunning){const Y=Date.now();xe.isRunning=!0,xe.clockStartTime=Y,xe.clockAtStart=i.clock||i.periodLength*60}X>0?(U==="fg2m"&&(xe.homeScore=Zo(2)),U==="fg3m"&&(xe.homeScore=Zo(3)),U==="ftm"&&(xe.homeScore=Zo(1))):X<0&&(U==="fg2m"&&de.fg2m>0&&(xe.homeScore=Zo(-2)),U==="fg3m"&&de.fg3m>0&&(xe.homeScore=Zo(-3)),U==="ftm"&&de.ftm>0&&(xe.homeScore=Zo(-1))),U==="fg2m"&&X>0&&me>de.fg2a&&(xe["playerStats.fg2a"]=me),U==="fg2a"&&X<0&&me<de.fg2m&&(xe["playerStats.fg2m"]=me),U==="fg3m"&&X>0&&me>de.fg3a&&(xe["playerStats.fg3a"]=me),U==="fg3a"&&X<0&&me<de.fg3m&&(xe["playerStats.fg3m"]=me),U==="ftm"&&X>0&&me>de.fta&&(xe["playerStats.fta"]=me),U==="fta"&&X<0&&me<de.ftm&&(xe["playerStats.ftm"]=me);const ae=is(ue,xe);T(ae)},T=async U=>{c("saving");try{await U,c("success")}catch{c("error")}finally{setTimeout(()=>{c(null)},1200)}},I=()=>{if(!i)return;const U=Date.now();let X;if(i.isRunning){const de=i.clockStartTime?Math.floor((U-i.clockStartTime)/1e3):0,me=Math.max(0,i.clockAtStart-de);X={isRunning:!1,clock:me,clockStartTime:null,clockAtStart:me}}else X={isRunning:!0,clockStartTime:U,clockAtStart:i.clock||i.periodLength*60};const ue=is(Cn(t,"liveGames",e),X);T(ue)},b=()=>{const U=Cn(t,"liveGames",e),ue=i.gameFormat==="halves"?2:4;i.period===ue?typeof r=="function"&&r(e):is(U,{isRunning:!1,period:i.period+1,clock:i.periodLength*60,clockStartTime:null,clockAtStart:i.periodLength*60})},S=()=>{const U=`${window.location.origin}${window.location.pathname}?liveGameId=${e}`;navigator.clipboard.writeText(U),a("Copied!"),setTimeout(()=>a(""),2e3)};if(!i)return x.jsx("div",{className:"text-center p-10",children:"Loading Live Game..."});const P=(U,X)=>{if(U<=59){const ue=Math.floor(X/10),de=Math.floor(X%10);return`${ue}.${de}`}else return`${String(Math.floor(U/60)).padStart(2,"0")}:${String(U%60).padStart(2,"0")}`},O=i.playerStats||{},k=i.gameFormat==="halves"?"Half":"Period",N=i.gameFormat==="halves"?2:4,V=i.period===N,z=V&&d===0&&!i.isRunning,q=z||V?"End Game":"Next",K=d<=120||V&&d===0,F=d<=60&&d>0,W=Math.max(((Q=i.teamName)==null?void 0:Q.length)||1,((re=i.opponent)==null?void 0:re.length)||1);return x.jsxs("div",{className:"h-screen flex flex-col",children:[z&&x.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-900 border border-yellow-400 dark:border-yellow-600 text-yellow-800 dark:text-yellow-200 px-4 py-3 text-center",children:[x.jsx("strong",{children:"Game Over!"}),' Press "End Game" when ready to finish.']}),x.jsxs("div",{className:"flex-shrink-0 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:[x.jsx("div",{className:"w-full max-w-md mx-auto p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 relative",children:[x.jsx("div",{className:"absolute top-2 right-2",children:x.jsx(fS,{status:f})}),x.jsx("div",{className:"flex justify-center items-center text-center mb-4",children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("span",{className:`text-4xl font-mono tracking-wider transition-all duration-300 ${F?"text-red-500 animate-pulse scale-110 font-bold":K?"text-red-500 animate-pulse":""}`,children:P(d,m)}),x.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:[k," ",i.period]})]})}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("span",{className:"font-bold text-center leading-tight break-words hyphens-auto px-1 mb-2",style:{fontSize:`${Math.max(18,Math.min(20,120/Math.max(W,6)))}px`},children:i.teamName}),x.jsxs("div",{className:"flex justify-between items-center bg-gray-100 dark:bg-gray-700 p-3 rounded-lg w-full",children:[x.jsx("button",{onClick:()=>E("home",-1),className:"bg-red-500 hover:bg-red-600 text-white w-9 h-9 rounded-md text-lg font-bold flex items-center justify-center shadow-md disabled:opacity-50 transition-all active:scale-95",disabled:i.homeScore<=0,children:"−"}),x.jsx("span",{className:"font-semibold text-3xl px-2 text-center flex-1 text-gray-900 dark:text-white font-mono",children:i.homeScore}),x.jsx("button",{onClick:()=>E("home",1),className:"bg-green-500 hover:bg-green-600 text-white w-9 h-9 rounded-md text-lg font-bold flex items-center justify-center shadow-md transition-all active:scale-95",children:"+"})]})]}),x.jsxs("div",{className:"flex flex-col items-center",children:[x.jsx("span",{className:"font-bold text-center leading-tight break-words hyphens-auto px-1 mb-2",style:{fontSize:`${Math.max(18,Math.min(20,120/Math.max(W,6)))}px`},children:i.opponent}),x.jsxs("div",{className:"flex justify-between items-center bg-gray-100 dark:bg-gray-700 p-3 rounded-lg w-full",children:[x.jsx("button",{onClick:()=>E("away",-1),className:"bg-red-500 hover:bg-red-600 text-white w-9 h-9 rounded-md text-lg font-bold flex items-center justify-center shadow-md disabled:opacity-50 transition-all active:scale-95",disabled:i.awayScore<=0,children:"−"}),x.jsx("span",{className:"font-semibold text-3xl px-2 text-center flex-1 text-gray-900 dark:text-white font-mono",children:i.awayScore}),x.jsx("button",{onClick:()=>E("away",1),className:"bg-green-500 hover:bg-green-600 text-white w-9 h-9 rounded-md text-lg font-bold flex items-center justify-center shadow-md transition-all active:scale-95",children:"+"})]})]})]})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:x.jsxs("div",{className:"w-full max-w-md mx-auto p-4",children:[x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700",children:[x.jsx("div",{className:"flex flex-col items-center p-4 border-b border-gray-200 dark:border-gray-700",children:x.jsxs("button",{onClick:()=>u(!l),className:"flex flex-col items-center gap-2 w-full",children:[x.jsx(O_e,{isExpanded:!l}),x.jsx("h3",{className:"text-lg font-bold text-orange-500",children:l?"Stats Collapsed":"Live Stats"})]})}),!l&&x.jsxs("div",{className:"p-4",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx(el,{label:"2-Pointers",madeValue:O.fg2m,attValue:O.fg2a,onStatChange:C,madeKey:"fg2m",attKey:"fg2a"}),x.jsx(el,{label:"3-Pointers",madeValue:O.fg3m,attValue:O.fg3a,onStatChange:C,madeKey:"fg3m",attKey:"fg3a"}),x.jsx(el,{label:"Free Throws",madeValue:O.ftm,attValue:O.fta,onStatChange:C,madeKey:"ftm",attKey:"fta"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 mt-4 border-t border-gray-200 dark:border-gray-700",children:[x.jsx(En,{label:"Rebounds",value:O.rebounds,onIncrement:()=>C("rebounds",1),onDecrement:()=>C("rebounds",-1)}),x.jsx(En,{label:"Assists",value:O.assists,onIncrement:()=>C("assists",1),onDecrement:()=>C("assists",-1)}),x.jsx(En,{label:"Steals",value:O.steals,onIncrement:()=>C("steals",1),onDecrement:()=>C("steals",-1)}),x.jsx(En,{label:"Blocks",value:O.blocks,onIncrement:()=>C("blocks",1),onDecrement:()=>C("blocks",-1)}),x.jsx(En,{label:"Fouls",value:O.fouls,onIncrement:()=>C("fouls",1),onDecrement:()=>C("fouls",-1)}),x.jsx(En,{label:"Turnovers",value:O.turnovers,onIncrement:()=>C("turnovers",1),onDecrement:()=>C("turnovers",-1)})]})]})]}),x.jsx("div",{className:"h-20"})]})}),x.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-50",children:x.jsx("div",{className:"w-full max-w-md mx-auto p-3",children:x.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[x.jsx("button",{onClick:S,className:"w-full py-3 rounded-lg font-bold text-lg bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center",children:s||x.jsx(r_e,{})}),x.jsx("button",{onClick:I,className:`w-full py-3 rounded-lg font-bold text-lg ${i.isRunning?"bg-yellow-500 text-black":"bg-green-500 text-white"}`,disabled:z,children:i.isRunning?"Pause":"Start"}),x.jsx("button",{onClick:b,className:`w-full font-bold py-3 rounded-lg text-lg ${z?"bg-red-600 hover:bg-red-700":"bg-orange-500 hover:bg-orange-600"} text-white`,children:q})]})})})]})]})}const Kt=[];for(let t=0;t<256;++t)Kt.push((t+256).toString(16).slice(1));function N_e(t,e=0){return(Kt[t[e+0]]+Kt[t[e+1]]+Kt[t[e+2]]+Kt[t[e+3]]+"-"+Kt[t[e+4]]+Kt[t[e+5]]+"-"+Kt[t[e+6]]+Kt[t[e+7]]+"-"+Kt[t[e+8]]+Kt[t[e+9]]+"-"+Kt[t[e+10]]+Kt[t[e+11]]+Kt[t[e+12]]+Kt[t[e+13]]+Kt[t[e+14]]+Kt[t[e+15]]).toLowerCase()}let A0;const R_e=new Uint8Array(16);function M_e(){if(!A0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");A0=crypto.getRandomValues.bind(crypto)}return A0(R_e)}const D_e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hN={randomUUID:D_e};function j_e(t,e,n){var i;if(hN.randomUUID&&!e&&!t)return hN.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??M_e();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[n+o]=r[o];return e}return N_e(r)}function L_e(){const t=localStorage.getItem("anonViewerId")||j_e();return localStorage.setItem("anonViewerId",t),{uid:t,name:"Guest",photoURL:"",mode:"viewer"}}function dN({db:t,gameId:e,appId:n,user:r}){const[i,o]=j.useState(null),[s,a]=j.useState(null),[l,u]=j.useState([]),[f,c]=j.useState(0),[d,p]=j.useState(0),m=j.useRef(null),g=r||L_e();if(j.useEffect(()=>{if(!e)return;S4(g,"viewer",e);const b=C_e("viewer",e,u),S=()=>{Zm(g,"viewer",e)};return window.addEventListener("beforeunload",S),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&S()}),()=>{S(),typeof b=="function"&&b(),window.removeEventListener("beforeunload",S),document.removeEventListener("visibilitychange",S)}},[r,e]),j.useEffect(()=>{if(!t||!e)return;const b=Cn(t,"liveGames",e),S=ka(b,P=>{if(P.exists()){const O=P.data();o(O);const k=Date.now();if(O.isRunning&&O.clockStartTime){const M=k-O.clockStartTime,N=Math.floor(M/1e3),V=Math.max(0,O.clockAtStart-N),z=Math.max(0,O.clockAtStart*1e3-M)/100;c(V),p(z)}else c(O.clock||0),p((O.clock||0)*10)}else a("This game is no longer live.")});return()=>{S(),m.current&&(clearInterval(m.current),m.current=null)}},[t,e,n]),j.useEffect(()=>{if(i){if(i.isRunning&&i.clockStartTime){const b=f<=60?100:1e3;m.current=setInterval(()=>{const P=Date.now()-i.clockStartTime,O=Math.floor(P/1e3),k=Math.max(0,i.clockAtStart-O),M=Math.max(0,i.clockAtStart*1e3-P)/100;c(k),p(M)},b)}else m.current&&(clearInterval(m.current),m.current=null);return()=>{m.current&&(clearInterval(m.current),m.current=null)}}},[i==null?void 0:i.isRunning,i==null?void 0:i.clockStartTime,i==null?void 0:i.clockAtStart,f]),s)return x.jsxs("div",{className:"max-w-md mx-auto text-center p-8 bg-white dark:bg-gray-800 rounded-xl",children:[x.jsx(Xm,{className:"hover:animate-spin-slow transition-transform"}),x.jsx("h2",{className:"text-2xl font-bold text-red-500 mt-4",children:"Game Not Found"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:s})]});if(!i)return x.jsx("div",{className:"text-center p-10",children:"Loading Live Game..."});const v=i.playerStats||i.sahilStats||{},w=[{label:"Points",value:(Number(v.fg2m)||0)*2+(Number(v.fg3m)||0)*3+(Number(v.ftm)||0)},{label:"2PT Made",value:v.fg2m??0},{label:"2PT Attempted",value:v.fg2a??0},{label:"3PT Made",value:v.fg3m??0},{label:"3PT Attempted",value:v.fg3a??0},{label:"FT Made",value:v.ftm??0},{label:"FT Attempted",value:v.fta??0},{label:"Assists",value:v.assists??0},{label:"Rebounds",value:v.rebounds??0},{label:"Steals",value:v.steals??0},{label:"Fouls",value:v.fouls??0}],E=(b,S)=>{if(b<=59){const P=Math.floor(S/10),O=Math.floor(S%10);return`${P}.${O}`}else return`${String(Math.floor(b/60)).padStart(2,"0")}:${String(b%60).padStart(2,"0")}`},C=i.gameFormat==="halves"?"Half":"Period",T=f<=120,I=f<=60&&f>0;return x.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[x.jsx("h1",{className:"text-3xl font-bold text-center text-orange-500",children:"Live Game"}),x.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700",children:x.jsxs("div",{className:"flex justify-around items-center text-center",children:[x.jsxs("div",{className:"w-1/3",children:[x.jsx("h3",{className:"text-xl md:text-2xl font-bold truncate",children:i.teamName}),x.jsx("p",{className:"text-5xl md:text-7xl font-mono",children:i.homeScore})]}),x.jsxs("div",{className:"w-1/3",children:[x.jsx("p",{className:`text-4xl font-mono tracking-wider transition-all duration-300 ${I?"text-red-500 animate-pulse scale-110 font-bold":T?"text-red-500 animate-pulse":""}`,children:E(f,d)}),x.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:[C," ",i.period]})]}),x.jsxs("div",{className:"w-1/3",children:[x.jsx("h3",{className:"text-xl md:text-2xl font-bold truncate",children:i.opponent}),x.jsx("p",{className:"text-5xl md:text-7xl font-mono",children:i.awayScore})]})]})}),x.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm",children:x.jsx("p",{children:"You are viewing a live game. The score and stats update automatically."})}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:[x.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[x.jsx(Xm,{className:"text-orange-500 h-5 w-5 animate-spin-slow"}),x.jsx("span",{className:"font-bold text-orange-500 text-lg",children:"Sahil's Live Stats"})]}),x.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:w.map(b=>x.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 rounded-lg p-3 flex flex-col items-center",children:[x.jsx("span",{className:"text-xs text-orange-500 font-semibold",children:b.label}),x.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:b.value})]},b.label))})]}),x.jsx("div",{className:"text-center mt-4 text-xs text-gray-500",children:x.jsxs("span",{className:"inline-flex items-center gap-1",children:[x.jsx("span",{className:"bg-green-400 rounded-full w-2 h-2 animate-pulse"}),l.length," ",l.length===1?"viewer":"viewers"," currently watching"]})})]})}function $_e({gameConfig:t,isLive:e=!1,onSave:n,onCancel:r,onShare:i,saveStatus:o,shareMessage:s}){const[a,l]=j.useState({myTeamScore:0,opponentScore:0,fg2m:0,fg2a:0,fg3m:0,fg3a:0,ftm:0,fta:0,rebounds:0,assists:0,steals:0,blocks:0,fouls:0,turnovers:0});j.useEffect(()=>{var p,m,g,v,_,w,E,C,T,I,b,S;t&&l({myTeamScore:t.myTeamScore||t.homeScore||0,opponentScore:t.opponentScore||t.awayScore||0,fg2m:t.fg2m||((p=t.playerStats)==null?void 0:p.fg2m)||0,fg2a:t.fg2a||((m=t.playerStats)==null?void 0:m.fg2a)||0,fg3m:t.fg3m||((g=t.playerStats)==null?void 0:g.fg3m)||0,fg3a:t.fg3a||((v=t.playerStats)==null?void 0:v.fg3a)||0,ftm:t.ftm||((_=t.playerStats)==null?void 0:_.ftm)||0,fta:t.fta||((w=t.playerStats)==null?void 0:w.fta)||0,rebounds:t.rebounds||((E=t.playerStats)==null?void 0:E.rebounds)||0,assists:t.assists||((C=t.playerStats)==null?void 0:C.assists)||0,steals:t.steals||((T=t.playerStats)==null?void 0:T.steals)||0,blocks:t.blocks||((I=t.playerStats)==null?void 0:I.blocks)||0,fouls:t.fouls||((b=t.playerStats)==null?void 0:b.fouls)||0,turnovers:t.turnovers||((S=t.playerStats)==null?void 0:S.turnovers)||0})},[t]);const u=a.fg2m*2+a.fg3m*3+a.ftm,f=(p,m)=>{const g=p==="home"?"myTeamScore":"opponentScore";l(v=>({...v,[g]:Math.max(0,v[g]+m)}))},c=(p,m)=>{l(g=>{const v={...g},_=Math.max(0,g[p]+m);return v[p]=_,p==="fg2m"&&_>g.fg2a&&(v.fg2a=_),p==="fg2a"&&_<g.fg2m&&(v.fg2m=_),p==="fg3m"&&_>g.fg3a&&(v.fg3a=_),p==="fg3a"&&_<g.fg3m&&(v.fg3m=_),p==="ftm"&&_>g.fta&&(v.fta=_),p==="fta"&&_<g.ftm&&(v.ftm=_),v})},d=()=>{n(a)};return t?x.jsxs("div",{className:"max-w-md mx-auto space-y-4 pb-24",children:[x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 relative",children:[x.jsx("div",{className:"absolute top-2 right-2",children:o&&x.jsx(fS,{status:o})}),x.jsxs("div",{className:"flex justify-around items-center text-center mb-4",children:[x.jsxs("div",{className:"w-1/3 flex flex-col items-center relative",children:[x.jsx("span",{className:"text-lg font-bold truncate text-center",children:t.teamName}),x.jsx("div",{className:"flex items-center",children:x.jsx("span",{className:"text-5xl font-mono",children:a.myTeamScore})})]}),x.jsxs("div",{className:"w-1/3 flex flex-col items-center justify-center",children:[x.jsx("span",{className:"text-2xl font-bold text-orange-500",children:"Final Stats"}),x.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.opponent})]}),x.jsxs("div",{className:"w-1/3 flex flex-col items-center relative",children:[x.jsx("span",{className:"text-lg font-bold truncate text-center",children:t.opponent}),x.jsx("div",{className:"flex items-center",children:x.jsx("span",{className:"text-5xl font-mono",children:a.opponentScore})})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[x.jsxs("div",{className:"flex justify-between items-center bg-gray-100 dark:bg-gray-700 p-1.5 rounded-lg",children:[x.jsx("button",{onClick:()=>f("home",-1),className:"bg-red-500 w-7 h-7 rounded-md text-lg font-bold disabled:opacity-50",disabled:a.myTeamScore<=0,children:"-"}),x.jsx("span",{className:"font-semibold text-sm px-1",children:t.teamName}),x.jsx("button",{onClick:()=>f("home",1),className:"bg-green-500 w-7 h-7 rounded-md text-lg font-bold",children:"+"})]}),x.jsxs("div",{className:"flex justify-between items-center bg-gray-100 dark:bg-gray-700 p-1.5 rounded-lg",children:[x.jsx("button",{onClick:()=>f("away",-1),className:"bg-red-500 w-7 h-7 rounded-md text-lg font-bold disabled:opacity-50",disabled:a.opponentScore<=0,children:"-"}),x.jsx("span",{className:"font-semibold text-sm px-1",children:t.opponent}),x.jsx("button",{onClick:()=>f("away",1),className:"bg-green-500 w-7 h-7 rounded-md text-lg font-bold",children:"+"})]})]})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-bold text-center text-orange-500 mb-4",children:"Sahil's Stats"}),x.jsxs("div",{className:"text-center mb-4",children:[x.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:u}),x.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 block",children:"Total Points"})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx(el,{label:"2-Pointers",madeValue:a.fg2m,attValue:a.fg2a,onStatChange:c,madeKey:"fg2m",attKey:"fg2a"}),x.jsx(el,{label:"3-Pointers",madeValue:a.fg3m,attValue:a.fg3a,onStatChange:c,madeKey:"fg3m",attKey:"fg3a"}),x.jsx(el,{label:"Free Throws",madeValue:a.ftm,attValue:a.fta,onStatChange:c,madeKey:"ftm",attKey:"fta"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 mt-4 border-t border-gray-200 dark:border-gray-700",children:[x.jsx(En,{label:"Rebounds",value:a.rebounds,onIncrement:()=>c("rebounds",1),onDecrement:()=>c("rebounds",-1)}),x.jsx(En,{label:"Assists",value:a.assists,onIncrement:()=>c("assists",1),onDecrement:()=>c("assists",-1)}),x.jsx(En,{label:"Steals",value:a.steals,onIncrement:()=>c("steals",1),onDecrement:()=>c("steals",-1)}),x.jsx(En,{label:"Blocks",value:a.blocks,onIncrement:()=>c("blocks",1),onDecrement:()=>c("blocks",-1)}),x.jsx(En,{label:"Fouls",value:a.fouls,onIncrement:()=>c("fouls",1),onDecrement:()=>c("fouls",-1)}),x.jsx(En,{label:"Turnovers",value:a.turnovers,onIncrement:()=>c("turnovers",1),onDecrement:()=>c("turnovers",-1)})]})]}),x.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm p-3 border-t border-gray-200 dark:border-gray-700 z-10",children:x.jsxs("div",{className:"grid grid-cols-2 gap-3 max-w-md mx-auto",children:[x.jsx("button",{onClick:r,className:"w-full py-3 rounded-lg font-bold text-lg bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200",children:"Cancel"}),x.jsx("button",{onClick:d,className:"w-full py-3 rounded-lg font-bold text-lg bg-green-500 hover:bg-green-600 text-white",children:"Save Stats"})]})})]}):x.jsx("div",{className:"max-w-md mx-auto text-center p-10",children:x.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading..."})})}function F_e({open:t,onClose:e,teams:n=[],onAddTeam:r,onDeleteTeam:i,gameFormat:o,setGameFormat:s,theme:a,toggleTheme:l,periodLength:u,setPeriodLength:f,onDeleteAllLiveGames:c}){const[d,p]=j.useState(""),[m,g]=j.useState(""),v=Array.from(new Map(n.map(b=>[b.id,b])).values()),_=async b=>{const S=b.trim();if(!S||n.some(P=>P.name.toLowerCase()===S.toLowerCase())){g("error"),setTimeout(()=>g(""),1200);return}g("saving");try{await r(S),g("success"),p("")}catch{g("error")}setTimeout(()=>g(""),1200)},w=async b=>{g("saving");try{await i(b),g("success")}catch{g("error")}setTimeout(()=>g(""),1200)},E=b=>{s(b),localStorage.setItem("gameFormat",b),g("success"),setTimeout(()=>g(""),1200)},C=b=>{const S=Number(b);f(S),localStorage.setItem("periodLength",S.toString()),g("success"),setTimeout(()=>g(""),1200)},T=()=>{l(),g("success"),setTimeout(()=>g(""),1200)},I=async()=>{g("saving");try{await c(),g("success"),setTimeout(()=>{g(""),e()},300)}catch{g("error"),setTimeout(()=>g(""),1200)}};return t?x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:x.jsxs("div",{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded-2xl shadow-xl max-w-md w-full mx-2 p-6 relative",children:[x.jsx("button",{className:"absolute top-2 right-3 text-2xl text-gray-500 hover:text-orange-500",onClick:e,children:"×"}),x.jsxs("h2",{className:"text-2xl font-bold font-bold text-orange-500 mb-6 flex items-center",children:["Settings",x.jsx(fS,{status:m})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"font-semibold mb-2",children:"Teams"}),x.jsxs("div",{className:"flex gap-2 mb-3",children:[x.jsx("input",{type:"text",placeholder:"Add new team",className:"flex-1 rounded bg-gray-100 dark:bg-gray-800 p-2 outline-none border border-gray-300 dark:border-gray-600",value:d,onChange:b=>p(b.target.value),onKeyDown:b=>{b.key==="Enter"&&d.trim()&&_(d.trim())}}),x.jsx("button",{className:"bg-orange-500 hover:bg-orange-500 text-white font-bold px-4 py-2 rounded disabled:opacity-50",onClick:()=>_(d),disabled:!d.trim(),children:"Add"})]}),x.jsx("ul",{className:"space-y-2",children:v.map(b=>x.jsxs("li",{className:"flex items-center justify-between px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded",children:[x.jsx("span",{children:b.name}),x.jsx("button",{className:"p-1 text-red-400 hover:text-red-600 rounded",onClick:()=>w(b.id),title:"Delete Team",children:x.jsx(Jm,{className:"h-5 w-5"})})]},b.id))})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"font-semibold mb-2",children:"Game Format"}),x.jsxs("div",{className:"flex gap-4 items-center mb-2",children:[x.jsxs("label",{children:[x.jsx("input",{type:"radio",className:"mr-1",name:"gameFormat",value:"periods",checked:o==="periods",onChange:()=>E("periods")}),"Periods"]}),x.jsxs("label",{children:[x.jsx("input",{type:"radio",className:"mr-1",name:"gameFormat",value:"halves",checked:o==="halves",onChange:()=>E("halves")}),"Halves"]})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Length (minutes per ",o==="halves"?"half":"period",")"]}),x.jsx("input",{type:"number",min:"1",max:"30",className:"bg-gray-100 dark:bg-gray-800 p-2 rounded border border-gray-300 dark:border-gray-600 w-24",value:u,onChange:b=>C(b.target.value)})]})]}),x.jsxs("div",{className:"flex items-center gap-4 justify-end mt-4",children:[x.jsx("button",{onClick:T,className:"p-2 bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Switch theme",children:a==="dark"?x.jsx(o_e,{className:"h-6 w-6"}):x.jsx(s_e,{className:"h-6 w-6"})}),x.jsx("button",{onClick:I,className:"p-2 bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-red-400 hover:text-red-600",title:"Delete all live games",children:x.jsx(Jm,{className:"h-6 w-6"})})]})]})}):null}function V_e(){const[t,e]=j.useState(null),[n,r]=j.useState(()=>localStorage.getItem("theme")||"light"),[i,o]=j.useState(!0),[s,a]=j.useState(!0),[l,u]=j.useState("game_setup"),[f,c]=j.useState([]),[d,p]=j.useState([]),[m,g]=j.useState([]),[v,_]=j.useState(null),[w,E]=j.useState(null),[C,T]=j.useState(!1),[I,b]=j.useState(()=>localStorage.getItem("gameFormat")||"halves"),[S,P]=j.useState(()=>parseInt(localStorage.getItem("periodLength"))||20),[O,k]=j.useState(2),[M,N]=j.useState([]),[V,z]=j.useState([]);j.useEffect(()=>{document.documentElement.classList.toggle("dark",n==="dark"),localStorage.setItem("theme",n)},[n]);const q=j.useCallback(()=>r(ae=>ae==="dark"?"light":"dark"),[]);j.useEffect(()=>{if(!t)return;const ae=br(yt,"teams");return ka(ae,te=>{c(te.docs.map(le=>({id:le.id,...le.data()})))})},[t]),j.useEffect(()=>{if(!t)return;const ae=br(yt,"games");return ka(ae,te=>{const le=te.docs.map(G=>({id:G.id,...G.data()}));p(le)})},[t]),j.useEffect(()=>{if(!t)return;const ae=br(yt,"stats");return ka(ae,te=>{g(te.docs.map(le=>({id:le.id,...le.data()})))})},[t]),j.useEffect(()=>{const ae=Bz(Yv,Y=>{if(o(!1),e(Y),Y){const te=Qg(Xg,`presence/admins/${Y.uid}`);n7(te).remove(),eE(te,{uid:Y.uid,name:Y.displayName||"Admin",ts:y7()})}});return()=>ae()},[]),j.useEffect(()=>{a(!0);const ae=br(yt,"liveGames"),Y=ka(ae,te=>{te.empty?_(null):_(te.docs[0].id),a(!1)});return()=>Y()},[l]),j.useEffect(()=>{!t&&v&&l!=="live_viewer"&&u("live_viewer")},[t,v,l]);const K=async(ae,Y)=>{try{await is(Cn(yt,"games",ae),{photos:Y}),p(te=>te.map(le=>le.id===ae?{...le,photos:Y}:le))}catch(te){console.error("Error updating game photos:",te)}},F=j.useCallback(async ae=>{await cd(Cn(yt,"teams",ae)),c(Y=>Y.filter(te=>te.id!==ae))},[]),W=async ae=>{if(f.some(le=>le.name.toLowerCase()===ae.toLowerCase()))return null;const te=await $u(br(yt,"teams"),{name:ae});return c(le=>[...le,{name:ae,id:te.id}]),{name:ae,id:te.id}},Q=j.useCallback(async ae=>{const Y=await $u(br(yt,"games"),ae);p(te=>[...te,{...ae,id:Y.id}])},[]),re=j.useCallback(async ae=>{const Y=ae.fg2m*2+ae.fg3m*3+ae.ftm;let te="T";ae.myTeamScore>ae.opponentScore?te="W":ae.myTeamScore<ae.opponentScore&&(te="L");const le={...w,...ae,points:Y,outcome:te,status:"final",createdAt:new Date().toISOString(),adminName:t!=null&&t.displayName?t.displayName.split(" ")[0]:""},G=await $u(br(yt,"games"),le);p(_e=>[..._e,{...le,id:G.id}]),E(null),u("dashboard")},[w,t]),U=j.useCallback(async ae=>{await cd(Cn(yt,"games",ae)),p(Y=>Y.filter(te=>te.id!==ae)),g(Y=>Y.filter(te=>te.gameId!==ae))},[]),X=async ae=>{try{const Y=Cn(yt,"liveGames",ae),te=await tz(Y);if(!te.exists()){console.log("Live game not found for endGame, id:",ae);return}const le=t!=null&&t.displayName?t.displayName.split(" ")[0]:"",G=te.data(),_e=G.playerStats||{},$=G.homeScore??0,se=G.awayScore??0;let Ie="T";$>se?Ie="W":$<se&&(Ie="L");const $e={...G,myTeamScore:$,opponentScore:se,outcome:Ie,points:(_e.fg2m??0)*2+(_e.fg3m??0)*3+(_e.ftm??0)*1,fg2m:_e.fg2m??0,fg2a:_e.fg2a??0,fg3m:_e.fg3m??0,fg3a:_e.fg3a??0,ftm:_e.ftm??0,fta:_e.fta??0,rebounds:_e.rebounds??0,assists:_e.assists??0,steals:_e.steals??0,blocks:_e.blocks??0,fouls:_e.fouls??0,turnovers:_e.turnovers??0,endedAt:new Date().toISOString(),status:"final",adminName:le,isRunning:!1},Ht=await $u(br(yt,"games"),$e);await cd(Y),_(null),u("game_setup");const vr=br(yt,"games"),si=await uI(vr);p(si.docs.map(Pn=>({id:Pn.id,...Pn.data()})))}catch(Y){console.error("Failed to save/end game:",Y)}},ue=async()=>{if(!t)return null;const ae=await uI(br(yt,"liveGames"));for(let Y of ae.docs)await cd(Cn(yt,"liveGames",Y.id));_(null)},de=async()=>{await uW(Yv,_7)},me=async()=>{try{Zm(t,"viewer",v),t&&Zm(t,"admin"),l==="live_admin"&&v&&await X(v),await zz(Yv),e(null),u("game_setup"),_(null),p([]),g([]),N([]),z([])}catch(ae){console.error("Error signing out:",ae)}},xe=async(ae,Y)=>{const te={...ae,createdBy:(t==null?void 0:t.uid)||null,createdAt:new Date().toISOString(),status:Y==="live"?"live":"final",playerStats:{fg2m:0,fg2a:0,fg3m:0,fg3a:0,ftm:0,fta:0,rebounds:0,assists:0,steals:0,blocks:0,fouls:0,turnovers:0},homeScore:0,awayScore:0,isRunning:!1,clock:S?S*60:600,period:1,gameFormat:I||"halves",periodLength:S||20,numPeriods:I==="halves"?2:4};if(Y==="live"){const le=await $u(br(yt,"liveGames"),te);_(le.id),u("live_admin")}else E(te),u("add_stat")};return i||s?x.jsxs("div",{className:"flex items-center justify-center h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[x.jsx("span",{className:"text-orange-500 font-bold text-3xl animate-spin-slow",children:"🏀"}),x.jsx("span",{className:"ml-4",children:"Loading App..."})]}):!t&&l==="live_viewer"?v?x.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100 dark:bg-gray-900",children:[x.jsx(T0,{user:null,db:yt,onSignOut:me,setPage:u,theme:n,toggleTheme:q,admins:M,viewers:V,page:l,liveGameId:v,goToLiveGame:()=>u("live_viewer"),onDeleteAllLiveGames:ue,openSettingsModal:()=>T(!0),onSignIn:de}),x.jsx("main",{className:"flex-1",children:x.jsx(dN,{db:yt,user:null,gameId:v,setPage:u,teams:f,stats:m,games:d})})]}):x.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100 dark:bg-gray-900",children:[x.jsx(T0,{user:null,db:yt,onSignOut:me,setPage:u,theme:n,toggleTheme:q,admins:M,viewers:V,page:l,liveGameId:v,goToLiveGame:()=>u("live_viewer"),onDeleteAllLiveGames:ue,openSettingsModal:()=>T(!0)}),x.jsx("main",{className:"flex-1 flex items-center justify-center",children:x.jsx("div",{className:"text-2xl text-gray-400 text-center",children:"No live game in progress."})})]}):!t&&l!=="live_viewer"?x.jsx(P_e,{onSignIn:de}):x.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100 dark:bg-gray-900",children:[x.jsx(T0,{user:t,db:yt,onSignOut:me,setPage:u,theme:n,toggleTheme:q,admins:M,viewers:V,page:l,liveGameId:v,goToLiveGame:()=>u("live_viewer"),onDeleteAllLiveGames:ue,openSettingsModal:()=>T(!0)}),x.jsx(F_e,{open:C,onClose:()=>T(!1),teams:f,onAddTeam:W,onDeleteTeam:F,gameFormat:I,setGameFormat:b,periodLength:S,setPeriodLength:P,theme:n,toggleTheme:q,setPage:u,onDeleteAllLiveGames:ue}),x.jsxs("main",{className:"flex-1",children:[t&&l==="game_setup"&&x.jsx(w7,{user:t,teams:f,stats:d,onAddTeam:W,setPage:u,games:d,onAddGame:Q,setLiveGameId:_,onSubmit:xe,gameFormat:I,periodLength:S,numPeriods:O}),t&&l==="dashboard"&&x.jsx(S_e,{user:t,teams:f,games:d,stats:d,onDeleteGame:U,onDeleteTeam:F,onAddTeam:W,onUpdateGamePhotos:K}),t&&l==="add_stat"&&w&&x.jsx($_e,{gameConfig:w,isLive:!1,onSave:re,onCancel:()=>{E(null),u("game_setup")}}),t&&l==="live_admin"&&v&&x.jsx(k_e,{user:t,db:yt,gameId:v,setPage:u,teams:f,stats:m,games:d,onEndGame:X}),t&&l==="live_viewer"&&v&&x.jsx(dN,{db:yt,user:t,gameId:v,setPage:u,teams:f,stats:m,games:d})]})]})}I0.createRoot(document.getElementById("root")).render(x.jsx(D.StrictMode,{children:x.jsx(V_e,{})}));
